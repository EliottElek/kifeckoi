(this.webpackJsonpmaterials=this.webpackJsonpmaterials||[]).push([[5],{1868:function(e,t,n){"use strict";var a=n(35),c=n(13),i=n(2),s=n(1);t.a=function(e){var t=Object(i.useRef)(null),n=Object(i.useState)(""),r=Object(c.a)(n,2),o=r[0],l=r[1],d=Object(i.useState)("auto"),j=Object(c.a)(d,2),u=j[0],b=j[1],p=Object(i.useState)("auto"),O=Object(c.a)(p,2),h=O[0],_=O[1];Object(i.useEffect)((function(){t&&_("".concat(t.current.scrollHeight,"px")),b("".concat(t.current.scrollHeight,"px"))}),[o]);return Object(s.jsx)("div",{style:{minHeight:h,display:"flex",alignItems:"center"},children:Object(s.jsx)("textarea",Object(a.a)(Object(a.a)({onFocus:function(e){return e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)}},e),{},{ref:t,rows:1,style:Object(a.a)(Object(a.a)({},e.style),{},{margin:0,height:u}),onChange:function(n){b("auto"),_("".concat(t.current.scrollHeight,"px")),l(n.target.value),e.onChange&&e.onChange(n)}}))})}},1878:function(e,t,n){"use strict";var a=n(2029),c=n(1940),i=n(1941),s=n(1);t.a=function(e){var t=e.children;return Object(s.jsx)(a.a,{remarkPlugins:[c.a],rehypePlugins:[i.a],components:{a:function(e){var t=e.children,n=e.href;return Object(s.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",onClick:function(e){return e.stopPropagation()},children:t})}},children:t})}},1880:function(e,t,n){"use strict";t.a=function(e,t){var n=parseInt(new Date(e).getDate()),a=parseInt(new Date(e).getMonth())+1;n<=9&&(n="0"+n),a<=9&&(a="0"+a);var c=n+"/"+a+"/"+parseInt(new Date(e).getFullYear());if(t){var i=new Date(e),s=i.getMinutes(),r=i.getHours();s<=9&&(s="0"+s),r<=9&&(r="0"+r),c+=" "+(r+":"+s)}return c}},1883:function(e,t,n){},1884:function(e,t,n){"use strict";var a=n(100),c=n.n(a),i=n(131),s=n(13),r=n(2),o=n(81),l=n(32),d=n(77),j=n(133),u=n(79),b=n(80),p=n(54),O=n(132),h=n(46),_=n(1867),v=n(134),x=n(1858),f=n(10),m=(n(1894),n(1));t.a=function(e){var t=e.usr,n=e.dataProject,a=e.dataEvents,g=e.modal,k=e.eventMode,C=e.event,y=Object(r.useContext)(l.a),N=y.currentProject,P=y.user,S=Object(r.useState)(!1),T=Object(s.a)(S,2),w=T[0],I=T[1],E=Object(r.useState)(!1),B=Object(s.a)(E,2),H=B[0],A=B[1],z=Object(x.a)(O.b),L=Object(s.a)(z,1)[0],D=Object(x.a)(O.a),F=Object(s.a)(D,1)[0],M=Object(f.h)().id,V=function(){var e=Object(i.a)(c.a.mark((function e(i){var s,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.stopPropagation(),e.prev=1,s=N.contributors,r=s.filter((function(e){return e.id!==t.id})),o=r.map((function(e){return e.id})),!k){e.next=10;break}return e.next=8,F({variables:{eventId:C.id,contributors:o}});case 8:e.next=12;break;case 10:return e.next=12,L({variables:{projectId:M,contributors:o}});case 12:a&&setTimeout((function(){a.refetch()}),200),n&&setTimeout((function(){n.refetch()}),200),h.c.success("Contributeur supprim\xe9 avec succ\xe8s.",{position:h.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1}),A(!1),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),h.c.error("Impossible de supprimer les contributeurs.",{position:h.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"user__card",children:[Object(m.jsx)(o.a,{name:t.username,large:!0,src:t.avatarUrl}),Object(m.jsx)("h5",{className:"user__card__name",children:t.firstname+" "+t.lastname}),Object(m.jsxs)("h6",{className:"user__card__username",children:["(",t.username,")"]}),Object(m.jsx)("p",{className:"user__card__email",children:t.email}),P.id!==t.id&&!g&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:I,className:"delete__user__button",children:Object(m.jsx)(_.b,{})}),Object(m.jsx)(b.a,{open:w,setOpen:I,bottom:!0,style:{transform:"translate(70%, -60%)"},children:Object(m.jsxs)(u.a,{children:[!k&&Object(m.jsx)(p.a,{onClick:function(e){I(!1)},children:Object(m.jsx)("p",{children:"Passer en administrateur"})}),Object(m.jsx)(p.a,{onClick:function(e){A(!0),I(!1)},children:Object(m.jsx)("p",{children:"Supprimer"})})]})})]})]}),Object(m.jsx)(j.a,{open:H,setOpen:A,children:Object(m.jsxs)("div",{className:"modal__content__container",children:[Object(m.jsx)("button",{"data-tip":!0,"data-for":"closeTooltip",onClick:function(e){e.stopPropagation(),A(!1)},className:"close__modal__button",children:Object(m.jsx)(v.b,{})}),Object(m.jsxs)("h3",{children:["\xcates-vous s\xfbr de vouloir supprimer ",t.firstname," ?"]}),Object(m.jsx)("p",{children:"Vous pourrez le rajouter \xe0 un autre moment. "}),Object(m.jsxs)("div",{className:"delete__actions__container",children:[Object(m.jsx)(d.a,{reversed:!0,onClick:function(){return A(!1)},children:"Annuler"}),Object(m.jsx)(d.a,{onClick:V,children:"Supprimer"})]})]})})]})}},1892:function(e,t,n){},1894:function(e,t,n){},1895:function(e,t,n){"use strict";var a=n(13),c=n(35),i=n(2),s=n.n(i),r=n(1853),o=n(53),l=n(1939),d=n(1);t.a=function(e){var t=e.setSelectedContributors,n=e.placeholder,i=e.multi,j=e.alreadyExistingContributors,u=e.users,b={option:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{color:"#1e2022",padding:".5rem 3rem .5rem .5rem",cursor:"pointer"})},singleValue:function(e,t){var n=t.isDisabled?.5:1;return Object(c.a)(Object(c.a)({},e),{},{opacity:n,transition:"opacity 300ms"})}},p=Object(r.a)(o.h).data,O=s.a.useState([]),h=Object(a.a)(O,2),_=h[0],v=h[1];return s.a.useEffect((function(){!function(){if(null===p||void 0===p?void 0:p.getAllUsers){var e=function(e,t){var n=[];return e?t?(e.forEach((function(e){var a=!1;t.forEach((function(t){(function(e,t){return e.id===t.id})(e,t)&&(a=!0)})),a||n.push(e)})),n):e:t}((u||(null===p||void 0===p?void 0:p.getAllUsers)).map((function(e){return Object(c.a)(Object(c.a)({},e),{},{label:e.username,value:e.username})})),j);v(e)}}()}),[j,null===p||void 0===p?void 0:p.getAllUsers,v,u]),Object(d.jsx)(l.a,{closeMenuOnSelect:!1,isMulti:!!i,placeholder:n,styles:b,openMenuOnClick:function(e){return e.stopPropagation()},onChange:function(e){t(e)},options:_})}},1898:function(e,t,n){},1910:function(e,t,n){},1936:function(e,t,n){},1937:function(e,t,n){},1999:function(e,t,n){},2e3:function(e,t,n){},2004:function(e,t,n){},2008:function(e,t,n){"use strict";n.r(t);var a=n(35),c=n(100),i=n.n(c),s=n(131),r=n(28),o=n(13),l=(n(1892),n(1910),n(1911)),d=n(2),j=n.n(d),u=n(80),b=n(79),p=n(54),O=(n(1936),n(1883),n(1867)),h=n(1877),_=n(134),v=n(1874),x=n(1891),f=n(2003),m=n(1938),g=n(1879),k=n(133),C=n(49),y=n(81),N=(n(1999),n(1)),P=function(e){var t=e.users;if((null===t||void 0===t?void 0:t.length)>3){var a=t.length-2;return Object(N.jsx)("span",{className:"kanban__section__content__name__container",children:Object(N.jsxs)("span",{className:"kanban__section__content__name__container__avatars__container",children:[Object(N.jsxs)("div",{className:"persons__left__indicator default_avatar",children:["+",a]}),null===t||void 0===t?void 0:t.map((function(e,a){return e.avatarUrl&&a<2?Object(N.jsx)("div",{className:a===t.length-1?"first_avatar":"default_avatar",children:Object(N.jsx)(y.a,{name:e.firstname,mini:!0,src:e.avatarUrl})},a):a<2&&Object(N.jsx)("div",{className:a===t.length-1?"first_avatar":"default_avatar",children:Object(N.jsx)("img",{className:"kanban__section__content__name__container__img",alt:"",src:n(126)})},a)}))]})})}return Object(N.jsx)("span",{className:"kanban__section__content__name__container",children:Object(N.jsx)("span",{className:"kanban__section__content__name__container__avatars__container",children:null===t||void 0===t?void 0:t.map((function(e,n){return e.avatarUrl&&Object(N.jsx)("div",{className:n===t.length-1?"first_avatar":"default_avatar",children:Object(N.jsx)(y.a,{mini:!0,src:e.avatarUrl,name:e.firstname})},n)}))})})},S=n(1895),T=n(1884),w=n(77),I=n(1858),E=n(132),B=n(46),H=function(e){var t=e.event,n=e.open,a=e.setOpen,c=e.dataEvents,r=e.dataProject,l=e.alreadyExistingContributors,d=j.a.useState([]),u=Object(o.a)(d,2),b=u[0],p=u[1],O=Object(I.a)(E.a),h=Object(o.a)(O,1)[0],v=function(){var e=Object(s.a)(i.a.mark((function e(n){var s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopPropagation(),e.prev=1,s=[],s=l?l.concat(b):b,o=s.map((function(e){return e.id})),e.next=7,h({variables:{eventId:t.id,contributors:o}});case 7:c.refetch(),r.refetch(),p([]),B.c.success("Contributeurs ajout\xe9s avec succ\xe8s.",{position:B.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),B.c.error("Impossible d'ajouter les contributeurs.",{position:B.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 16:a(!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)(k.a,{open:n,children:Object(N.jsxs)("div",{className:"modal__content__container",children:[Object(N.jsx)("button",{onClick:function(e){e.stopPropagation(),a(!1)},className:"close__modal__button",children:Object(N.jsx)(_.b,{})}),Object(N.jsx)("h2",{className:"title__global",style:{marginTop:"30px",marginBottom:"20px"},children:"S\xe9lectionnez des contributeurs"}),Object(N.jsx)(S.a,{multi:!0,placeholder:"Cherchez un contributeur...",alreadyExistingContributors:l,setSelectedContributors:p}),Object(N.jsxs)("div",{className:"user__cards__container",style:{marginTop:"30px"},children:[null===l||void 0===l?void 0:l.map((function(e,n){return Object(N.jsx)(T.a,{eventMode:!0,event:t,dataEvents:c,usr:e},n)})),null===b||void 0===b?void 0:b.map((function(e,n){return Object(N.jsx)(T.a,{eventMode:!0,event:t,dataEvents:c,usr:e},n)}))]}),Object(N.jsxs)("div",{className:"add__contributors__actions__container",children:[Object(N.jsx)(w.a,{reversed:!0,onClick:function(){return a(!1)},children:"Annuler"}),Object(N.jsx)(w.a,{onClick:v,children:"Ajouter"})]})]})})},A=n(53),z=n(32),L=n(1853),D=n(10),F=n(1868),M=n(1878),V=n(78),q=(n(1937),n(1880)),U=function(e){var t,n,a,c,r=e.comment,l=e.commentsData,d=j.a.useContext(z.a).user,h=Object(I.a)(E.c),_=Object(o.a)(h,1)[0],v=Object(I.a)(E.l),x=Object(o.a)(v,1)[0],f=j.a.useState(!1),m=Object(o.a)(f,2),g=m[0],k=m[1],C=j.a.useState(!1),P=Object(o.a)(C,2),S=P[0],T=P[1],w=j.a.useState(r.content),H=Object(o.a)(w,2),A=H[0],L=H[1],D=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_({variables:{commentId:r.id,newContent:A}});case 3:l.refetch(),B.c.success("Commentaire modifi\xe9 avec succ\xe8s.",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),B.c.error("Impossible de modifier le commentaire.",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x({variables:{commentId:r.id}});case 3:l.refetch(),B.c.success("Commentaire supprim\xe9 avec succ\xe8s.",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),B.c.error("Impossible de supprimer le commentaire.",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:S?"comment__item__edit__mode":"comment__item",children:[Object(N.jsx)(y.a,{name:null===r||void 0===r||null===(t=r.author)||void 0===t?void 0:t.firstname,mini:!0,src:null===r||void 0===r||null===(n=r.author)||void 0===n?void 0:n.avatarUrl}),Object(N.jsxs)("div",{className:"comment__item__div",children:[Object(N.jsxs)("div",{className:"comment__item__name__content",children:[null===r||void 0===r||null===(a=r.author)||void 0===a?void 0:a.firstname," ",null===r||void 0===r||null===(c=r.author)||void 0===c?void 0:c.lastname,Object(N.jsx)("span",{className:"comment__item__name__date",children:Object(q.a)(null===r||void 0===r?void 0:r.creation,!0)})]}),Object(N.jsx)("span",{className:"span__content",children:S?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(F.a,{value:A,onChange:function(e){return L(e.target.value)},oninput:'this.style.height = "";this.style.height = this.scrollHeight + "px"',className:"edit__comment__textarea"}),Object(N.jsxs)("div",{className:"edit__comment__action__container",children:[Object(N.jsx)("button",{onClick:function(e){e.stopPropagation(),D(),T(!1)},className:"edit__comment__action__submit",children:"Valider"}),Object(N.jsx)("button",{onClick:function(e){e.stopPropagation(),T(!1)},className:"edit__comment__action__cancel",children:"Annuler"})]})]}):Object(N.jsx)(M.a,{children:null===r||void 0===r?void 0:r.content})})]}),d.id===r.author.id&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("button",{className:"more__button__comment",onClick:function(e){e.stopPropagation(),k(!0)},children:Object(N.jsx)(O.b,{})}),Object(N.jsx)(u.a,{open:g,setOpen:k,children:Object(N.jsxs)(b.a,{children:[Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),T(!0),k(!1)},children:Object(N.jsx)("p",{children:"Modifier..."})}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),V(),k(!1)},children:Object(N.jsx)("p",{children:"Supprimer..."})})]})})," "]})]})},R=(n(2e3),function(e){var t=e.commentsData,n=e.dataEvents,a=e.event,c=j.a.useState(!1),r=Object(o.a)(c,2),l=r[0],d=r[1],u=Object(I.a)(E.h),b=Object(o.a)(u,2),p=b[0],O=b[1].loading,_=j.a.useState(""),x=Object(o.a)(_,2),f=x[0],m=x[1],k=j.a.useContext(z.a).user,P=function(e){"bold"===e?m((function(e){return e+" **bold** "})):"italic"===e?m((function(e){return e+" *italic* "})):"italic&bold"===e?m((function(e){return e+" ***italic and bold*** "})):"h1"===e?m((function(e){return""===e?"# title 1":e+"\n # title 1 "})):"h2"===e?m((function(e){return""===e?"## title 2":e+"\n ## title 2 "})):"h3"===e?m((function(e){return""===e?"### title 3":e+"\n ### title 3 "})):"list"===e?m((function(e){return""===e?"- item 1 \n - item 2 \n - item 3":e+"\n - item 1 \n - item 2 \n - item 3"})):"link"===e&&m((function(e){return e+" [text](url) "}))},S=function(){var e=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),""!==f){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,p({variables:{eventId:a.id,authorId:k.id,content:f}});case 6:t.refetch(),m(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),B.c.error("Impossible de cr\xe9er le commentaire.",{position:B.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();return O?Object(N.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[Object(N.jsx)(V.a,{size:"small"})," Envoi..."]}):t.loading||n.loading?Object(N.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[Object(N.jsx)(V.a,{size:"small"})," R\xe9ception..."]}):l?Object(N.jsxs)("div",{className:"edit__block__container__comment",children:[Object(N.jsxs)("div",{className:"edit__block__actions__container",children:[Object(N.jsx)("button",{"data-tip":!0,"data-for":"h1Tooltip",className:"edit__button",onClick:function(){return P("h1")},children:Object(N.jsx)("h1",{children:"h1"})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"h2Tooltip",className:"edit__button",onClick:function(){return P("h2")},children:Object(N.jsx)("h2",{children:"h2"})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"h3Tooltip",className:"edit__button",onClick:function(){return P("h3")},children:Object(N.jsx)("h3",{children:"h3"})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"boldTooltip",className:"edit__button",onClick:function(){return P("bold")},children:Object(N.jsx)(g.b,{})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"italicTooltip",className:"edit__button",onClick:function(){return P("italic")},children:Object(N.jsx)(v.d,{})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"bolditalicTooltip",className:"edit__button",onClick:function(){return P("italic&bold")},children:Object(N.jsx)(h.a,{})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"listTooltip",className:"edit__button",onClick:function(){return P("list")},children:Object(N.jsx)(v.f,{})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"linkTooltip",className:"edit__button",onClick:function(){return P("link")},children:Object(N.jsx)(v.e,{})})]}),Object(N.jsx)(F.a,{autoFocus:!0,className:"modif__textarea",value:f,placeholder:"Votre commentaire...",onChange:function(e){return m(e.target.value)}}),Object(N.jsxs)("div",{style:{display:"flex",gap:"4px",margin:"4px",marginTop:"8px"},children:[Object(N.jsx)(w.a,{onClick:function(e){e.stopPropagation(),d(!1)},reversed:!0,style:{height:"30px"},children:"Annuler"}),Object(N.jsx)(w.a,{onClick:function(e){S(e),d(!1)},style:{height:"30px"},children:"Envoyer le commentaire"})]}),Object(N.jsx)(C.a,{delayShow:500,id:"h1Tooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Grand titre"})}),Object(N.jsx)(C.a,{delayShow:500,id:"h2Tooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Moyen titre"})}),Object(N.jsx)(C.a,{delayShow:500,id:"h3Tooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Petit titre"})}),Object(N.jsx)(C.a,{delayShow:500,id:"boldTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Gras"})}),Object(N.jsx)(C.a,{delayShow:500,id:"italicTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Italique"})}),Object(N.jsx)(C.a,{delayShow:500,id:"bolditalicTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Gras + italique"})}),Object(N.jsx)(C.a,{delayShow:500,id:"listTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Liste"})}),Object(N.jsx)(C.a,{delayShow:500,id:"linkTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Lien"})})]}):Object(N.jsxs)("div",{onClick:function(e){e.stopPropagation(),d(!0)},className:"paragraph__textarea__comment",children:[Object(N.jsx)(y.a,{style:{margin:"12px"},name:"Vous",src:k.avatarUrl,mini:!0}),Object(N.jsxs)("span",{className:"comment__cta__span",children:[k.firstname,", un commentaire ?..."," "]})]})}),G=function(e){var t=e.comments,n=e.event,a=e.commentsData,c=e.dataEvents;return Object(N.jsxs)("div",{className:"comments__container",children:[Object(N.jsxs)("h3",{children:["Commentaires (",null===t||void 0===t?void 0:t.length,")"]}),t.map((function(e,t){return Object(N.jsx)(U,{comment:e,commentsData:a},t)})),a.loading||c.loading?Object(N.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[Object(N.jsx)(V.a,{size:"small"})," R\xe9ception..."]}):Object(N.jsx)(R,{commentsData:a,dataEvents:c,event:n})]})},K=(n(1898),function(e){var t=e.event,n=e.value,a=e.setValue,c=e.handleModifyDescription,i=e.placeholder,s=j.a.useState(!1),r=Object(o.a)(s,2),l=r[0],d=r[1],u=function(e){"bold"===e?a((function(e){return e+" **bold** "})):"italic"===e?a((function(e){return e+" *italic* "})):"italic&bold"===e?a((function(e){return e+" ***italic and bold*** "})):"h1"===e?a((function(e){return""===e?"# title 1":e+"\n # title 1 "})):"h2"===e?a((function(e){return""===e?"## title 2":e+"\n ## title 2 "})):"h3"===e?a((function(e){return""===e?"### title 3":e+"\n ### title 3 "})):"list"===e?a((function(e){return""===e?"- item 1 \n - item 2 \n - item 3":e+"\n - item 1 \n - item 2 \n - item 3"})):"link"===e&&a((function(e){return e+" [text](url) "}))};return l?Object(N.jsxs)("div",{className:"edit__block__container",children:[Object(N.jsxs)("div",{className:"edit__block__actions__container",children:[Object(N.jsx)("button",{"data-tip":!0,"data-for":"h1Tooltip",className:"edit__button",onClick:function(){return u("h1")},children:Object(N.jsx)("h1",{children:"h1"})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"h2Tooltip",className:"edit__button",onClick:function(){return u("h2")},children:Object(N.jsx)("h2",{children:"h2"})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"h3Tooltip",className:"edit__button",onClick:function(){return u("h3")},children:Object(N.jsx)("h3",{children:"h3"})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"boldTooltip",className:"edit__button",onClick:function(){return u("bold")},children:Object(N.jsx)(g.b,{})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"italicTooltip",className:"edit__button",onClick:function(){return u("italic")},children:Object(N.jsx)(v.d,{})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"bolditalicTooltip",className:"edit__button",onClick:function(){return u("italic&bold")},children:Object(N.jsx)(h.a,{})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"listTooltip",className:"edit__button",onClick:function(){return u("list")},children:Object(N.jsx)(v.f,{})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"linkTooltip",className:"edit__button",onClick:function(){return u("link")},children:Object(N.jsx)(v.e,{})})]}),Object(N.jsx)(F.a,{autoFocus:!0,style:{fontSize:"1rem"},className:"modif__textarea",value:n,placeholder:i,onChange:function(e){return a(e.target.value)}}),Object(N.jsxs)("div",{style:{display:"flex",gap:"4px",margin:"4px",marginTop:"8px"},children:[Object(N.jsx)(w.a,{onClick:function(e){e.stopPropagation(),d(!1)},reversed:!0,style:{height:"30px"},children:"Annuler"}),Object(N.jsx)(w.a,{onClick:function(e){c(e),d(!1)},style:{height:"30px"},children:"Valider"})]}),Object(N.jsx)(C.a,{delayShow:500,id:"h1Tooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Grand titre"})}),Object(N.jsx)(C.a,{delayShow:500,id:"h2Tooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Moyen titre"})}),Object(N.jsx)(C.a,{delayShow:500,id:"h3Tooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Petit titre"})}),Object(N.jsx)(C.a,{delayShow:500,id:"boldTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Gras"})}),Object(N.jsx)(C.a,{delayShow:500,id:"italicTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Italique"})}),Object(N.jsx)(C.a,{delayShow:500,id:"bolditalicTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Gras + italique"})}),Object(N.jsx)(C.a,{delayShow:500,id:"listTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Liste"})}),Object(N.jsx)(C.a,{delayShow:500,id:"linkTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Lien"})})]}):Object(N.jsx)("div",{onClick:function(e){e.stopPropagation(),d(!0)},className:"modif__textarea__paragraph",children:Object(N.jsx)(M.a,{children:t.description})})}),J=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.side,c=void 0===a?"end":a,i=n.ellipsis,s=void 0===i?"...":i;if((null===e||void 0===e?void 0:e.length)>t)switch(c){case"start":return s+e.slice(-(t-s.length));case"end":default:return e.slice(0,t-s.length)+s}return e},W=n(84),Y=function(e){var t,n,c,j,S,T,U=Object(d.useContext)(z.a),R=U.setEvents,Y=U.events,Q=U.currentProject,X=U.setCurrentProject,Z=U.user,$=Object(d.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(d.useState)(!1),ce=Object(o.a)(ae,2),ie=ce[0],se=ce[1],re=Object(d.useState)(!1),oe=Object(o.a)(re,2),le=oe[0],de=oe[1],je=Object(d.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],pe=ue[1],Oe=Object(d.useState)(!1),he=Object(o.a)(Oe,2),_e=he[0],ve=he[1],xe=Object(d.useState)([]),fe=Object(o.a)(xe,2),me=fe[0],ge=fe[1],ke=Object(d.useState)(!1),Ce=Object(o.a)(ke,2),ye=Ce[0],Ne=Ce[1],Pe=Object(d.useState)(!1),Se=Object(o.a)(Pe,2),Te=Se[0],we=Se[1],Ie=Object(I.a)(E.d),Ee=Object(o.a)(Ie,1)[0],Be=Object(I.a)(E.f),He=Object(o.a)(Be,1)[0],Ae=Object(I.a)(E.e),ze=Object(o.a)(Ae,1)[0],Le=Object(I.a)(E.m),De=Object(o.a)(Le,1)[0],Fe=Object(I.a)(E.i),Me=Object(o.a)(Fe,1)[0],Ve=Object(d.useState)(e.task.description),qe=Object(o.a)(Ve,2),Ue=qe[0],Re=qe[1],Ge=Object(D.h)().id,Ke=Object(L.a)(A.f,{variables:{eventId:e.task.id},onCompleted:function(e){ge(null===e||void 0===e?void 0:e.getAllCommentsByEventId)}}),Je=function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),t.prev=1,t.next=4,Ee({variables:{eventId:e.task.id,newDescription:Ue}});case 4:e.dataEvents.refetch(),pe(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),B.c.error("Impossible de modifier la description.",{position:B.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),We=function(){pe(!1),ne(!1)},Ye=function(){var t=Object(s.a)(i.a.mark((function t(n){var c,s,l,d,j,u,b,p,O,h,_;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=Y.findIndex((function(t){return t.title===e.task.status})),s=Y.findIndex((function(e){return e.id===n.id})),l=Y[c],d=Y[s],j=Object(r.a)(l.tasks),u=Object(r.a)(d.tasks),b=j.findIndex((function(t){return t.id===e.task.id})),p=j.splice(b,1),O=Object(o.a)(p,1),h=O[0],(_=Object(a.a)({},h)).status=null===d||void 0===d?void 0:d.title,Y[c].tasks=j,Y[s].tasks=u,u.splice(0,0,_),Y[c].tasks=j,Y[s].tasks=u,t.next=18,He({variables:{eventId:e.task.id,newStatus:null===n||void 0===n?void 0:n.title}});case 18:e.dataEvents.refetch(),Object(B.c)(Object(N.jsxs)(tt,{children:[e.task.name," d\xe9plac\xe9e dans ",null===n||void 0===n?void 0:n.title]}),{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0}),ve(!1),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),B.c.error("Impossible de d\xe9placer l'\xe9v\xe8nement.",{position:B.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 26:R(Object(r.a)(Y)),Q.events=Object(r.a)(Y),X(Q);case 29:case"end":return t.stop()}}),t,null,[[0,23]])})));return function(e){return t.apply(this,arguments)}}(),Qe=function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.task.state!==n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,ze({variables:{eventId:e.task.id,newState:n}});case 5:e.dataEvents.refetch(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),B.c.error("Impossible de changer l'\xe9tat de cette cart.",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0});case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),Xe=function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),t.prev=1,t.next=4,De({variables:{eventId:e.task.id}});case 4:pe(!1),e.dataEvents.refetch(),Object(B.c)("".concat(e.type," archiv\xe9(e) avec succ\xe8s."),{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),B.c.error("Impossible de supprimer cette carte. R\xe9essayez plus tard.",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),Ze=function(){var t=Object(s.a)(i.a.mark((function t(n){var c,s,r,o,l,d,j,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),t.prev=1,d=null===e||void 0===e||null===(c=e.task)||void 0===c||null===(s=c.contributors)||void 0===s?void 0:s.map((function(e){return e.id})),t.next=5,Me({variables:{type:e.type,projectId:Ge,description:e.task.description,contributors:d,creatorId:Z.id,period:Object(W.a)(),status:e.task.status}});case 5:j=t.sent,u=Y.findIndex((function(t){return t.title===e.task.status})),Y[u].tasks.splice(Y[u]+1,0,Object(a.a)(Object(a.a)({},null===j||void 0===j||null===(r=j.data)||void 0===r?void 0:r.createEvent),{},{new:!0})),e.dataEvents.refetch(),e.setLength&&e.setLength(e.length+1),Object(B.c)("".concat((null===j||void 0===j||null===(o=j.data)||void 0===o?void 0:o.createEvent)?null===j||void 0===j||null===(l=j.data)||void 0===l?void 0:l.createEvent.type:"\xc9venement"," dupliqu\xe9(e) avec succ\xe8s."),{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0),B.c.error("Impossible de cr\xe9er l'\xe9v\xe8nement.",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0});case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),$e=function(e){e.stopPropagation(),ve(!0)},et=function(e){if(Te&&"Enter"===e.key&&!1===e.shiftKey)return Je(e)};if(e.add)return Object(N.jsx)("div",{className:"card",children:e.children});var tt=function(e){var t=e.children;return Object(N.jsx)("div",{children:t})};return Object(N.jsxs)("div",{className:"card",onClick:function(){_e?ve(!1):ne(!0)},children:[Object(N.jsx)(l.b,{draggableId:null===e||void 0===e||null===(n=e.task)||void 0===n?void 0:n.id,index:null===e||void 0===e?void 0:e.index,children:function(t,n){return Object(N.jsx)("div",Object(a.a)(Object(a.a)(Object(a.a)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{style:Object(a.a)({},t.draggableProps.style),children:Object(N.jsxs)("div",{className:n.isDragging?"card__content dragging":"card__content",children:[Object(N.jsx)("div",{className:"V\xe9rifi\xe9"===e.task.state?"status__indicator__verified":"status__indicator__to-verify"}),Object(N.jsxs)("div",{className:"card__content__events__container",children:[Object(N.jsx)("button",{"data-tip":!0,"data-for":"archiveTooltip",onClick:function(e){e.stopPropagation(),se(!0)},className:"kanban__section__content__name__container__edit__button",children:Object(N.jsx)(_.c,{})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"duplicateTooltip",onClick:Ze,className:"kanban__section__content__name__container__edit__button more__button",children:Object(N.jsx)(f.a,{})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"moreTooltip",onClick:$e,className:"kanban__section__content__name__container__edit__button more__button",children:Object(N.jsx)(O.c,{})}),Object(N.jsxs)("span",{className:"kanban__section__content__name__container__comments__indicator",children:[Object(N.jsx)("span",{className:"kanban__section__content__name__container__comments__indicator__number",children:null===me||void 0===me?void 0:me.length}),Object(N.jsx)(x.c,{})]})]}),Object(N.jsx)("div",{className:"card__content__added__indicator",children:be?Object(N.jsxs)("div",{className:"kanban__section__content__name__container__button__container",children:[Object(N.jsx)("button",{"data-tip":!0,"data-for":"moreTooltip",onClick:function(e){e.stopPropagation(),Ne(!0)},className:"kanban__section__content__name__container__edit__button more__button",children:Object(N.jsx)(O.b,{})}),Object(N.jsx)(u.a,{open:ye,setOpen:Ne,bottom:!0,children:Object(N.jsx)(b.a,{children:Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),we(!Te),Ne(!1)},children:Object(N.jsx)("p",{children:Te?"D\xe9sactiver la soumission rapide...":"Activer la soumission rapide..."})})})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"validateTooltip",onClick:Je,className:"kanban__section__content__name__container__edit__button validate",children:Object(N.jsx)(v.b,{})}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"cancelTooltip",onClick:function(e){e.stopPropagation(),pe(!1)},className:"kanban__section__content__name__container__edit__button",children:Object(N.jsx)(_.b,{})})]}):Object(N.jsx)("button",{"data-tip":!0,"data-for":"editTooltip",onClick:function(e){e.stopPropagation(),pe(!0)},className:"kanban__section__content__name__container__edit__button",children:Object(N.jsx)(O.a,{})})}),Object(N.jsx)("span",{"data-tip":!0,"data-for":"periodTooltip",className:"card__icon ".concat(e.task.period===Object(W.a)()?"current__period":"previous__period"),children:e.task.period}),"V\xe9rifi\xe9"===e.task.state&&!be&&Object(N.jsxs)("span",{"data-tip":!0,"data-for":"periodTooltip",className:"card__status__verified",children:[e.task.state,Object(N.jsx)(v.b,{color:"var(--check-color)"})]}),"\xc0 v\xe9rifier"===e.task.state&&!be&&Object(N.jsxs)("span",{"data-tip":!0,"data-for":"periodTooltip",className:"card__status__to__verify",children:[e.task.state," ",Object(N.jsx)(h.c,{color:"var(--warning-color)"})]}),be?Object(N.jsx)("form",{className:"modif__description__form",onSubmit:Je,children:Object(N.jsx)(F.a,{autoFocus:!0,onKeyPress:et,onChange:function(e){return Re(e.target.value)},onClick:function(e){return e.stopPropagation()},value:Ue,className:"modif__description__textarea"})}):Object(N.jsx)("div",{className:"card__description",children:Object(N.jsx)(M.a,{children:J(e.task.description,Z.maxCaractersCard)})}),Object(N.jsx)(P,{users:e.task.contributors}),"R\xe9alis\xe9"===e.task.status&&Object(N.jsx)("span",{className:"card__done__span",children:Object(N.jsx)(v.c,{})})]})}))}},null===e||void 0===e||null===(t=e.task)||void 0===t?void 0:t.id),Object(N.jsx)(k.a,{open:te,setOpen:We,children:Object(N.jsxs)("div",{className:"modal__content__container",children:[Object(N.jsxs)("div",{className:"period__title__modal__container",children:[Object(N.jsxs)("span",{"data-tip":!0,"data-for":"periodTooltip",className:"period__title__modal ".concat(e.task.period===Object(W.a)()?"current__period":"previous__period"),children:[e.task.period," "]}),e.task.period!==Object(W.a)()?Object(N.jsxs)("span",{className:"period__title__modal__warning__message",children:[Object(N.jsx)(m.a,{color:"var(--warning-color)"})," Cet \xe9v\xe8nement ne date pas de cette semaine."]}):Object(N.jsxs)("span",{className:"period__title__modal__warning__message",children:[Object(N.jsx)(v.c,{color:"var(--check-color)",fontSize:"1.2rem"})," ","Cet \xe9v\xe8nement a \xe9t\xe9 cr\xe9\xe9 cette semaine."]})]}),Object(N.jsx)("div",{style:{marginTop:"38px",display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},children:Object(N.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[Object(N.jsx)("h2",{className:"status__title__modal",children:e.task.status}),"V\xe9rifi\xe9"===e.task.state&&!be&&Object(N.jsxs)("span",{"data-tip":!0,"data-for":"periodTooltip",className:"modal__card__status__verified",children:[e.task.state,Object(N.jsx)(v.b,{color:"var(--check-color)"})]}),"\xc0 v\xe9rifier"===e.task.state&&!be&&Object(N.jsxs)("span",{"data-tip":!0,"data-for":"periodTooltip",className:"modal__card__status__to__verify",children:[e.task.state," ",Object(N.jsx)(h.c,{color:"var(--warning-color)"})]})]})}),Object(N.jsxs)("span",{className:"date__creator__span",children:[Object(N.jsxs)("span",{children:["Le ",Object(q.a)(e.task.creation)]}),e.task.creator&&Object(N.jsxs)("span",{children:[" ","par ",e.task.creator.firstname," ",e.task.creator.lastname]})]}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"closeTooltip",onClick:function(e){e.stopPropagation(),We(),pe(!1)},className:"close__modal__button",children:Object(N.jsx)(_.b,{})}),Object(N.jsx)(K,{event:e.task,value:Ue,setValue:Re,handleModifyDescription:Je,placeholder:"La carte doit avoir une description..."}),0!==(null===e||void 0===e||null===(c=e.task)||void 0===c||null===(j=c.contributors)||void 0===j?void 0:j.length)&&Object(N.jsxs)("div",{style:{marginTop:"20px"},children:[Object(N.jsx)("h3",{style:{marginBottom:"6px"},children:"Contributeurs"}),Object(N.jsx)("div",{className:"kanban__section__content__name__container__avatars__container",children:null===e||void 0===e||null===(S=e.task)||void 0===S||null===(T=S.contributors)||void 0===T?void 0:T.map((function(e,t){return Object(N.jsx)(y.a,{name:e.username,src:e.avatarUrl},t)}))})]}),me?Object(N.jsx)(G,{commentsData:Ke,comments:me,dataEvents:e.dataEvents,event:e.task}):Object(N.jsx)(V.a,{}),Object(N.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginRight:"4px"},children:[Object(N.jsxs)(w.a,{style:{height:"35px",display:"flex",gap:"4px"},reversed:!0,onClick:function(e){e.stopPropagation(),ne(!1),de(!0)},children:["G\xe9rer les contributeurs ",Object(N.jsx)(g.a,{fontSize:"1.2rem"})]}),Object(N.jsxs)(w.a,{style:{height:"35px",display:"flex",gap:"4px"},reversed:!0,onClick:function(e){e.stopPropagation(),ne(!1),se(!0)},children:["Supprimer ",Object(N.jsx)(_.c,{fontSize:"1.2rem"})]})]}),Object(N.jsxs)("h3",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[Object(N.jsx)(v.a,{})," Informations"]}),Object(N.jsx)("p",{style:{fontStyle:"italic"},children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed convallis nibh non lorem vulputate egestas. Sed leo odio, dignissim ac sollicitudin eget, vehicula nec dui. Praesent in lorem ut augue lobortis suscipit."})]})}),Object(N.jsx)(u.a,{open:_e,setOpen:ve,bottom:!0,children:Object(N.jsxs)(b.a,{children:[Object(N.jsx)(p.a,{style:{backgroundColor:"green"},onClick:function(e){e.stopPropagation(),Qe("V\xe9rifi\xe9"),ve(!1)},children:Object(N.jsx)("p",{children:"V\xe9rifi\xe9"})}),Object(N.jsx)(p.a,{style:{backgroundColor:"red"},onClick:function(e){e.stopPropagation(),Qe("\xc0 v\xe9rifier"),ve(!1)},children:Object(N.jsx)("p",{children:"\xc0 v\xe9rifier"})}),Object(N.jsx)("span",{className:"divider"}),Object(N.jsx)(p.a,{onClick:function(e){ne(!0),ve(!1)},children:Object(N.jsx)("p",{children:"Ouvrir la carte..."})}),Object(N.jsx)(p.a,{onClick:function(e){Ze(e),ve(!1)},children:Object(N.jsx)("p",{children:"Dupliquer..."})}),Object(N.jsx)("span",{className:"divider"}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),pe(!0),ve(!1)},children:Object(N.jsx)("p",{children:"\xc9dition rapide..."})}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),ve(!1),ne(!0),pe(!0)},children:Object(N.jsx)("p",{children:"\xc9dition avanc\xe9e..."})}),Object(N.jsx)("span",{className:"divider"}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),de(!0),ve(!1)},children:Object(N.jsx)("p",{children:"G\xe9rer les contributeurs..."})}),Object(N.jsx)("span",{className:"divider"}),Y.map((function(t){return t.title!==e.task.status?Object(N.jsx)(p.a,{onClick:function(){return Ye(t)},children:Object(N.jsxs)("p",{children:["D\xe9placer vers"," ",Object(N.jsx)("span",{className:"underlined",children:t.title}),"..."]})},t.title):null})),Object(N.jsx)("span",{className:"divider"}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),se(!0),ve(!1)},children:Object(N.jsx)("p",{children:"Archiver..."})})]})}),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(C.a,{delayShow:500,id:"duplicateTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Dupliquer"})}),Object(N.jsx)(C.a,{delayShow:500,id:"archiveTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Archiver"})}),Object(N.jsx)(C.a,{delayShow:500,id:"moreTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Plus d'actions"})}),Object(N.jsx)(C.a,{delayShow:500,id:"editTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"\xc9diter"})}),Object(N.jsx)(C.a,{delayShow:500,id:"validateTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Valider"})}),Object(N.jsx)(C.a,{delayShow:500,id:"cancelTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Annuler"})}),Object(N.jsx)(C.a,{delayShow:500,id:"periodTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"P\xe9riode"})})]}),Object(N.jsx)(H,{event:e.task,dataEvents:e.dataEvents,dataProject:e.dataProject,alreadyExistingContributors:e.task.contributors,open:le,setOpen:de}),Object(N.jsx)(k.a,{open:ie,setOpen:se,children:Object(N.jsxs)("div",{className:"modal__content__container space__between",children:[Object(N.jsx)("button",{"data-tip":!0,"data-for":"closeTooltip",onClick:function(e){e.stopPropagation(),se(!1)},className:"close__modal__button",children:Object(N.jsx)(_.b,{})}),Object(N.jsxs)("div",{children:[Object(N.jsx)("h3",{children:"\xcates-vous s\xfbr de vouloir supprimer cet \xe9v\xe8nement ?"}),Object(N.jsx)("p",{children:"La suppression sera d\xe9finitive. "})]}),Object(N.jsxs)("div",{className:"delete__actions__container",children:[Object(N.jsx)(w.a,{reversed:!0,onClick:function(){se(!1),ne(!1)},children:"Annuler"}),Object(N.jsx)(w.a,{onClick:Xe,children:"Supprimer"})]})]})})]})},Q=n(141),X=function(e){var t=e.droppableId,n=e.children,a=e.setAddCard,c=e.section,i=e.setEventSelected,s=Object(d.useState)(!1),r=Object(o.a)(s,2),j=r[0],h=r[1];return Object(N.jsxs)("div",{className:"kanban__section",children:[Object(N.jsx)("button",{onClick:function(){h(!0)},className:"kanban__section__title__more__button",children:Object(N.jsx)(O.b,{})}),Object(N.jsx)(l.c,{droppableId:t,children:n}),Object(N.jsx)(u.a,{open:j,setOpen:h,children:Object(N.jsxs)(b.a,{children:[Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),h(!1),i(c),a(!0)},children:Object(N.jsx)("p",{children:"Ajouter une carte..."})}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),h(!1)},children:Object(N.jsx)("p",{children:"Copier la liste..."})}),Object(N.jsx)("span",{className:"divider"}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),h(!1)},children:Object(N.jsx)("p",{children:"Trier par date de cr\xe9ation..."})}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),h(!1)},children:Object(N.jsx)("p",{children:"Trier par ordre alphab\xe9tique..."})}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),h(!1)},children:Object(N.jsx)("p",{children:"Afficher uniquement les actions v\xe9rifi\xe9es..."})}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),h(!1)},children:Object(N.jsx)("p",{children:"Afficher uniquement les actions \xe0 v\xe9rifier..."})}),Object(N.jsx)("span",{className:"divider"}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),h(!1)},children:Object(N.jsx)("p",{children:"D\xe9placer toutes les cartes..."})}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),h(!1)},children:Object(N.jsx)("p",{children:"Archiver toutes les cartes..."})})]})})]})},Z=n(83),$=(n(2004),n(135)),ee=function(e){var t,n,c,l,j,x,f,P,S,T,F,M=Object(d.useContext)(z.a),U=M.setEvents,R=M.events,Y=M.currentProject,Q=M.setCurrentProject,X=M.user,Z=M.selectedEvents,ee=M.setSelectedEvents,te=Object(d.useState)(!1),ne=Object(o.a)(te,2),ae=ne[0],ce=ne[1],ie=Object(d.useState)(!1),se=Object(o.a)(ie,2),re=se[0],oe=se[1],le=Object(d.useState)(!1),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(d.useState)(!1),pe=Object(o.a)(be,2),Oe=pe[0],he=pe[1],_e=Object(d.useState)(!1),ve=Object(o.a)(_e,2),xe=ve[0],fe=ve[1],me=Object(d.useState)([]),ge=Object(o.a)(me,2),ke=ge[0],Ce=ge[1],ye=Object(d.useState)(!1),Ne=Object(o.a)(ye,2),Pe=Ne[0],Se=Ne[1],Te=Object(I.a)(E.d),we=Object(o.a)(Te,1)[0],Ie=Object(I.a)(E.f),Ee=Object(o.a)(Ie,1)[0],Be=Object(I.a)(E.e),He=Object(o.a)(Be,1)[0],Ae=Object(I.a)(E.m),ze=Object(o.a)(Ae,1)[0],Le=Object(I.a)(E.i),De=Object(o.a)(Le,1)[0],Fe=Object(d.useState)(e.task.description),Me=Object(o.a)(Fe,2),Ve=Me[0],qe=Me[1];Object(d.useEffect)((function(){Z.find((function(t){return t.id===e.task.id}))?Se(!0):Se(!1)}),[Z,e.task.id,Se]);var Ue=Object(D.h)().id,Re=Object(L.a)(A.f,{variables:{eventId:e.task.id}});Object(d.useEffect)((function(){var e;(null===Re||void 0===Re?void 0:Re.data)&&Ce(null===Re||void 0===Re||null===(e=Re.data)||void 0===e?void 0:e.getAllCommentsByEventId)}),[Ce,null===Re||void 0===Re?void 0:Re.data]);var Ge=function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),t.prev=1,t.next=4,we({variables:{eventId:e.task.id,newDescription:Ve}});case 4:e.dataEvents.refetch(),he(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),B.c.error("Impossible de modifier la description.",{position:B.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),Ke=function(){he(!1),ce(!1)},Je=function(){var t=Object(s.a)(i.a.mark((function t(n){var c,s,l,d,j,u,b,p,O,h,_;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=R.findIndex((function(t){return t.title===e.task.status})),s=R.findIndex((function(e){return e.id===n.id})),l=R[c],d=R[s],j=Object(r.a)(l.tasks),u=Object(r.a)(d.tasks),b=j.findIndex((function(t){return t.id===e.task.id})),p=j.splice(b,1),O=Object(o.a)(p,1),h=O[0],(_=Object(a.a)({},h)).status=null===d||void 0===d?void 0:d.title,R[c].tasks=j,R[s].tasks=u,u.splice(0,0,_),R[c].tasks=j,R[s].tasks=u,t.next=18,Ee({variables:{eventId:e.task.id,newStatus:null===n||void 0===n?void 0:n.title}});case 18:e.dataEvents.refetch(),Object(B.c)(Object(N.jsxs)(Xe,{children:[e.task.name," d\xe9plac\xe9e dans ",null===n||void 0===n?void 0:n.title]}),{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0}),fe(!1),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),B.c.error("Impossible de d\xe9placer l'\xe9v\xe8nement.",{position:B.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 26:U(Object(r.a)(R)),Y.events=Object(r.a)(R),Q(Y);case 29:case"end":return t.stop()}}),t,null,[[0,23]])})));return function(e){return t.apply(this,arguments)}}(),We=function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.task.state!==n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,He({variables:{eventId:e.task.id,newState:n}});case 5:e.dataEvents.refetch(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),B.c.error("Impossible de changer l'\xe9tat de cette cart.",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0});case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),Ye=function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),t.prev=1,t.next=4,ze({variables:{eventId:e.task.id}});case 4:he(!1),e.dataEvents.refetch(),Object(B.c)("".concat(e.type," archiv\xe9(e) avec succ\xe8s."),{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),B.c.error("Impossible de supprimer cette carte. R\xe9essayez plus tard.",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),Qe=function(){var t=Object(s.a)(i.a.mark((function t(n){var c,s,r,o,l,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),t.prev=1,o=e.task.contributors.map((function(e){return e.id})),t.next=5,De({variables:{type:e.type,projectId:Ue,description:e.task.description,contributors:o,creatorId:X.id,period:Object(W.a)(),status:e.task.status}});case 5:l=t.sent,d=R.findIndex((function(t){return t.title===e.task.status})),R[d].tasks.splice(R[d]+1,0,Object(a.a)(Object(a.a)({},null===l||void 0===l||null===(c=l.data)||void 0===c?void 0:c.createEvent),{},{new:!0})),e.dataEvents.refetch(),e.setLength&&e.setLength(e.length+1),Object(B.c)("".concat((null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.createEvent)?null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.createEvent.type:"\xc9venement"," dupliqu\xe9(e) avec succ\xe8s."),{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),B.c.error("Impossible de cr\xe9er l'\xe9v\xe8nement.",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0});case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}();if(e.add)return Object(N.jsx)("div",{className:"card",children:e.children});var Xe=function(e){var t=e.children;return Object(N.jsx)("div",{children:t})};return Object(N.jsxs)("tr",{className:"event__row",onClick:function(){xe?fe(!1):ce(!0)},children:[Object(N.jsx)("td",{children:Object(N.jsx)($.a,{onClick:function(){if(Pe){var t=Z.filter((function(t){return t.id!==e.task.id}));ee(t)}else ee((function(t){return[].concat(Object(r.a)(t),[{id:e.task.id}])}))},style:{margin:"0px"},setChecked:Se,checked:Pe})}),Object(N.jsx)("td",{style:{fontSize:"0.9rem"},className:(null===e||void 0===e||null===(t=e.task)||void 0===t?void 0:t.period)===Object(W.a)()?"current__period__row":"previous__period__row",children:null===e||void 0===e||null===(n=e.task)||void 0===n?void 0:n.period}),0===(null===e||void 0===e||null===(c=e.task)||void 0===c||null===(l=c.contributors)||void 0===l?void 0:l.length)?Object(N.jsx)("td",{style:{fontStyle:"italic",fontSize:"0.8rem"},children:"Aucun contributeur."}):Object(N.jsxs)("td",{style:{fontSize:"0.9rem"},children:[Object(N.jsx)("strong",{children:null===e||void 0===e||null===(j=e.task)||void 0===j||null===(x=j.contributors)||void 0===x?void 0:x.length})," contributeur(s)"]}),Object(N.jsx)("td",{style:{fontSize:"0.9rem"},children:J(e.task.description,X.maxCaractersCard)}),Object(N.jsx)("td",{style:{fontSize:"0.9rem"},children:null===e||void 0===e||null===(f=e.task)||void 0===f?void 0:f.status}),Object(N.jsxs)("td",{children:["V\xe9rifi\xe9"===e.task.state&&Object(N.jsxs)("span",{"data-tip":!0,style:{fontSize:"0.9rem"},"data-for":"periodTooltip",className:"modal__card__status__verified",children:[e.task.state,Object(N.jsx)(v.b,{color:"var(--check-color)"})]}),"\xc0 v\xe9rifier"===e.task.state&&Object(N.jsxs)("span",{style:{fontSize:"0.9rem"},"data-tip":!0,"data-for":"periodTooltip",className:"modal__card__status__to__verify",children:[e.task.state," ",Object(N.jsx)(h.c,{color:"var(--warning-color)"})]})]}),Object(N.jsx)("td",{children:Object(N.jsx)("button",{"data-tip":!0,"data-for":"moreTooltip",onClick:function(e){e.stopPropagation(),fe(!0)},className:"kanban__section__content__name__container__edit__button more__button",children:Object(N.jsx)(O.b,{})})}),Object(N.jsx)(k.a,{open:ae,setOpen:Ke,children:Object(N.jsxs)("div",{className:"modal__content__container",children:[Object(N.jsxs)("div",{className:"period__title__modal__container",children:[Object(N.jsxs)("span",{"data-tip":!0,"data-for":"periodTooltip",className:"period__title__modal ".concat(e.task.period===Object(W.a)()?"current__period":"previous__period"),children:[e.task.period," "]}),e.task.period!==Object(W.a)()?Object(N.jsxs)("span",{className:"period__title__modal__warning__message",children:[Object(N.jsx)(m.a,{color:"var(--warning-color)"})," Cet \xe9v\xe8nement ne date pas de cette semaine."]}):Object(N.jsxs)("span",{className:"period__title__modal__warning__message",children:[Object(N.jsx)(v.c,{color:"var(--check-color)",fontSize:"1.2rem"})," ","Cet \xe9v\xe8nement a \xe9t\xe9 cr\xe9\xe9 cette semaine."]})]}),Object(N.jsxs)("div",{style:{marginTop:"38px",display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},children:[Object(N.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[Object(N.jsx)("h2",{className:"status__title__modal",children:e.task.status}),"V\xe9rifi\xe9"===e.task.state&&!Oe&&Object(N.jsxs)("span",{"data-tip":!0,"data-for":"periodTooltip",className:"modal__card__status__verified",children:[e.task.state,Object(N.jsx)(v.b,{color:"var(--check-color)"})]}),"\xc0 v\xe9rifier"===e.task.state&&!Oe&&Object(N.jsxs)("span",{"data-tip":!0,"data-for":"periodTooltip",className:"modal__card__status__to__verify",children:[e.task.state," ",Object(N.jsx)(h.c,{color:"var(--warning-color)"})]})]}),Object(N.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginRight:"4px"},children:[Object(N.jsxs)(w.a,{style:{height:"35px",display:"flex",gap:"4px"},reversed:!0,onClick:function(e){e.stopPropagation(),ue(!0)},children:["G\xe9rer les contributeurs ",Object(N.jsx)(g.a,{fontSize:"1.2rem"})]}),Object(N.jsxs)(w.a,{style:{height:"35px",display:"flex",gap:"4px"},reversed:!0,onClick:function(e){e.stopPropagation(),ce(!1),oe(!0)},children:["Supprimer ",Object(N.jsx)(_.c,{fontSize:"1.2rem"})]})]})]}),Object(N.jsxs)("span",{className:"date__creator__span",children:[Object(N.jsxs)("span",{children:["Le ",Object(q.a)(e.task.creation)]}),e.task.creator&&Object(N.jsxs)("span",{children:[" ","par ",e.task.creator.firstname," ",e.task.creator.lastname]})]}),Object(N.jsx)("button",{"data-tip":!0,"data-for":"closeTooltip",onClick:function(e){e.stopPropagation(),Ke(),he(!1)},className:"close__modal__button",children:Object(N.jsx)(_.b,{})}),Object(N.jsx)(K,{event:e.task,value:Ve,setValue:qe,handleModifyDescription:Ge,placeholder:"La carte doit avoir une description..."}),0!==(null===e||void 0===e||null===(P=e.task)||void 0===P||null===(S=P.contributors)||void 0===S?void 0:S.length)&&Object(N.jsxs)("div",{style:{marginTop:"20px"},children:[Object(N.jsx)("h3",{style:{marginBottom:"6px"},children:"Contributeurs"}),Object(N.jsx)("div",{className:"kanban__section__content__name__container__avatars__container",children:null===e||void 0===e||null===(T=e.task)||void 0===T||null===(F=T.contributors)||void 0===F?void 0:F.map((function(e,t){return Object(N.jsx)(y.a,{name:e.username,src:e.avatarUrl},t)}))})]}),ke?Object(N.jsx)(G,{commentsData:Re,comments:ke,dataEvents:e.dataEvents,event:e.task}):Object(N.jsx)(V.a,{}),Object(N.jsxs)("h3",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[Object(N.jsx)(v.a,{})," Informations"]}),Object(N.jsx)("p",{style:{fontStyle:"italic"},children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed convallis nibh non lorem vulputate egestas. Sed leo odio, dignissim ac sollicitudin eget, vehicula nec dui. Praesent in lorem ut augue lobortis suscipit."})]})}),Object(N.jsx)(u.a,{open:xe,setOpen:fe,style:{transform:"translate(-10px,0px)"},children:Object(N.jsxs)(b.a,{children:[Object(N.jsx)(p.a,{style:{backgroundColor:"green"},onClick:function(e){e.stopPropagation(),We("V\xe9rifi\xe9"),fe(!1)},children:Object(N.jsx)("p",{children:"V\xe9rifi\xe9"})}),Object(N.jsx)(p.a,{style:{backgroundColor:"red"},onClick:function(e){e.stopPropagation(),We("\xc0 v\xe9rifier"),fe(!1)},children:Object(N.jsx)("p",{children:"\xc0 v\xe9rifier"})}),Object(N.jsx)("span",{className:"divider"}),Object(N.jsx)(p.a,{onClick:function(e){ce(!0),fe(!1)},children:Object(N.jsx)("p",{children:"Ouvrir la carte..."})}),Object(N.jsx)(p.a,{onClick:function(e){Qe(e),fe(!1)},children:Object(N.jsx)("p",{children:"Dupliquer..."})}),Object(N.jsx)("span",{className:"divider"}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),he(!0),fe(!1)},children:Object(N.jsx)("p",{children:"\xc9dition rapide..."})}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),fe(!1),ce(!0),he(!0)},children:Object(N.jsx)("p",{children:"\xc9dition avanc\xe9e..."})}),Object(N.jsx)("span",{className:"divider"}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),ue(!0),fe(!1)},children:Object(N.jsx)("p",{children:"G\xe9rer les contributeurs..."})}),Object(N.jsx)("span",{className:"divider"}),R.map((function(t){return t.title!==e.task.status?Object(N.jsx)(p.a,{onClick:function(){return Je(t)},children:Object(N.jsxs)("p",{children:["D\xe9placer vers"," ",Object(N.jsx)("span",{className:"underlined",children:t.title}),"..."]})},t.title):null})),Object(N.jsx)("span",{className:"divider"}),Object(N.jsx)(p.a,{onClick:function(e){e.stopPropagation(),oe(!0),fe(!1)},children:Object(N.jsx)("p",{children:"Archiver..."})})]})}),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(C.a,{delayShow:500,id:"duplicateTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Dupliquer"})}),Object(N.jsx)(C.a,{delayShow:500,id:"archiveTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Archiver"})}),Object(N.jsx)(C.a,{delayShow:500,id:"moreTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Plus d'actions"})}),Object(N.jsx)(C.a,{delayShow:500,id:"editTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"\xc9diter"})}),Object(N.jsx)(C.a,{delayShow:500,id:"validateTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Valider"})}),Object(N.jsx)(C.a,{delayShow:500,id:"cancelTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"Annuler"})}),Object(N.jsx)(C.a,{delayShow:500,id:"periodTooltip",effect:"solid",children:Object(N.jsx)("span",{children:"P\xe9riode"})})]}),Object(N.jsx)(H,{event:e.task,dataEvents:e.dataEvents,dataProject:e.dataProject,alreadyExistingContributors:e.task.contributors,open:je,setOpen:ue}),Object(N.jsx)(k.a,{open:re,setOpen:oe,children:Object(N.jsxs)("div",{className:"modal__content__container space__between",children:[Object(N.jsx)("button",{"data-tip":!0,"data-for":"closeTooltip",onClick:function(e){e.stopPropagation(),oe(!1)},className:"close__modal__button",children:Object(N.jsx)(_.b,{})}),Object(N.jsxs)("div",{children:[Object(N.jsx)("h3",{children:"\xcates-vous s\xfbr(e) de vouloir supprimer cet \xe9v\xe8nement ?"}),Object(N.jsx)("p",{children:"La suppression sera d\xe9finitive. "})]}),Object(N.jsxs)("div",{className:"delete__actions__container",children:[Object(N.jsx)(w.a,{reversed:!0,onClick:function(){oe(!1),ce(!1)},children:"Annuler"}),Object(N.jsx)(w.a,{onClick:Ye,children:"Supprimer"})]})]})})]})};t.default=function(e){var t=e.type,n=e.setLength,c=e.length,O=j.a.useContext(z.a),v=O.events,f=O.setCurrentProject,m=O.setEvents,g=O.user,C=O.currentProject,y=O.listStyle,P=O.addCard,S=O.setAddCard,T=O.setSelectedEvents,H=O.selectedEvents,M=Object(d.useState)(!1),q=Object(o.a)(M,2),U=q[0],R=q[1],G=Object(d.useState)(!1),K=Object(o.a)(G,2),J=K[0],te=K[1],ne=Object(d.useState)([]),ae=Object(o.a)(ne,2),ce=ae[0],ie=ae[1],se=Object(d.useState)(),re=Object(o.a)(se,2),oe=re[0],le=re[1],de=Object(d.useState)([]),je=Object(o.a)(de,2),ue=je[0],be=je[1],pe=Object(d.useState)(""),Oe=Object(o.a)(pe,2),he=Oe[0],_e=Oe[1],ve=Object(I.a)(E.i),xe=Object(o.a)(ve,1)[0],fe=Object(I.a)(E.f),me=Object(o.a)(fe,1)[0],ge=Object(I.a)(E.e),ke=Object(o.a)(ge,1)[0],Ce=Object(I.a)(E.n),ye=Object(o.a)(Ce,1)[0],Ne=Object(d.useState)(!1),Pe=Object(o.a)(Ne,2),Se=Pe[0],Te=Pe[1],we=Object(D.h)().id,Ie=Object(L.a)(A.d,{variables:{id:we,userId:null===g||void 0===g?void 0:g.id},onCompleted:function(e){f(null===e||void 0===e?void 0:e.findProjectByProjectId)}}),Ee=Object(L.a)(A.b,{variables:{id:we,type:t},onCompleted:function(e){be(e.findEventsByProjectId)}});j.a.useEffect((function(){Q.a.forEach((function(e){return e.tasks=[]}));var e=Object(r.a)(Q.a),t=Object(r.a)(ue);null===t||void 0===t||t.forEach((function(t){var n=e.findIndex((function(e){return e.title===t.status}));-1!==n&&e[n].tasks.push(t)})),m(e)}),[ue,m]);var Be=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{H.forEach(function(){var e=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke({variables:{eventId:n.id,newState:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),B.c.success("".concat(H.length,' \xe9v\xe8nements pass\xe9s en "').concat(t,'".'),{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0,transition:B.a}),T([])}catch(n){B.c.warning("Une erreur est surevenue.",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0,transition:B.a}),console.log(n)}Ee.refetch();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,c,s,l,d,j,u,b,p,O,h,_,x,f,m,g,k;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.destination){e.next=2;break}return e.abrupt("return");case 2:if(n=t.source,c=t.destination,n.droppableId===c.droppableId){e.next=26;break}return s=v.findIndex((function(e){return e.id===n.droppableId})),l=v.findIndex((function(e){return e.id===c.droppableId})),d=v[s],j=v[l],u=Object(r.a)(d.tasks),b=Object(r.a)(j.tasks),p=u.splice(n.index,1),O=Object(o.a)(p,1),h=O[0],(_=Object(a.a)({},h)).status=null===j||void 0===j?void 0:j.title,b.splice(c.index,0,_),v[s].tasks=u,v[l].tasks=b,e.prev=16,e.next=19,me({variables:{eventId:null===t||void 0===t?void 0:t.draggableId,newStatus:null===j||void 0===j?void 0:j.title}});case 19:e.next=23;break;case 21:e.prev=21,e.t0=e.catch(16);case 23:Ee.refetch(),e.next=31;break;case 26:x=v.findIndex((function(e){return e.id===n.droppableId})),f=Array.from(v[x].tasks),m=f.splice(n.index,1),g=Object(o.a)(m,1),k=g[0],f.splice(t.destination.index,0,k),Ee.refetch();case 31:case"end":return e.stop()}}),e,null,[[16,21]])})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=H.map((function(e){return e.id})),e.next=4,ye({variables:{eventIds:n}});case 4:a=e.sent,T([]),Object(B.c)("".concat(a.data.deleteMultipleEvents.message),{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),B.c.error("Impossible de supprimer ces \xe9v\xe8nements. R\xe9essayez plus tard.",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0});case 12:Ee.refetch(),Te(!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(s.a)(i.a.mark((function e(a){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==he){e.next=2;break}return e.abrupt("return");case 2:return a.preventDefault(),s=ce.map((function(e){return e.id})),e.prev=4,e.next=7,xe({variables:{type:t,projectId:we,creatorId:g.id,description:he,contributors:s,status:oe?oe.title:"Nouveau",period:Object(W.a)()}});case 7:_e(""),Ee.refetch(),n&&n(c+1),ie([]),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),B.c.warning("Impossible de cr\xe9er l'\xe9v\xe8nement.",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0,transition:B.a}),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),Le=function(e){if("Enter"===e.key&&!1===e.shiftKey&&""!==he)return ze(e)};return Ie||Ie.loading?C?(null===Ee||void 0===Ee?void 0:Ee.data)&&!Ee.loading&&v?y?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("table",{className:"events__rows__container",children:[Object(N.jsxs)("tr",{className:"events__rows__container__head",children:[Object(N.jsxs)("th",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[Object(N.jsx)($.a,{onClick:function(){U?T([]):(T([]),T(ue.map((function(e){return{id:e.id}}))),R(!1)),console.log(H)},checked:U,setChecked:R}),Object(N.jsx)("span",{style:{fontWeight:"normal",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},onClick:function(){H.length>0&&te(!0)},children:Object(N.jsx)(x.a,{fontSize:"0.6rem"})}),Object(N.jsx)(u.a,{style:{transform:"translate(80px, 50px)"},bottom:!0,open:J,setOpen:te,children:Object(N.jsxs)(b.a,{children:[Object(N.jsx)(p.a,{onClick:function(){Be("V\xe9rifi\xe9")},children:Object(N.jsx)("span",{children:'Passer en "V\xe9rifi\xe9"'})}),Object(N.jsx)(p.a,{onClick:function(){Be("\xc0 v\xe9rifier")},children:Object(N.jsx)("span",{children:'Passer en "\xc0 v\xe9rifier"'})}),Object(N.jsx)(p.a,{onClick:function(){te(!1),Te(!0)},children:Object(N.jsxs)("span",{children:["Supprimer ",null===H||void 0===H?void 0:H.length," \xe9v\xe8nement(s)"]})})]})})]}),Object(N.jsx)("th",{children:"P\xe9riode"}),Object(N.jsx)("th",{children:"Contributeurs"}),Object(N.jsx)("th",{children:"Description"}),Object(N.jsx)("th",{children:"Status"}),Object(N.jsx)("th",{children:"\xc9tat"}),Object(N.jsx)("th",{})]}),ue.map((function(e,a){return Object(N.jsx)(ee,{type:t,task:e,setLength:n,length:c,dataEvents:Ee,dataProject:Ie},a)})),P&&Object(N.jsxs)("tr",{className:"event__row",children:[Object(N.jsx)("td",{}),Object(N.jsx)("td",{style:{fontSize:"0.9rem"},className:"current__period__row",children:Object(W.a)()}),Object(N.jsx)("td",{}),Object(N.jsx)("td",{children:Object(N.jsx)("form",{onSubmit:ze,children:Object(N.jsx)(F.a,{onKeyPress:Le,placeholder:"Titre de l'\xe9v\xe8nement...",onChange:function(e){return _e(e.target.value)},onClick:function(e){return e.stopPropagation()},value:he,autoFocus:!0,className:"modif__description__textarea__row"})})}),Object(N.jsx)("td",{style:{fontSize:"0.9rem"},children:"Nouveau"}),Object(N.jsx)("td",{children:Object(N.jsx)(w.a,{style:{height:"30px"},onClick:ze,children:"Cr\xe9er"})}),Object(N.jsx)("td",{style:{padding:"4px"},children:Object(N.jsx)("button",{onClick:function(e){e.stopPropagation(),S(!1)},className:"clear__button",children:Object(N.jsx)(_.b,{})})})]})]}),!P&&Object(N.jsx)(w.a,{onClick:function(){return S(!0)},style:{position:"sticky",bottom:"10px",margin:"10px",zIndex:1},children:"Ajouter un \xe9v\xe8nement +"}),Object(N.jsx)(k.a,{open:Se,setOpen:Te,children:Object(N.jsxs)("div",{className:"modal__content__container space__between",children:[Object(N.jsx)("button",{"data-tip":!0,"data-for":"closeTooltip",onClick:function(e){e.stopPropagation(),Te(!1)},className:"close__modal__button",children:Object(N.jsx)(_.b,{})}),Object(N.jsxs)("div",{children:[Object(N.jsxs)("h3",{children:["\xcates-vous s\xfbr(e) de vouloir supprimer ",H.length," ","\xe9v\xe8nement(s) ?"]}),1===H.length?Object(N.jsx)("p",{children:"L'\xe9v\xe8nement suivant sera supprim\xe9 :"}):Object(N.jsxs)("p",{children:["Les ",H.length," \xe9v\xe8nement(s) suivants seront supprim\xe9s :"]}),Object(N.jsx)("ul",{style:{margin:"20px"},children:H.map((function(e){return Object(N.jsxs)("li",{style:{listStyle:"inside"},children:["id : ",e.id]},e.id)}))}),Object(N.jsx)("p",{children:"La suppression sera d\xe9finitive. "})]}),Object(N.jsxs)("div",{className:"delete__actions__container",style:{position:"sticky",bottom:"12px"},children:[Object(N.jsx)(w.a,{reversed:!0,onClick:function(){Te(!1)},children:"Annuler"}),Object(N.jsx)(w.a,{onClick:Ae,children:"Supprimer"})]})]})})]}):Object(N.jsx)(N.Fragment,{children:v?Object(N.jsx)(l.a,{onDragEnd:He,children:Object(N.jsx)("div",{className:"kanban",children:null===v||void 0===v?void 0:v.map((function(e,i){return Object(N.jsx)(X,{addCard:P,setAddCard:S,section:e,setEventSelected:le,droppableId:e.id,children:function(s){var r,o;return Object(N.jsxs)("div",Object(a.a)(Object(a.a)({},s.droppableProps),{},{ref:s.innerRef,children:[Object(N.jsxs)("h2",{className:"kanban__section__title",children:[null===e||void 0===e?void 0:e.title," (",null===e||void 0===e||null===(r=e.tasks)||void 0===r?void 0:r.length,")"]}),Object(N.jsxs)("div",{className:"kanban__section__content",children:[null===e||void 0===e||null===(o=e.tasks)||void 0===o?void 0:o.map((function(e,a){return Object(N.jsx)(Y,{draggableId:null===e||void 0===e?void 0:e.id,index:a,type:t,task:e,setLength:n,length:c,dataEvents:Ee,dataProject:Ie,className:"card card__".concat(i+1)},null===e||void 0===e?void 0:e.id)})),P&&oe.id===e.id&&Object(N.jsx)(Y,{add:!0,type:t,task:"",className:"card",children:Object(N.jsxs)("form",{className:"add__card__form",onSubmit:ze,children:[Object(N.jsx)(F.a,{onKeyPress:Le,placeholder:"Titre de l'\xe9v\xe8nement...",onChange:function(e){return _e(e.target.value)},onClick:function(e){return e.stopPropagation()},value:he,autoFocus:!0,className:"modif__description__textarea"}),Object(N.jsxs)("div",{className:"add__card__button__container",children:[Object(N.jsx)(w.a,{style:{width:"80%",height:"35px"},type:"submit",disabled:!oe||""===he,onClick:function(e){e.stopPropagation(),ze(e),S(!1)},children:"Ajouter"}),Object(N.jsx)("button",{onClick:function(e){e.stopPropagation(),S(!1)},className:"clear__button",children:Object(N.jsx)(_.b,{})})]})]})}),s.placeholder]}),Object(N.jsxs)("button",{onClick:function(){le(e),S(!0)},className:"kanban__section__title__button",children:[Object(N.jsx)(h.b,{})," Ajouter une carte"]})]}))}},e.id)}))})}):Object(N.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(N.jsx)(V.a,{size:"medium",reversed:!0})})}):Object(N.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:Object(N.jsx)(V.a,{size:"medium",reversed:!0})}):Object(N.jsx)(Z.a,{children:Object(N.jsx)(V.a,{size:"medium",reversed:!0})}):Object(N.jsx)(D.a,{to:"/404"})}}}]);
//# sourceMappingURL=5.dccf3936.chunk.js.map