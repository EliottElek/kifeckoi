(this.webpackJsonpmaterials=this.webpackJsonpmaterials||[]).push([[6],{1868:function(e,t,n){"use strict";var a=n(35),c=n(13),r=n(2),i=n(1);t.a=function(e){var t=Object(r.useRef)(null),n=Object(r.useState)(""),s=Object(c.a)(n,2),o=s[0],l=s[1],u=Object(r.useState)("auto"),p=Object(c.a)(u,2),d=p[0],j=p[1],b=Object(r.useState)("auto"),O=Object(c.a)(b,2),x=O[0],h=O[1];Object(r.useEffect)((function(){t&&h("".concat(t.current.scrollHeight,"px")),j("".concat(t.current.scrollHeight,"px"))}),[o]);return Object(i.jsx)("div",{style:{minHeight:x,display:"flex",alignItems:"center"},children:Object(i.jsx)("textarea",Object(a.a)(Object(a.a)({onFocus:function(e){return e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)}},e),{},{ref:t,rows:1,style:Object(a.a)(Object(a.a)({},e.style),{},{margin:0,height:d}),onChange:function(n){j("auto"),h("".concat(t.current.scrollHeight,"px")),l(n.target.value),e.onChange&&e.onChange(n)}}))})}},1878:function(e,t,n){"use strict";var a=n(2029),c=n(1940),r=n(1941),i=n(1);t.a=function(e){var t=e.children;return Object(i.jsx)(a.a,{remarkPlugins:[c.a],rehypePlugins:[r.a],components:{a:function(e){var t=e.children,n=e.href;return Object(i.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",onClick:function(e){return e.stopPropagation()},children:t})}},children:t})}},1880:function(e,t,n){"use strict";t.a=function(e,t){var n=parseInt(new Date(e).getDate()),a=parseInt(new Date(e).getMonth())+1;n<=9&&(n="0"+n),a<=9&&(a="0"+a);var c=n+"/"+a+"/"+parseInt(new Date(e).getFullYear());if(t){var r=new Date(e),i=r.getMinutes(),s=r.getHours();i<=9&&(i="0"+i),s<=9&&(s="0"+s),c+=" "+(s+":"+i)}return c}},1883:function(e,t,n){},1884:function(e,t,n){"use strict";var a=n(100),c=n.n(a),r=n(131),i=n(13),s=n(2),o=n(81),l=n(32),u=n(77),p=n(133),d=n(79),j=n(80),b=n(54),O=n(132),x=n(46),h=n(1867),f=n(134),g=n(1858),m=n(10),v=(n(1894),n(1));t.a=function(e){var t=e.usr,n=e.dataProject,a=e.dataEvents,_=e.modal,y=e.eventMode,S=e.event,T=Object(s.useContext)(l.a),C=T.currentProject,k=T.user,D=Object(s.useState)(!1),I=Object(i.a)(D,2),N=I[0],P=I[1],L=Object(s.useState)(!1),w=Object(i.a)(L,2),E=w[0],F=w[1],M=Object(g.a)(O.b),B=Object(i.a)(M,1)[0],A=Object(g.a)(O.a),H=Object(i.a)(A,1)[0],U=Object(m.h)().id,G=function(){var e=Object(r.a)(c.a.mark((function e(r){var i,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.stopPropagation(),e.prev=1,i=C.contributors,s=i.filter((function(e){return e.id!==t.id})),o=s.map((function(e){return e.id})),!y){e.next=10;break}return e.next=8,H({variables:{eventId:S.id,contributors:o}});case 8:e.next=12;break;case 10:return e.next=12,B({variables:{projectId:U,contributors:o}});case 12:a&&setTimeout((function(){a.refetch()}),200),n&&setTimeout((function(){n.refetch()}),200),x.c.success("Contributeur supprim\xe9 avec succ\xe8s.",{position:x.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1}),F(!1),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),x.c.error("Impossible de supprimer les contributeurs.",{position:x.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"user__card",children:[Object(v.jsx)(o.a,{name:t.username,large:!0,src:t.avatarUrl}),Object(v.jsx)("h5",{className:"user__card__name",children:t.firstname+" "+t.lastname}),Object(v.jsxs)("h6",{className:"user__card__username",children:["(",t.username,")"]}),Object(v.jsx)("p",{className:"user__card__email",children:t.email}),k.id!==t.id&&!_&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:P,className:"delete__user__button",children:Object(v.jsx)(h.b,{})}),Object(v.jsx)(j.a,{open:N,setOpen:P,bottom:!0,style:{transform:"translate(70%, -60%)"},children:Object(v.jsxs)(d.a,{children:[!y&&Object(v.jsx)(b.a,{onClick:function(e){P(!1)},children:Object(v.jsx)("p",{children:"Passer en administrateur"})}),Object(v.jsx)(b.a,{onClick:function(e){F(!0),P(!1)},children:Object(v.jsx)("p",{children:"Supprimer"})})]})})]})]}),Object(v.jsx)(p.a,{open:E,setOpen:F,children:Object(v.jsxs)("div",{className:"modal__content__container",children:[Object(v.jsx)("button",{"data-tip":!0,"data-for":"closeTooltip",onClick:function(e){e.stopPropagation(),F(!1)},className:"close__modal__button",children:Object(v.jsx)(f.b,{})}),Object(v.jsxs)("h3",{children:["\xcates-vous s\xfbr de vouloir supprimer ",t.firstname," ?"]}),Object(v.jsx)("p",{children:"Vous pourrez le rajouter \xe0 un autre moment. "}),Object(v.jsxs)("div",{className:"delete__actions__container",children:[Object(v.jsx)(u.a,{reversed:!0,onClick:function(){return F(!1)},children:"Annuler"}),Object(v.jsx)(u.a,{onClick:G,children:"Supprimer"})]})]})})]})}},1894:function(e,t,n){},1895:function(e,t,n){"use strict";var a=n(13),c=n(35),r=n(2),i=n.n(r),s=n(1853),o=n(53),l=n(1939),u=n(1);t.a=function(e){var t=e.setSelectedContributors,n=e.placeholder,r=e.multi,p=e.alreadyExistingContributors,d=e.users,j={option:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{color:"#1e2022",padding:".5rem 3rem .5rem .5rem",cursor:"pointer"})},singleValue:function(e,t){var n=t.isDisabled?.5:1;return Object(c.a)(Object(c.a)({},e),{},{opacity:n,transition:"opacity 300ms"})}},b=Object(s.a)(o.h).data,O=i.a.useState([]),x=Object(a.a)(O,2),h=x[0],f=x[1];return i.a.useEffect((function(){!function(){if(null===b||void 0===b?void 0:b.getAllUsers){var e=function(e,t){var n=[];return e?t?(e.forEach((function(e){var a=!1;t.forEach((function(t){(function(e,t){return e.id===t.id})(e,t)&&(a=!0)})),a||n.push(e)})),n):e:t}((d||(null===b||void 0===b?void 0:b.getAllUsers)).map((function(e){return Object(c.a)(Object(c.a)({},e),{},{label:e.username,value:e.username})})),p);f(e)}}()}),[p,null===b||void 0===b?void 0:b.getAllUsers,f,d]),Object(u.jsx)(l.a,{closeMenuOnSelect:!1,isMulti:!!r,placeholder:n,styles:j,openMenuOnClick:function(e){return e.stopPropagation()},onChange:function(e){t(e)},options:h})}},1898:function(e,t,n){},1995:function(e,t,n){},1996:function(e,t,n){},2030:function(e,t,n){"use strict";n.r(t);var a=n(100),c=n.n(a),r=n(131),i=n(13),s=n(2),o=n.n(s),l=n(32),u=n(1858),p=n(1853),d=n(53),j=n(132),b=n(10),O=n(1997),x=n(1891),h=n(83),f=n(78),g=(n(1883),n(1884)),m=n(1895),v=n(133),_=n(134),y=n(77),S=n(46),T=n(1),C=function(e){var t=e.open,n=e.setOpen,a=e.dataProject,s=e.alreadyExistingContributors,l=o.a.useState([]),p=Object(i.a)(l,2),d=p[0],O=p[1],x=Object(u.a)(j.b),h=Object(i.a)(x,1)[0],f=Object(b.h)().id,C=function(){var e=Object(r.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=s.concat(d),r=t.map((function(e){return e.id})),e.next=5,h({variables:{projectId:f,contributors:r}});case 5:setTimeout((function(){a.refetch()}),200),n(!1),S.c.success("Contributeurs ajout\xe9s avec succ\xe8s.",{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),S.c.error("Impossible d'ajouter les contributeurs.",{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(T.jsx)(v.a,{open:t,children:Object(T.jsxs)("div",{className:"modal__content__container",children:[Object(T.jsx)("button",{onClick:function(e){e.stopPropagation(),n(!1)},className:"close__modal__button",children:Object(T.jsx)(_.b,{})}),Object(T.jsx)("h2",{className:"title__global",style:{marginTop:"30px",marginBottom:"20px"},children:"S\xe9lectionnez des contributeurs"}),Object(T.jsx)(m.a,{multi:!0,placeholder:"Cherchez un contributeur...",alreadyExistingContributors:s,setSelectedContributors:O}),Object(T.jsxs)("div",{className:"user__cards__container",style:{marginTop:"30px"},children:[null===s||void 0===s?void 0:s.map((function(e,t){return Object(T.jsx)(g.a,{modal:!0,usr:e},t)})),null===d||void 0===d?void 0:d.map((function(e,t){return Object(T.jsx)(g.a,{modal:!0,usr:e},t)}))]}),Object(T.jsxs)("div",{className:"add__contributors__actions__container",children:[Object(T.jsx)(y.a,{reversed:!0,onClick:function(){return n(!1)},children:"Annuler"}),Object(T.jsx)(y.a,{onClick:C,children:"Ajouter"})]})]})})},k=n(1867),D=n(80),I=n(79),N=n(54),P=(n(1898),n(1874)),L=n(1877),w=n(1879),E=n(1868),F=n(1878),M=n(49),B=function(e){var t=e.type,n=e.dataProject,a=o.a.useContext(l.a).currentProject,s=o.a.useState(!1),p=Object(i.a)(s,2),d=p[0],b=p[1],O=o.a.useState(""),x=Object(i.a)(O,2),h=x[0],f=x[1],g=Object(u.a)(j.p),m=Object(i.a)(g,1)[0];o.a.useEffect((function(){f("global"===t?a.globalDescription:"planning"===t?a.planningDescription:a.perimeterDescription)}),[t,f,a.globalDescription,a.planningDescription,a.perimeterDescription]);var v=function(){var e=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({variables:{projectId:a.id,globalStatus:a.globalStatus,perimeterStatus:a.perimeterStatus,planningStatus:a.planningStatus,goLiveDate:a.goLiveDate,goCopyDate:a.goCopyDate,logoUrl:a.logoUrl,globalDescription:"global"===t?h:a.globalDescription,perimeterDescription:"perim\xe8tre"===t?h:a.perimeterDescription,planningDescription:"planning"===t?h:a.planningDescription}});case 3:n.refetch(),S.c.success("description du status ".concat(t," modifi\xe9e avec succ\xe8s."),{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1}),b(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),S.c.error("impossible de modifier la description du status ".concat(t),{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),_=function(e){"bold"===e?f((function(e){return e+" **bold** "})):"italic"===e?f((function(e){return e+" *italic* "})):"italic&bold"===e?f((function(e){return e+" ***italic and bold*** "})):"h1"===e?f((function(e){return""===e?"# title 1":e+"\n # title 1 "})):"h2"===e?f((function(e){return""===e?"## title 2":e+"\n ## title 2 "})):"h3"===e?f((function(e){return""===e?"### title 3":e+"\n ### title 3 "})):"list"===e?f((function(e){return""===e?"- item 1 \n - item 2 \n - item 3":e+"\n - item 1 \n - item 2 \n - item 3"})):"link"===e&&f((function(e){return e+" [text](url) "}))};return d?Object(T.jsxs)("div",{className:"edit__block__container",children:[Object(T.jsxs)("div",{className:"edit__block__actions__container",children:[Object(T.jsx)("button",{"data-tip":!0,"data-for":"h1Tooltip",className:"edit__button",onClick:function(){return _("h1")},children:Object(T.jsx)("h1",{children:"h1"})}),Object(T.jsx)("button",{"data-tip":!0,"data-for":"h2Tooltip",className:"edit__button",onClick:function(){return _("h2")},children:Object(T.jsx)("h2",{children:"h2"})}),Object(T.jsx)("button",{"data-tip":!0,"data-for":"h3Tooltip",className:"edit__button",onClick:function(){return _("h3")},children:Object(T.jsx)("h3",{children:"h3"})}),Object(T.jsx)("button",{"data-tip":!0,"data-for":"boldTooltip",className:"edit__button",onClick:function(){return _("bold")},children:Object(T.jsx)(w.b,{})}),Object(T.jsx)("button",{"data-tip":!0,"data-for":"italicTooltip",className:"edit__button",onClick:function(){return _("italic")},children:Object(T.jsx)(P.d,{})}),Object(T.jsx)("button",{"data-tip":!0,"data-for":"bolditalicTooltip",className:"edit__button",onClick:function(){return _("italic&bold")},children:Object(T.jsx)(L.a,{})}),Object(T.jsx)("button",{"data-tip":!0,"data-for":"listTooltip",className:"edit__button",onClick:function(){return _("list")},children:Object(T.jsx)(P.f,{})}),Object(T.jsx)("button",{"data-tip":!0,"data-for":"linkTooltip",className:"edit__button",onClick:function(){return _("link")},children:Object(T.jsx)(P.e,{})})]}),Object(T.jsx)(E.a,{autoFocus:!0,className:"modif__textarea",value:h,placeholder:"Ajoutez une description au status ".concat(t,"..."),onChange:function(e){return f(e.target.value)}}),Object(T.jsxs)("div",{style:{display:"flex",gap:"4px",margin:"4px",marginTop:"8px"},children:[Object(T.jsx)(y.a,{onClick:function(){return b(!1)},reversed:!0,style:{height:"30px"},children:"Annuler"}),Object(T.jsx)(y.a,{onClick:v,style:{height:"30px"},children:"Valider"})]}),Object(T.jsx)(M.a,{delayShow:500,id:"h1Tooltip",effect:"solid",children:Object(T.jsx)("span",{children:"Grand titre"})}),Object(T.jsx)(M.a,{delayShow:500,id:"h2Tooltip",effect:"solid",children:Object(T.jsx)("span",{children:"Moyen titre"})}),Object(T.jsx)(M.a,{delayShow:500,id:"h3Tooltip",effect:"solid",children:Object(T.jsx)("span",{children:"Petit titre"})}),Object(T.jsx)(M.a,{delayShow:500,id:"boldTooltip",effect:"solid",children:Object(T.jsx)("span",{children:"Gras"})}),Object(T.jsx)(M.a,{delayShow:500,id:"italicTooltip",effect:"solid",children:Object(T.jsx)("span",{children:"Italique"})}),Object(T.jsx)(M.a,{delayShow:500,id:"bolditalicTooltip",effect:"solid",children:Object(T.jsx)("span",{children:"Gras + italique"})}),Object(T.jsx)(M.a,{delayShow:500,id:"listTooltip",effect:"solid",children:Object(T.jsx)("span",{children:"Liste"})}),Object(T.jsx)(M.a,{delayShow:500,id:"linkTooltip",effect:"solid",children:Object(T.jsx)("span",{children:"Lien"})})]}):Object(T.jsx)(T.Fragment,{children:""!==h?Object(T.jsxs)("div",{onClick:function(){return b(!0)},className:"modif__textarea__paragraph",children:["global"===t&&Object(T.jsx)(F.a,{children:a.globalDescription}),"planning"===t&&Object(T.jsx)(F.a,{children:a.planningDescription}),"perim\xe8tre"===t&&Object(T.jsx)(F.a,{children:a.perimeterDescription})]}):Object(T.jsxs)("p",{style:{fontStyle:"italic"},children:["Vous pouvez ajouter une description au status ",t,"."," ",Object(T.jsx)(y.a,{reversed:!0,onClick:function(){return b(!0)},style:{height:"30px"},children:"Ajouter une description"})]})})},A=n(2007),H=(n(1994),n(1995),n(2009)),U=n(1880),G=function(e){var t=e.type,n=e.dataProject,a=o.a.useContext(l.a).currentProject,s=Object(u.a)(j.p),p=Object(i.a)(s,1)[0],d=o.a.useState(""),b=Object(i.a)(d,2),O=b[0],x=b[1];o.a.useEffect((function(){x("Go live"===t?new Date(a.goLiveDate):new Date(a.goCopyDate))}),[a.goCopyDate,a.goLiveDate,t,x]);var f=o.a.useState(!1),g=Object(i.a)(f,2),m=g[0],v=g[1],_=function(){var e=Object(r.a)(c.a.mark((function e(r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p({variables:{projectId:a.id,globalStatus:a.globalStatus,perimeterStatus:a.perimeterStatus,planningStatus:a.planningStatus,goLiveDate:"Go live"===t?O:a.goLiveDate,goCopyDate:"Go copy"===t?O:a.goCopyDate,globalDescription:a.globalDescription,perimeterDescription:a.perimeterDescription,planningDescription:a.planningDescription,logoUrl:a.logoUrl}});case 3:n.refetch(),v(!1),S.c.success("date de ".concat(t," modifi\xe9e avec succ\xe8s."),{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),S.c.error("impossible de changer la date de ".concat(t),{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return"Go live"===t&&""===a.goLiveDate?Object(T.jsxs)("div",{children:[Object(T.jsx)(y.a,{onClick:function(){return v(!0)},reversed:!0,style:{height:"30px",marginLeft:"-20px"},children:"Ajouter une date de Go live"}),m&&Object(T.jsx)(h.a,{children:Object(T.jsxs)("div",{className:"date__picker__form",children:[Object(T.jsx)(A.a,{locale:H.a,style:{background:"var(--card-background)",borderRadius:"8px",maxWidth:"300px"},mode:"single",selected:O,onSelect:x}),Object(T.jsxs)("div",{style:{display:"flex",gap:"4px",margin:"4px",justifyContent:"flex-end"},children:[Object(T.jsx)(y.a,{onClick:function(){return v(!1)},reversed:!0,style:{height:"30px"},children:"Annuler"}),Object(T.jsx)(y.a,{style:{height:"30px"},onClick:_,children:"Valider"})]})]})})]}):"Go copy"===t&&""===a.goCopyDate?Object(T.jsxs)("div",{children:[Object(T.jsx)(y.a,{onClick:function(){return v(!0)},reversed:!0,style:{height:"30px",marginLeft:"-20px"},children:"Ajouter une date de Go copy"}),m&&Object(T.jsx)(h.a,{children:Object(T.jsxs)("div",{className:"date__picker__form",children:[Object(T.jsx)(A.a,{locale:H.a,style:{background:"var(--card-background)",borderRadius:"8px",maxWidth:"300px"},mode:"single",selected:O,onSelect:x}),Object(T.jsxs)("div",{style:{display:"flex",gap:"4px",margin:"4px",justifyContent:"flex-end"},children:[Object(T.jsx)(y.a,{onClick:function(){return v(!1)},reversed:!0,style:{height:"30px"},children:"Annuler"}),Object(T.jsx)(y.a,{style:{height:"30px"},onClick:_,children:"Valider"})]})]})})]}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("h4",{className:"date__picker__container",children:["Go live"===t?"Go live le ":"Go copy le ",Object(T.jsx)("span",{className:"date__span",onClick:function(){return v(!0)},children:"Go live"===t?Object(U.a)(a.goLiveDate):Object(U.a)(a.goCopyDate)}),Object(T.jsx)("span",{className:"edit__icon",children:Object(T.jsx)(k.a,{})})]}),m&&Object(T.jsx)(h.a,{onClick:function(){return v(!1)},children:Object(T.jsxs)("div",{className:"date__picker__form",onClick:function(e){return e.stopPropagation()},children:[Object(T.jsx)(A.a,{locale:H.a,style:{background:"var(--card-background)",borderRadius:"8px",maxWidth:"300px"},mode:"single",selected:O,onSelect:x}),Object(T.jsxs)("div",{style:{display:"flex",gap:"4px",margin:"4px",justifyContent:"flex-end"},children:[Object(T.jsx)(y.a,{onClick:function(){return v(!1)},reversed:!0,style:{height:"30px"},children:"Annuler"}),Object(T.jsx)(y.a,{style:{height:"30px"},onClick:_,children:"Valider"})]})]})})]})},V=function(e){var t=e.open,n=e.setOpen,a=e.dataProject,s=o.a.useContext(l.a).currentProject,p=Object(u.a)(j.p),d=Object(i.a)(p,1)[0],b=o.a.useState(s.logoUrl),O=Object(i.a)(b,2),x=O[0],h=O[1],f=function(){var e=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d({variables:{projectId:s.id,globalStatus:s.globalStatus,perimeterStatus:s.perimeterStatus,planningStatus:s.planningStatus,goLiveDate:s.goLiveDate,goCopyDate:s.goCopyDate,globalDescription:s.globalDescription,perimeterDescription:s.perimeterDescription,planningDescription:s.planningDescription,logoUrl:x}});case 3:a.refetch(),n(!1),S.c.success("Logo modifi\xe9 avec succ\xe8s.",{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),S.c.error("Impossible de changer le logo.",{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(T.jsx)(v.a,{open:t,setOpen:n,children:Object(T.jsxs)("div",{className:"modal__content__container",children:[Object(T.jsx)(E.a,{autoFocus:!0,className:"modif__textarea",value:x,placeholder:"Ajoutez un logo au format url...",onChange:function(e){return h(e.target.value)}})," ",Object(T.jsxs)("div",{style:{display:"flex",gap:"6px"},children:[Object(T.jsx)(y.a,{style:{height:"30px"},reversed:!0,onClick:function(){return n(!1)},children:"Annuler"}),Object(T.jsx)(y.a,{style:{height:"30px"},onClick:f,children:"Valider"})]})]})})},z=(n(1996),function(e){var t=e.open,n=e.setOpen,a=e.dataProject,s=o.a.useContext(l.a).currentProject,p=Object(u.a)(j.q),d=Object(i.a)(p,1)[0],b=o.a.useState(""),O=Object(i.a)(b,2),x=O[0],h=O[1];o.a.useEffect((function(){h(s.name)}),[s.name,h]);var f=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==x){e.next=2;break}return e.abrupt("return");case 2:return t=s.name,e.prev=3,e.next=6,d({variables:{projectId:s.id,name:x}});case 6:a.refetch(),n(!1),S.c.success('"'.concat(t,'" s\'appelle d\xe9sormais "').concat(x,'".'),{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),S.c.error("Impossible de changer le nom.",{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return Object(T.jsx)(v.a,{open:t,setOpen:n,children:Object(T.jsxs)("div",{className:"modal__content__container space-between",children:[Object(T.jsx)(E.a,{autoFocus:!0,className:"modif__textarea big__title__textarea",value:x,placeholder:"Le nom du projet ne peut pas \xeatre vide...",onChange:function(e){return h(e.target.value)}})," ",Object(T.jsxs)("div",{style:{display:"flex",gap:"6px",justifySelf:"flex-end"},children:[Object(T.jsx)(y.a,{style:{height:"30px"},reversed:!0,onClick:function(){return n(!1)},children:"Annuler"}),Object(T.jsx)(y.a,{style:{height:"30px"},onClick:f,children:"Valider"})]})]})})}),q=n(18),R=n(55);q.f.register(q.a,q.r,q.h);var W=function(e){var t=e.events,n=e.selector,a=e.title,c=o.a.useState(null),r=Object(i.a)(c,2),s=r[0],l=r[1];o.a.useEffect((function(){var e=[],a=[];null===t||void 0===t||t.forEach((function(t){var c=e.findIndex((function(e){return e===t[n]}));-1===c?(e.push(t[n]),a.push(1)):a[c]++})),l({labels:e,datasets:[{label:"# of Votes",data:a,backgroundColor:["#01ffff80","#5ec2c280","#4f9b9b80","#748f8f80","#8d8d8d80"],borderColor:["#01ffff80","#5ec2c280","#4f9b9b80","#748f8f80","#8d8d8d80"],borderWidth:1}]})}),[t,l,n]);return s&&0!==s.labels.length?Object(T.jsxs)("div",{style:{position:"relative",maxWidth:"240px",textAlign:"center",padding:"8px"},children:[Object(T.jsx)("h5",{style:{padding:"8px"},children:a}),Object(T.jsx)(R.c,{options:{plugins:{legend:{display:!1},render:"percentage",fontColor:["green","white","red"],precision:2,text:"23%",datalabels:{color:"black",font:{size:14,weight:"bold"}}}},data:s})]}):Object(T.jsx)("div",{style:{position:"relative"},children:Object(T.jsx)("h4",{style:{fontStyle:"italic"},children:"Aucun \xe9v\xe8nement."})})},J=[{name:"conforme",class:"conforme",icon:""},{name:"vigilance",class:"vigilance",icon:""},{name:"\xe0 risque",class:"\xe0 risque",icon:""},{name:"alerte",class:"alerte",icon:""},{name:"issue",class:"issue",icon:""},{name:"gestion de crise",class:"gestion de crise",icon:""}];t.default=function(){var e,t,n=Object(b.h)().id,a=Object(b.g)(),m=Object(s.useContext)(l.a),v=m.currentProject,_=m.setCurrentProject,P=m.user,L=Object(s.useState)(!1),w=Object(i.a)(L,2),E=w[0],F=w[1],M=Object(s.useState)(!1),A=Object(i.a)(M,2),H=A[0],U=A[1],q=Object(s.useState)([]),R=Object(i.a)(q,2),Y=R[0],K=R[1],Q=Object(s.useState)(!1),X=Object(i.a)(Q,2),Z=X[0],$=X[1],ee=Object(s.useState)(!1),te=Object(i.a)(ee,2),ne=te[0],ae=te[1],ce=Object(s.useState)(!1),re=Object(i.a)(ce,2),ie=re[0],se=re[1],oe=Object(s.useState)(!1),le=Object(i.a)(oe,2),ue=le[0],pe=le[1],de=Object(s.useState)(!1),je=Object(i.a)(de,2),be=je[0],Oe=je[1],xe=Object(u.a)(j.p),he=Object(i.a)(xe,1)[0],fe=Object(p.a)(d.d,{variables:{id:n,userId:null===P||void 0===P?void 0:P.id},onCompleted:function(e){_(null===e||void 0===e?void 0:e.findProjectByProjectId)}}),ge=Object(p.a)(d.g,{variables:{id:n},onCompleted:function(e){K(null===e||void 0===e?void 0:e.getAllEventsAllTypes)}});o.a.useEffect((function(){ge.refetch()}));var me=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,se(!1),e.next=4,he({variables:{projectId:v.id,globalStatus:t.name,perimeterStatus:v.perimeterStatus,planningStatus:v.planningStatus,goLiveDate:v.goLiveDate,goCopyDate:v.goCopyDate,globalDescription:v.globalDescription,perimeterDescription:v.perimeterDescription,planningDescription:v.planningDescription,logoUrl:v.logoUrl}});case 4:fe.refetch(),S.c.success('\xc9tat global pass\xe9 \xe0 "'.concat(t.name,'"'),{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),S.c.error("Impossible de changer l'\xe9tat du status global.",{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Oe(!1),e.next=4,he({variables:{projectId:v.id,globalStatus:v.globalStatus,perimeterStatus:t.name,goLiveDate:v.goLiveDate,goCopyDate:v.goCopyDate,planningStatus:v.planningStatus,globalDescription:v.globalDescription,perimeterDescription:v.perimeterDescription,planningDescription:v.planningDescription,logoUrl:v.logoUrl}});case 4:fe.refetch(),S.c.success('\xc9tat p\xe9rim\xe8tre pass\xe9 \xe0 "'.concat(t.name,'"'),{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),S.c.error("Impossible de changer l'\xe9tat du status p\xe9rim\xe8tre.",{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,pe(!1),e.next=4,he({variables:{projectId:v.id,globalStatus:v.globalStatus,perimeterStatus:v.perimeterStatus,planningStatus:t.name,goLiveDate:v.goLiveDate,goCopyDate:v.goCopyDate,globalDescription:v.globalDescription,perimeterDescription:v.perimeterDescription,planningDescription:v.planningDescription,logoUrl:v.logoUrl}});case 4:fe.refetch(),S.c.success('\xc9tat planning pass\xe9 \xe0 "'.concat(t.name,'"'),{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),S.c.error("Impossible de changer l'\xe9tat du status planning.",{position:S.c.POSITION.BOTTOM_LEFT,pauseOnHover:!1});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return fe.data||fe.loading?v?Object(T.jsxs)("div",{className:"global__infos__container",children:[Object(T.jsxs)("div",{style:{margin:"30px"},children:[Object(T.jsxs)("h2",{className:"title__global__big",children:[null===v||void 0===v?void 0:v.name," ",""!==v.logoUrl&&Object(T.jsx)("img",{alt:"",className:"project__logo",src:v.logoUrl}),Object(T.jsxs)("div",{className:"title__buttons__container",style:{zIndex:2},children:[Object(T.jsx)("button",{className:"title__modif__button",onClick:function(){return ae(!0)},children:Object(T.jsx)(k.b,{})}),Object(T.jsx)(D.a,{bottom:!0,open:ne,setOpen:ae,style:{transform:"translate(-5px,-20px)"},children:Object(T.jsxs)(I.a,{children:[Object(T.jsx)(N.a,{onClick:function(){ae(!1),$(!0)},children:Object(T.jsx)("span",{children:"Changer le nom"})}),Object(T.jsx)(N.a,{onClick:function(){ae(!1),U(!0)},children:""===v.logoUrl?Object(T.jsx)("span",{children:"Ajouter un logo"}):Object(T.jsx)("span",{children:"Modifier le logo"})}),Object(T.jsx)("span",{className:"divider"}),Object(T.jsx)(N.a,{onClick:function(){ae(!1)},children:Object(T.jsx)("span",{children:"Supprimer le projet"})})]})})]})]}),Object(T.jsx)("h4",{className:"client__link__big",onClick:function(){var e;return a("/client/".concat(null===v||void 0===v||null===(e=v.client)||void 0===e?void 0:e.id))},children:null===v||void 0===v?void 0:v.client.name}),Object(T.jsx)(G,{type:"Go live",dataProject:fe}),Object(T.jsx)(G,{type:"Go copy",dataProject:fe}),Object(T.jsxs)("h1",{style:{marginTop:"30px",marginBottom:"15px",display:"flex",alignItems:"center"},children:["Status global"," ",Object(T.jsxs)("span",{className:"status__span ".concat(v.globalStatus?v.globalStatus.replace(/ /g,"__"):"conforme","__span"),onClick:function(){return se(!0)},children:[v.globalStatus?v.globalStatus:"conforme"," ",Object(T.jsx)(x.a,{})]}),Object(T.jsx)(D.a,{style:{transform:"translate(200px, 100px)"},bottom:!0,open:ie,setOpen:se,children:Object(T.jsx)(I.a,{children:J.map((function(e,t){return Object(T.jsx)(N.a,{onClick:function(){me(e)},children:Object(T.jsxs)("span",{children:[e.name," ",e.icon]})},t)}))})})]}),Object(T.jsx)(B,{type:"global",dataProject:fe}),Object(T.jsxs)("h3",{style:{marginTop:"30px",marginBottom:"15px",display:"flex",alignItems:"center",position:"relative"},children:["Status planning"," ",Object(T.jsxs)("span",{className:"status__span ".concat(v.planningStatus?v.planningStatus.replace(/ /g,"__"):"conforme","__span"),onClick:function(){return pe(!0)},children:[v.planningStatus?v.planningStatus:"conforme"," ",Object(T.jsx)(x.a,{})]}),Object(T.jsx)(D.a,{style:{transform:"translate(145px, 100px)"},bottom:!0,open:ue,setOpen:pe,children:Object(T.jsx)(I.a,{children:J.map((function(e,t){return Object(T.jsx)(N.a,{onClick:function(){_e(e)},children:Object(T.jsxs)("span",{children:[e.name," ",e.icon]})},t)}))})})]}),Object(T.jsx)(B,{type:"planning",dataProject:fe}),Object(T.jsxs)("h3",{style:{marginTop:"30px",marginBottom:"15px",display:"flex",alignItems:"center"},children:["Status p\xe9rim\xe8tre"," ",Object(T.jsxs)("span",{className:"status__span ".concat(v.perimeterStatus?v.perimeterStatus.replace(/ /g,"__"):"conforme","__span"),onClick:function(){return Oe(!0)},children:[v.perimeterStatus?v.perimeterStatus:"conforme"," ",Object(T.jsx)(x.a,{})]}),Object(T.jsx)(D.a,{style:{transform:"translate(156px, 100px)"},bottom:!0,open:be,setOpen:Oe,children:Object(T.jsx)(I.a,{children:J.map((function(e,t){return Object(T.jsx)(N.a,{onClick:function(){ve(e)},children:Object(T.jsxs)("span",{children:[e.name," ",e.icon]})},t)}))})})]}),Object(T.jsx)(B,{type:"perim\xe8tre",dataProject:fe}),Object(T.jsx)("h3",{style:{marginTop:"30px"},children:"\xc9v\xe8nements"}),Object(T.jsxs)("div",{className:"global__charts__container",children:[Object(T.jsx)(W,{events:Y,selector:"type",title:"Types"}),Object(T.jsx)(W,{events:Y,selector:"period",title:"P\xe9riodes"}),Object(T.jsx)(W,{events:Y,selector:"state",title:"\xc9tats"}),Object(T.jsx)(W,{events:Y,selector:"status",title:"Status"})]}),Object(T.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:"30px",marginBottom:"20px",gap:"12px"},children:[Object(T.jsxs)("h2",{className:"title__global",children:["Contributeurs (",null===v||void 0===v||null===(e=v.contributors)||void 0===e?void 0:e.length,")"," "]})," ",Object(T.jsxs)(y.a,{onClick:function(){return F(!0)},style:{height:"35px",gap:"8px"},children:["Ajouter ",Object(T.jsx)(O.a,{})]})]}),Object(T.jsx)("div",{className:"user__cards__container",children:null===v||void 0===v||null===(t=v.contributors)||void 0===t?void 0:t.map((function(e,t){return Object(T.jsx)(g.a,{dataProject:fe,usr:e},t)}))})]}),Object(T.jsx)(C,{dataProject:fe,alreadyExistingContributors:null===v||void 0===v?void 0:v.contributors,open:E,setOpen:F}),Object(T.jsx)(V,{open:H,setOpen:U,dataProject:fe}),Object(T.jsx)(z,{open:Z,setOpen:$,dataProject:fe})]}):Object(T.jsx)(h.a,{children:Object(T.jsx)(f.a,{size:"medium",reversed:!0})}):Object(T.jsx)(b.a,{to:"/404"})}}}]);
//# sourceMappingURL=6.8151c4aa.chunk.js.map