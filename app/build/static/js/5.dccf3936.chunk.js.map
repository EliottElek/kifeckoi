{"version":3,"sources":["materials/AutoSizeTextArea/AutoSizeTextArea.js","assets/ReactMarkdown.js","assets/functions/formatDate.js","components/GlobalInfos/UserCard/UserCard.js","components/Draggable/AutoCompleteUsers.js","components/Draggable/Card/Avatars.js","components/Draggable/Card/AddContributorsEvent.js","components/Draggable/Card/Comments/Comment.js","components/Draggable/Card/Comments/CommentForm/CommentForm.js","components/Draggable/Card/Comments/Comments.js","components/Draggable/Card/ModifAreaCard/ModifAreaCard.js","assets/functions/shortString.js","components/Draggable/Card/Card.js","components/Draggable/Column.js","components/Draggable/Row/Row.js","components/Draggable/EventKanban.js"],"names":["AutoTextArea","props","textAreaRef","useRef","useState","text","setText","textAreaHeight","setTextAreaHeight","parentHeight","setParentHeight","useEffect","current","scrollHeight","style","minHeight","display","alignItems","onFocus","e","currentTarget","setSelectionRange","value","length","ref","rows","margin","height","onChange","event","target","ReactMarkdownSnippet","children","remarkPlugins","remarkGfm","rehypePlugins","rehypeRaw","components","a","href","rel","onClick","stopPropagation","formatDate","date","hoursBool","day","parseInt","Date","getDate","month","getMonth","formated","getFullYear","d","minutes","getMinutes","hours","getHours","UserCard","usr","dataProject","dataEvents","modal","eventMode","useContext","Context","currentProject","user","openPopUp","setOpenPopUp","openDeleteModal","setOpenDeleteModal","useMutation","ADD_CONTRIBUTORS_TO_PROJECT","addContributors","ADD_CONTRIBUTORS_TO_EVENT","addContributorsEvents","id","useParams","handleDeleteContributor","allContributors","contributors","newContributors","filter","con","finalIds","map","r","variables","eventId","projectId","setTimeout","refetch","toast","success","position","POSITION","BOTTOM_LEFT","pauseOnHover","error","className","name","username","large","src","avatarUrl","firstname","lastname","email","open","setOpen","bottom","transform","data-tip","data-for","reversed","AutoCompleteUsers","setSelectedContributors","placeholder","multi","alreadyExistingContributors","users","customStyles","option","base","state","color","padding","cursor","singleValue","provided","opacity","isDisabled","transition","data","useQuery","GET_ALL_USERS","React","setContributors","getAllUsers","diff","a1","a2","arr","forEach","o1","found","o2","objectsEqual","push","subtractArrays","label","setData","closeMenuOnSelect","isMulti","styles","openMenuOnClick","selectedOptions","options","Avatars","toNotShow","i","Avatar","mini","alt","require","AddContributorsEvevent","selectedContributors","handleAddContributors","concat","ArrayOfIds","acc","Modal","marginTop","marginBottom","contributor","Button","Comment","comment","commentsData","CHANGE_COMMENT__CONTENT","changeCommentContent","DELETE_COMMENT","deleteComment","editMode","setEditMode","content","setContent","handleUpdateCommentContent","commentId","newContent","autoClose","hideProgressBar","closeOnClick","draggable","progress","undefined","handleDeleteComment","author","creation","oninput","ReactMarkdown","Popup","Menu","MenuItem","CommentForm","modifMode","setModifMode","CREATE_COMMENT","createComment","loading","handleInsertStyle","prev","onSumbitComment","authorId","Progress","size","autoFocus","gap","delayShow","effect","Comments","comments","ModifAreaCard","setValue","handleModifyDescription","fontSize","description","shortString","str","maxLength","side","ellipsis","slice","Card","setEvents","events","setCurrentProject","openModal","setOpenModal","openAddContributorModal","setOpenAddContributorModal","setComments","openEditPopUp","setOpenEditPopUp","submitOnEnterMode","setSubmitOnEnterMode","CHANGE_EVENT_DESCRIPTION","changeEventDescription","CHANGE_EVENT_STATUS","changeEventStatus","CHANGE_EVENT_STATE","changeEventState","DELETE_EVENT","deleteEvent","CREATE_EVENT","createEvent","task","setDescription","GET_ALL_COMMENTS_BY_EVENT_ID","onCompleted","getAllCommentsByEventId","newDescription","handleCloseModal","handleMoveTo","category","sourceColIndex","findIndex","title","status","destinationColIndex","sourceCol","destinationCol","sourceTask","tasks","destinationTask","index","splice","removed","removedCopy","newStatus","Msg","handleChangeState","newState","handledeleteEvent","type","duplicate","creatorId","period","getPeriod","newEvent","new","setLength","console","log","handleMoreAction","commentEnterSubmit","key","shiftKey","add","draggableId","snapshot","innerRef","draggableProps","dragHandleProps","isDragging","onSubmit","onKeyPress","maxCaractersCard","width","justifyContent","creator","marginRight","fontStyle","backgroundColor","AddContributorsEvent","Column","droppableId","setAddCard","section","setEventSelected","openMenu","setOpenMenu","Row","selectedEvents","setSelectedEvents","checked","setChecked","find","CheckBox","newSelected","ev","EventKanban","listStyle","addCard","selectAll","setSelectAll","openActionPopup","setOpenActionPopup","selectedAcountables","setSelectedcontributors","eventSelected","eventsData","setEventsData","input","setInput","DELETE_MULTIPLE_EVENTS","deleteMultipleEvents","FIND_PROJECT_BY_PROJECT_ID","userId","findProjectByProjectId","FIND_EVENTS_BY_PROJECT_ID","findEventsByProjectId","rawEvents","item","eventsFinal","eventsDataF","changeStateSelectedEvents","Flip","err","warning","onDragEnd","result","destination","source","items","Array","from","reorderedItem","handleDeleteSelectedEvents","ids","eventIds","response","message","preventDefault","fontWeight","zIndex","eve","droppableProps","disabled","Backdrop","to"],"mappings":"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","file":"static/js/5.dccf3936.chunk.js","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\n\nconst AutoTextArea = (props) => {\n  const textAreaRef = useRef(null);\n  const [text, setText] = useState(\"\");\n  const [textAreaHeight, setTextAreaHeight] = useState(\"auto\");\n  const [parentHeight, setParentHeight] = useState(\"auto\");\n\n  useEffect(() => {\n    if (textAreaRef) setParentHeight(`${textAreaRef.current.scrollHeight}px`);\n    setTextAreaHeight(`${textAreaRef.current.scrollHeight}px`);\n  }, [text]);\n\n  const onChangeHandler = (event) => {\n    setTextAreaHeight(\"auto\");\n    setParentHeight(`${textAreaRef.current.scrollHeight}px`);\n    setText(event.target.value);\n\n    if (props.onChange) {\n      props.onChange(event);\n    }\n  };\n\n  return (\n    <div\n      style={{\n        minHeight: parentHeight,\n        display: \"flex\",\n        alignItems: \"center\",\n      }}\n    >\n      <textarea\n        onFocus={(e) =>\n          e.currentTarget.setSelectionRange(\n            e.currentTarget.value.length,\n            e.currentTarget.value.length\n          )\n        }\n        {...props}\n        ref={textAreaRef}\n        rows={1}\n        style={{\n          ...props.style,\n          margin: 0,\n          height: textAreaHeight,\n        }}\n        onChange={onChangeHandler}\n      />\n    </div>\n  );\n};\n\nexport default AutoTextArea;\n","import ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport rehypeRaw from \"rehype-raw\";\n\nconst ReactMarkdownSnippet = ({ children }) => {\n  return (\n    <ReactMarkdown\n      remarkPlugins={[remarkGfm]}\n      rehypePlugins={[rehypeRaw]}\n      components={{\n        a: ({ children, href }) => {\n          return (\n            <a\n              href={href}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              {children}\n            </a>\n          );\n        },\n      }}\n    >\n      {children}\n    </ReactMarkdown>\n  );\n};\n\nexport default ReactMarkdownSnippet;\n\n// import { createElement } from \"react\";\n// import remark from \"remark-parse\";\n// import remark2rehype from \"remark-rehype\";\n// import rehypeRaw from \"rehype-raw\";\n// import { unified } from \"unified\";\n// import rehype2react from \"rehype-react\";\n\n// const ReactMarkdownSnippet = ({ children, components = {} }) => {\n//   components.a = (props) => {\n//     return (\n//       <a\n//         href={props.href}\n//         target=\"_blank\"\n//         rel=\"noreferrer\"\n//         onClick={(e) => e.stopPropagation()}\n//       >\n//         {props.children}\n//       </a>\n//     );\n//   };\n//   const processor = unified()\n//     .use(remark)\n//     .use(remark2rehype, { allowDangerousHtml: true })\n//     .use(rehypeRaw)\n//     .use(rehype2react, {\n//       components,\n//       createElement,\n//     });\n//   const result = processor.processSync(children).result;\n//   return <div>{result}</div>;\n// };\n// export default ReactMarkdownSnippet;\n","const formatDate = (date, hoursBool) => {\n  var day = parseInt(new Date(date).getDate());\n  var month = parseInt(new Date(date).getMonth()) + 1;\n  const year = parseInt(new Date(date).getFullYear());\n  if (day <= 9) day = \"0\" + day;\n  if (month <= 9) month = \"0\" + month;\n  let formated = day + \"/\" + month + \"/\" + year;\n  if (hoursBool) {\n    const d = new Date(date);\n    var minutes = d.getMinutes();\n    var hours = d.getHours();\n    if (minutes <= 9) minutes = \"0\" + minutes;\n    if (hours <= 9) hours = \"0\" + hours;\n    const time = hours + \":\" + minutes;\n    formated += \" \" + time;\n  }\n  return formated;\n};\nexport default formatDate;\n","import { useContext, useState } from \"react\";\nimport Avatar from \"../../../materials/Avatar/Avatar\";\nimport { Context } from \"../../Context/Context\";\nimport Button from \"../../../materials/Button/Button\";\nimport Modal from \"../../../materials/Modal/Modal\";\nimport Menu from \"../../../materials/Menu/Menu\";\nimport Popup from \"../../../materials/Popup/Popup\";\nimport MenuItem from \"../../../materials/Menu/MenuItem\";\nimport {\n  ADD_CONTRIBUTORS_TO_PROJECT,\n  ADD_CONTRIBUTORS_TO_EVENT,\n} from \"../../../graphql/mutations\";\nimport { toast } from \"react-toastify\";\nimport { FiMoreHorizontal } from \"react-icons/fi\";\nimport { MdOutlineClear } from \"react-icons/md\";\nimport { useMutation } from \"@apollo/client\";\nimport { useParams } from \"react-router\";\nimport \"./UserCard.scss\";\nconst UserCard = ({\n  usr,\n  dataProject,\n  dataEvents,\n  modal,\n  eventMode,\n  event,\n}) => {\n  const { currentProject, user } = useContext(Context);\n  const [openPopUp, setOpenPopUp] = useState(false);\n  const [openDeleteModal, setOpenDeleteModal] = useState(false);\n  const [addContributors] = useMutation(ADD_CONTRIBUTORS_TO_PROJECT);\n  const [addContributorsEvents] = useMutation(ADD_CONTRIBUTORS_TO_EVENT);\n\n  const { id } = useParams();\n  const handleDeleteContributor = async (e) => {\n    e.stopPropagation();\n    try {\n      const allContributors = currentProject.contributors;\n      const newContributors = allContributors.filter(\n        (con) => con.id !== usr.id\n      );\n      const finalIds = newContributors.map((r) => r.id);\n      if (eventMode)\n        await addContributorsEvents({\n          variables: {\n            eventId: event.id,\n            contributors: finalIds,\n          },\n        });\n      else\n        await addContributors({\n          variables: {\n            projectId: id,\n            contributors: finalIds,\n          },\n        });\n      dataEvents &&\n        setTimeout(() => {\n          dataEvents.refetch();\n        }, 200);\n      dataProject &&\n        setTimeout(() => {\n          dataProject.refetch();\n        }, 200);\n      toast.success(\"Contributeur supprimé avec succès.\", {\n        position: toast.POSITION.BOTTOM_LEFT,\n        pauseOnHover: false,\n      });\n      setOpenDeleteModal(false);\n    } catch (err) {\n      toast.error(\"Impossible de supprimer les contributeurs.\", {\n        position: toast.POSITION.BOTTOM_LEFT,\n        pauseOnHover: false,\n      });\n    }\n  };\n  return (\n    <>\n      <div className={\"user__card\"}>\n        {/* <img src={usr.avatarUrl} className={\"user__card__background\"} alt=\"\" /> */}\n        <Avatar name={usr.username} large src={usr.avatarUrl} />\n        <h5 className={\"user__card__name\"}>\n          {usr.firstname + \" \" + usr.lastname}\n        </h5>\n        <h6 className={\"user__card__username\"}>({usr.username})</h6>\n        <p className={\"user__card__email\"}>{usr.email}</p>\n        {user.id !== usr.id && !modal && (\n          <>\n            <button onClick={setOpenPopUp} className=\"delete__user__button\">\n              <FiMoreHorizontal />\n            </button>\n            <Popup\n              open={openPopUp}\n              setOpen={setOpenPopUp}\n              bottom\n              style={{\n                transform: \"translate(70%, -60%)\",\n              }}\n            >\n              <Menu>\n                {!eventMode && (\n                  <MenuItem\n                    onClick={(e) => {\n                      setOpenPopUp(false);\n                    }}\n                  >\n                    <p>Passer en administrateur</p>\n                  </MenuItem>\n                )}\n                <MenuItem\n                  onClick={(e) => {\n                    setOpenDeleteModal(true);\n                    setOpenPopUp(false);\n                  }}\n                >\n                  <p>Supprimer</p>\n                </MenuItem>\n              </Menu>\n            </Popup>\n          </>\n        )}\n      </div>\n      <Modal open={openDeleteModal} setOpen={setOpenDeleteModal}>\n        <div className=\"modal__content__container\">\n          <button\n            data-tip\n            data-for=\"closeTooltip\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenDeleteModal(false);\n            }}\n            className=\"close__modal__button\"\n          >\n            <MdOutlineClear />\n          </button>\n          <h3>Êtes-vous sûr de vouloir supprimer {usr.firstname} ?</h3>\n          <p>Vous pourrez le rajouter à un autre moment. </p>\n          <div className={\"delete__actions__container\"}>\n            <Button reversed onClick={() => setOpenDeleteModal(false)}>\n              Annuler\n            </Button>\n            <Button onClick={handleDeleteContributor}>Supprimer</Button>\n          </div>\n        </div>\n      </Modal>\n    </>\n  );\n};\n\nexport default UserCard;\n","import React from \"react\";\nimport { useQuery } from \"@apollo/client\";\nimport { GET_ALL_USERS } from \"../../graphql/queries\";\nimport Select from \"react-select\";\n\nconst AutoCompleteUsers = ({\n  setSelectedContributors,\n  placeholder,\n  multi,\n  alreadyExistingContributors,\n  users,\n}) => {\n  const customStyles = {\n    option: (base, state) => ({\n      ...base,\n      color: \"#1e2022\",\n      padding: \".5rem 3rem .5rem .5rem\",\n      cursor: \"pointer\",\n    }),\n    singleValue: (provided, state) => {\n      const opacity = state.isDisabled ? 0.5 : 1;\n      const transition = \"opacity 300ms\";\n\n      return { ...provided, opacity, transition };\n    },\n  };\n  const { data } = useQuery(GET_ALL_USERS);\n  const [contributors, setContributors] = React.useState([]);\n\n  React.useEffect(() => {\n    const setData = () => {\n      function objectsEqual(o1, o2) {\n        return o1.id === o2.id;\n      }\n\n      function subtractArrays(a1, a2) {\n        var arr = [];\n        if (!a1) return a2;\n        if (!a2) return a1;\n\n        a1.forEach((o1) => {\n          var found = false;\n          a2.forEach((o2) => {\n            if (objectsEqual(o1, o2)) {\n              found = true;\n            }\n          });\n          if (!found) {\n            arr.push(o1);\n          }\n        });\n        return arr;\n      }\n      if (data?.getAllUsers) {\n        var newUsers = [];\n        if (!users) newUsers = data?.getAllUsers;\n        else newUsers = users;\n        const finalUsers = newUsers.map((user) => {\n          return {\n            ...user,\n            label: user.username,\n            value: user.username,\n          };\n        });\n        const diff = subtractArrays(finalUsers, alreadyExistingContributors);\n        setContributors(diff);\n      }\n    };\n    setData();\n  }, [alreadyExistingContributors, data?.getAllUsers, setContributors, users]);\n  return (\n    <Select\n      closeMenuOnSelect={false}\n      isMulti={multi ? true : false}\n      placeholder={placeholder}\n      styles={customStyles}\n      openMenuOnClick={(e) => e.stopPropagation()}\n      onChange={(selectedOptions) => {\n        setSelectedContributors(selectedOptions);\n      }}\n      options={contributors}\n    />\n  );\n};\n\nexport default AutoCompleteUsers;\n","import Avatar from \"../../../materials/Avatar/Avatar\";\nimport \"./Avatars.css\";\nconst Avatars = ({ users }) => {\n  if (users?.length > 3) {\n    const toNotShow = users.length - 2;\n    return (\n      <span className=\"kanban__section__content__name__container\">\n        <span className=\"kanban__section__content__name__container__avatars__container\">\n          <div className={\"persons__left__indicator default_avatar\"}>\n            +{toNotShow}\n          </div>\n          {users?.map((user, i) => {\n            return user.avatarUrl && i < 2 ? (\n              <div\n                key={i}\n                className={\n                  i === users.length - 1 ? \"first_avatar\" : \"default_avatar\"\n                }\n              >\n                <Avatar name={user.firstname} mini src={user.avatarUrl} />\n              </div>\n            ) : (\n              i < 2 && (\n                <div\n                  key={i}\n                  className={\n                    i === users.length - 1 ? \"first_avatar\" : \"default_avatar\"\n                  }\n                >\n                  <img\n                    className=\"kanban__section__content__name__container__img\"\n                    alt=\"\"\n                    src={require(\"../../../assets/images/defaultAvatar.webp\")}\n                  />\n                </div>\n              )\n            );\n          })}\n        </span>\n      </span>\n    );\n  }\n  return (\n    <span className=\"kanban__section__content__name__container\">\n      <span className=\"kanban__section__content__name__container__avatars__container\">\n        {users?.map((user, i) => {\n          return (\n            user.avatarUrl && (\n              <div\n                key={i}\n                className={\n                  i === users.length - 1 ? \"first_avatar\" : \"default_avatar\"\n                }\n              >\n                <Avatar mini src={user.avatarUrl} name={user.firstname} />\n              </div>\n            )\n          );\n        })}\n      </span>\n    </span>\n  );\n};\n\nexport default Avatars;\n","import React from \"react\";\nimport AutoCompleteUsers from \"../../Draggable/AutoCompleteUsers\";\nimport Modal from \"../../../materials/Modal/Modal\";\nimport { MdOutlineClear } from \"react-icons/md\";\nimport UserCard from \"../../GlobalInfos/UserCard/UserCard\";\nimport Button from \"../../../materials/Button/Button\";\nimport { useMutation } from \"@apollo/client\";\nimport { ADD_CONTRIBUTORS_TO_EVENT } from \"../../../graphql/mutations\";\nimport { toast } from \"react-toastify\";\nconst AddContributorsEvevent = ({\n  event,\n  open,\n  setOpen,\n  dataEvents,\n  dataProject,\n  alreadyExistingContributors,\n}) => {\n  const [selectedContributors, setSelectedContributors] = React.useState([]);\n\n  const [addContributors] = useMutation(ADD_CONTRIBUTORS_TO_EVENT);\n  const handleAddContributors = async (e) => {\n    e.stopPropagation();\n    try {\n      let allContributors = [];\n      if (alreadyExistingContributors) {\n        allContributors =\n          alreadyExistingContributors.concat(selectedContributors);\n      } else {\n        allContributors = selectedContributors;\n      }\n      const ArrayOfIds = allContributors.map((acc) => acc.id);\n\n      await addContributors({\n        variables: {\n          eventId: event.id,\n          contributors: ArrayOfIds,\n        },\n      });\n      dataEvents.refetch();\n      dataProject.refetch();\n      setSelectedContributors([]);\n      toast.success(\"Contributeurs ajoutés avec succès.\", {\n        position: toast.POSITION.BOTTOM_LEFT,\n        pauseOnHover: false,\n      });\n    } catch (err) {\n      toast.error(\"Impossible d'ajouter les contributeurs.\", {\n        position: toast.POSITION.BOTTOM_LEFT,\n        pauseOnHover: false,\n      });\n    }\n    setOpen(false);\n  };\n  return (\n    <Modal open={open}>\n      <div className=\"modal__content__container\">\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            setOpen(false);\n          }}\n          className=\"close__modal__button\"\n        >\n          <MdOutlineClear />\n        </button>\n        <h2\n          className=\"title__global\"\n          style={{ marginTop: \"30px\", marginBottom: \"20px\" }}\n        >\n          Sélectionnez des contributeurs\n        </h2>\n        <AutoCompleteUsers\n          multi\n          placeholder=\"Cherchez un contributeur...\"\n          alreadyExistingContributors={alreadyExistingContributors}\n          setSelectedContributors={setSelectedContributors}\n        />\n        <div className={\"user__cards__container\"} style={{ marginTop: \"30px\" }}>\n          {alreadyExistingContributors?.map((contributor, i) => (\n            <UserCard\n              eventMode\n              event={event}\n              dataEvents={dataEvents}\n              usr={contributor}\n              key={i}\n            />\n          ))}\n          {selectedContributors?.map((contributor, i) => (\n            <UserCard\n              eventMode\n              event={event}\n              dataEvents={dataEvents}\n              usr={contributor}\n              key={i}\n            />\n          ))}\n        </div>\n        <div className=\"add__contributors__actions__container\">\n          <Button reversed onClick={() => setOpen(false)}>\n            Annuler\n          </Button>\n          <Button onClick={handleAddContributors}>Ajouter</Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default AddContributorsEvevent;\n","import React from \"react\";\nimport ReactMarkdownSnippet from \"../../../../assets/ReactMarkdown\";\nimport Avatar from \"../../../../materials/Avatar/Avatar\";\nimport \"./Comments.scss\";\nimport { FiMoreHorizontal } from \"react-icons/fi\";\nimport Popup from \"../../../../materials/Popup/Popup\";\nimport MenuItem from \"../../../../materials/Menu/MenuItem\";\nimport Menu from \"../../../../materials/Menu/Menu\";\nimport { toast } from \"react-toastify\";\nimport { useMutation } from \"@apollo/client\";\nimport AutoTextArea from \"../../../../materials/AutoSizeTextArea/AutoSizeTextArea\";\nimport {\n  CHANGE_COMMENT__CONTENT,\n  DELETE_COMMENT,\n} from \"../../../../graphql/mutations\";\nimport formatDate from \"../../../../assets/functions/formatDate\";\nimport { Context } from \"../../../Context/Context\";\nconst Comment = ({ comment, commentsData }) => {\n  const { user } = React.useContext(Context);\n  const [changeCommentContent] = useMutation(CHANGE_COMMENT__CONTENT);\n  const [deleteComment] = useMutation(DELETE_COMMENT);\n\n  const [openPopUp, setOpenPopUp] = React.useState(false);\n  const [editMode, setEditMode] = React.useState(false);\n  const [content, setContent] = React.useState(comment.content);\n\n  const handleUpdateCommentContent = async () => {\n    try {\n      await changeCommentContent({\n        variables: {\n          commentId: comment.id,\n          newContent: content,\n        },\n      });\n      commentsData.refetch();\n      toast.success(\"Commentaire modifié avec succès.\", {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n      });\n    } catch (err) {\n      toast.error(\"Impossible de modifier le commentaire.\", {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n      });\n    }\n  };\n  const handleDeleteComment = async () => {\n    try {\n      await deleteComment({\n        variables: {\n          commentId: comment.id,\n        },\n      });\n      commentsData.refetch();\n      toast.success(\"Commentaire supprimé avec succès.\", {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n      });\n    } catch (err) {\n      toast.error(\"Impossible de supprimer le commentaire.\", {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n      });\n    }\n  };\n  return (\n    <div className={editMode ? \"comment__item__edit__mode\" : \"comment__item\"}>\n      <Avatar\n        name={comment?.author?.firstname}\n        mini\n        src={comment?.author?.avatarUrl}\n      />\n      <div className={\"comment__item__div\"}>\n        <div className={\"comment__item__name__content\"}>\n          {comment?.author?.firstname} {comment?.author?.lastname}\n          <span className={\"comment__item__name__date\"}>\n            {formatDate(comment?.creation, true)}\n          </span>\n        </div>\n        <span className={\"span__content\"}>\n          {editMode ? (\n            <>\n              <AutoTextArea\n                value={content}\n                onChange={(e) => setContent(e.target.value)}\n                oninput='this.style.height = \"\";this.style.height = this.scrollHeight + \"px\"'\n                className={\"edit__comment__textarea\"}\n              />\n              <div className={\"edit__comment__action__container\"}>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleUpdateCommentContent();\n                    setEditMode(false);\n                  }}\n                  className={\"edit__comment__action__submit\"}\n                >\n                  Valider\n                </button>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setEditMode(false);\n                  }}\n                  className={\"edit__comment__action__cancel\"}\n                >\n                  Annuler\n                </button>\n              </div>\n            </>\n          ) : (\n            <ReactMarkdownSnippet>{comment?.content}</ReactMarkdownSnippet>\n          )}\n        </span>\n      </div>\n      {user.id === comment.author.id && (\n        <>\n          <button\n            className=\"more__button__comment\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenPopUp(true);\n            }}\n          >\n            <FiMoreHorizontal />\n          </button>\n          <Popup open={openPopUp} setOpen={setOpenPopUp}>\n            <Menu>\n              <MenuItem\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setEditMode(true);\n                  setOpenPopUp(false);\n                }}\n              >\n                <p>Modifier...</p>\n              </MenuItem>\n              <MenuItem\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleDeleteComment();\n                  setOpenPopUp(false);\n                }}\n              >\n                <p>Supprimer...</p>\n              </MenuItem>\n            </Menu>\n          </Popup>{\" \"}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Comment;\n","import React from \"react\";\nimport \"./CommentForm.scss\";\nimport {\n  AiOutlineUnorderedList,\n  AiOutlineItalic,\n  AiOutlineLink,\n} from \"react-icons/ai\";\nimport { useMutation } from \"@apollo/client\";\nimport { BiItalic } from \"react-icons/bi\";\nimport { BsTypeBold } from \"react-icons/bs\";\nimport AutoTextArea from \"../../../../../materials/AutoSizeTextArea/AutoSizeTextArea\";\nimport Button from \"../../../../../materials/Button/Button\";\nimport { toast } from \"react-toastify\";\nimport { CREATE_COMMENT } from \"../../../../../graphql/mutations\";\nimport { Context } from \"../../../../Context/Context\";\nimport Avatar from \"../../../../../materials/Avatar/Avatar\";\nimport ReactTooltip from \"react-tooltip\";\nimport Progress from \"../../../../../materials/Progress/Progress\";\nconst CommentForm = ({ commentsData, dataEvents, event }) => {\n  const [modifMode, setModifMode] = React.useState(false);\n  const [createComment, { loading }] = useMutation(CREATE_COMMENT);\n  const [content, setContent] = React.useState(\"\");\n  const { user } = React.useContext(Context);\n  const handleInsertStyle = (style) => {\n    if (style === \"bold\") {\n      setContent((prev) => prev + \" **bold** \");\n    } else if (style === \"italic\") {\n      setContent((prev) => prev + \" *italic* \");\n    } else if (style === \"italic&bold\") {\n      setContent((prev) => prev + \" ***italic and bold*** \");\n    } else if (style === \"h1\") {\n      setContent((prev) =>\n        prev === \"\" ? \"# title 1\" : prev + \"\\n # title 1 \"\n      );\n    } else if (style === \"h2\") {\n      setContent((prev) =>\n        prev === \"\" ? \"## title 2\" : prev + \"\\n ## title 2 \"\n      );\n    } else if (style === \"h3\") {\n      setContent((prev) =>\n        prev === \"\" ? \"### title 3\" : prev + \"\\n ### title 3 \"\n      );\n    } else if (style === \"list\") {\n      setContent((prev) =>\n        prev === \"\"\n          ? \"- item 1 \\n - item 2 \\n - item 3\"\n          : prev + \"\\n - item 1 \\n - item 2 \\n - item 3\"\n      );\n    } else if (style === \"link\") {\n      setContent((prev) => prev + \" [text](url) \");\n    }\n  };\n\n  const onSumbitComment = async (e) => {\n    e.stopPropagation();\n    if (content === \"\") return;\n    try {\n      await createComment({\n        variables: {\n          eventId: event.id,\n          authorId: user.id,\n          content: content,\n        },\n      });\n      commentsData.refetch();\n      setContent(\"\");\n    } catch (e) {\n      toast.error(\"Impossible de créer le commentaire.\", {\n        position: toast.POSITION.BOTTOM_LEFT,\n        pauseOnHover: false,\n      });\n    }\n  };\n  if (loading) {\n    return (\n      <span style={{ display: \"flex\", alignItems: \"center\" }}>\n        <Progress size=\"small\" /> Envoi...\n      </span>\n    );\n  } else if (commentsData.loading) {\n    return (\n      <span style={{ display: \"flex\", alignItems: \"center\" }}>\n        <Progress size=\"small\" /> Réception...\n      </span>\n    );\n  } else if (dataEvents.loading) {\n    return (\n      <span style={{ display: \"flex\", alignItems: \"center\" }}>\n        <Progress size=\"small\" /> Réception...\n      </span>\n    );\n  }\n  if (modifMode)\n    return (\n      <div className={\"edit__block__container__comment\"}>\n        <div className=\"edit__block__actions__container\">\n          <button\n            data-tip\n            data-for=\"h1Tooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"h1\")}\n          >\n            <h1>h1</h1>\n          </button>\n          <button\n            data-tip\n            data-for=\"h2Tooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"h2\")}\n          >\n            <h2>h2</h2>\n          </button>\n          <button\n            data-tip\n            data-for=\"h3Tooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"h3\")}\n          >\n            <h3>h3</h3>\n          </button>\n          <button\n            data-tip\n            data-for=\"boldTooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"bold\")}\n          >\n            <BsTypeBold />\n          </button>\n          <button\n            data-tip\n            data-for=\"italicTooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"italic\")}\n          >\n            <AiOutlineItalic />\n          </button>\n          <button\n            data-tip\n            data-for=\"bolditalicTooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"italic&bold\")}\n          >\n            <BiItalic />\n          </button>\n          <button\n            data-tip\n            data-for=\"listTooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"list\")}\n          >\n            <AiOutlineUnorderedList />\n          </button>\n          <button\n            data-tip\n            data-for=\"linkTooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"link\")}\n          >\n            <AiOutlineLink />\n          </button>\n        </div>\n        <AutoTextArea\n          autoFocus\n          className=\"modif__textarea\"\n          value={content}\n          placeholder={\"Votre commentaire...\"}\n          onChange={(e) => setContent(e.target.value)}\n        />\n        <div\n          style={{\n            display: \"flex\",\n            gap: \"4px\",\n            margin: \"4px\",\n            marginTop: \"8px\",\n          }}\n        >\n          <Button\n            onClick={(e) => {\n              e.stopPropagation();\n              setModifMode(false);\n            }}\n            reversed\n            style={{ height: \"30px\" }}\n          >\n            Annuler\n          </Button>\n          <Button\n            onClick={(e) => {\n              onSumbitComment(e);\n              setModifMode(false);\n            }}\n            style={{ height: \"30px\" }}\n          >\n            Envoyer le commentaire\n          </Button>\n        </div>\n        <ReactTooltip delayShow={500} id=\"h1Tooltip\" effect=\"solid\">\n          <span>Grand titre</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"h2Tooltip\" effect=\"solid\">\n          <span>Moyen titre</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"h3Tooltip\" effect=\"solid\">\n          <span>Petit titre</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"boldTooltip\" effect=\"solid\">\n          <span>Gras</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"italicTooltip\" effect=\"solid\">\n          <span>Italique</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"bolditalicTooltip\" effect=\"solid\">\n          <span>Gras + italique</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"listTooltip\" effect=\"solid\">\n          <span>Liste</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"linkTooltip\" effect=\"solid\">\n          <span>Lien</span>\n        </ReactTooltip>\n      </div>\n    );\n  else\n    return (\n      <div\n        onClick={(e) => {\n          e.stopPropagation();\n          setModifMode(true);\n        }}\n        className=\"paragraph__textarea__comment\"\n      >\n        <Avatar\n          style={{ margin: \"12px\" }}\n          name=\"Vous\"\n          src={user.avatarUrl}\n          mini\n        />\n        <span className=\"comment__cta__span\">\n          {user.firstname}, un commentaire ?...{\" \"}\n        </span>\n      </div>\n    );\n};\n\nexport default CommentForm;\n","import Progress from \"../../../../materials/Progress/Progress\";\nimport Comment from \"./Comment\";\nimport CommentForm from \"./CommentForm/CommentForm\";\nimport \"./Comments.scss\";\n\nconst Comments = ({ comments, event, commentsData, dataEvents }) => {\n  return (\n    <div className=\"comments__container\">\n      <h3>Commentaires ({comments?.length})</h3>\n      {comments.map((comment, i) => (\n        <Comment key={i} comment={comment} commentsData={commentsData} />\n      ))}\n      {commentsData.loading || dataEvents.loading ? (\n        <span style={{ display: \"flex\", alignItems: \"center\" }}>\n          <Progress size=\"small\" /> Réception...\n        </span>\n      ) : (\n        <CommentForm\n          commentsData={commentsData}\n          dataEvents={dataEvents}\n          event={event}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Comments;\n","import React from \"react\";\nimport \"../../../GlobalInfos/ModifTextArea/ModifTextArea.scss\";\nimport {\n  AiOutlineUnorderedList,\n  AiOutlineItalic,\n  AiOutlineLink,\n} from \"react-icons/ai\";\nimport { BiItalic } from \"react-icons/bi\";\nimport { BsTypeBold } from \"react-icons/bs\";\nimport AutoTextArea from \"../../../../materials/AutoSizeTextArea/AutoSizeTextArea\";\nimport Button from \"../../../../materials/Button/Button\";\nimport ReactMarkdownSnippet from \"../../../../assets/ReactMarkdown\";\nimport ReactTooltip from \"react-tooltip\";\nconst ModifAreaCard = ({\n  event,\n  value,\n  setValue,\n  handleModifyDescription,\n  placeholder,\n}) => {\n  const [modifMode, setModifMode] = React.useState(false);\n\n  const handleInsertStyle = (style) => {\n    if (style === \"bold\") {\n      setValue((prev) => prev + \" **bold** \");\n    } else if (style === \"italic\") {\n      setValue((prev) => prev + \" *italic* \");\n    } else if (style === \"italic&bold\") {\n      setValue((prev) => prev + \" ***italic and bold*** \");\n    } else if (style === \"h1\") {\n      setValue((prev) => (prev === \"\" ? \"# title 1\" : prev + \"\\n # title 1 \"));\n    } else if (style === \"h2\") {\n      setValue((prev) =>\n        prev === \"\" ? \"## title 2\" : prev + \"\\n ## title 2 \"\n      );\n    } else if (style === \"h3\") {\n      setValue((prev) =>\n        prev === \"\" ? \"### title 3\" : prev + \"\\n ### title 3 \"\n      );\n    } else if (style === \"list\") {\n      setValue((prev) =>\n        prev === \"\"\n          ? \"- item 1 \\n - item 2 \\n - item 3\"\n          : prev + \"\\n - item 1 \\n - item 2 \\n - item 3\"\n      );\n    } else if (style === \"link\") {\n      setValue((prev) => prev + \" [text](url) \");\n    }\n  };\n  if (modifMode)\n    return (\n      <div className={\"edit__block__container\"}>\n        <div className=\"edit__block__actions__container\">\n          <button\n            data-tip\n            data-for=\"h1Tooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"h1\")}\n          >\n            <h1>h1</h1>\n          </button>\n          <button\n            data-tip\n            data-for=\"h2Tooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"h2\")}\n          >\n            <h2>h2</h2>\n          </button>\n          <button\n            data-tip\n            data-for=\"h3Tooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"h3\")}\n          >\n            <h3>h3</h3>\n          </button>\n          <button\n            data-tip\n            data-for=\"boldTooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"bold\")}\n          >\n            <BsTypeBold />\n          </button>\n          <button\n            data-tip\n            data-for=\"italicTooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"italic\")}\n          >\n            <AiOutlineItalic />\n          </button>\n          <button\n            data-tip\n            data-for=\"bolditalicTooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"italic&bold\")}\n          >\n            <BiItalic />\n          </button>\n          <button\n            data-tip\n            data-for=\"listTooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"list\")}\n          >\n            <AiOutlineUnorderedList />\n          </button>\n          <button\n            data-tip\n            data-for=\"linkTooltip\"\n            className=\"edit__button\"\n            onClick={() => handleInsertStyle(\"link\")}\n          >\n            <AiOutlineLink />\n          </button>\n        </div>\n        <AutoTextArea\n          autoFocus\n          style={{ fontSize: \"1rem\" }}\n          className=\"modif__textarea\"\n          value={value}\n          placeholder={placeholder}\n          onChange={(e) => setValue(e.target.value)}\n        />\n        <div\n          style={{\n            display: \"flex\",\n            gap: \"4px\",\n            margin: \"4px\",\n            marginTop: \"8px\",\n          }}\n        >\n          <Button\n            onClick={(e) => {\n              e.stopPropagation();\n              setModifMode(false);\n            }}\n            reversed\n            style={{ height: \"30px\" }}\n          >\n            Annuler\n          </Button>\n          <Button\n            onClick={(e) => {\n              handleModifyDescription(e);\n              setModifMode(false);\n            }}\n            style={{ height: \"30px\" }}\n          >\n            Valider\n          </Button>\n        </div>\n        <ReactTooltip delayShow={500} id=\"h1Tooltip\" effect=\"solid\">\n          <span>Grand titre</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"h2Tooltip\" effect=\"solid\">\n          <span>Moyen titre</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"h3Tooltip\" effect=\"solid\">\n          <span>Petit titre</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"boldTooltip\" effect=\"solid\">\n          <span>Gras</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"italicTooltip\" effect=\"solid\">\n          <span>Italique</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"bolditalicTooltip\" effect=\"solid\">\n          <span>Gras + italique</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"listTooltip\" effect=\"solid\">\n          <span>Liste</span>\n        </ReactTooltip>\n        <ReactTooltip delayShow={500} id=\"linkTooltip\" effect=\"solid\">\n          <span>Lien</span>\n        </ReactTooltip>\n      </div>\n    );\n  else\n    return (\n      <div\n        onClick={(e) => {\n          e.stopPropagation();\n          setModifMode(true);\n        }}\n        className=\"modif__textarea__paragraph\"\n      >\n        <ReactMarkdownSnippet>{event.description}</ReactMarkdownSnippet>\n      </div>\n    );\n};\n\nexport default ModifAreaCard;\n","const shortString = (\n  str,\n  maxLength,\n  { side = \"end\", ellipsis = \"...\" } = {}\n) => {\n  if (str?.length > maxLength) {\n    switch (side) {\n      case \"start\":\n        return ellipsis + str.slice(-(maxLength - ellipsis.length));\n      case \"end\":\n      default:\n        return str.slice(0, maxLength - ellipsis.length) + ellipsis;\n    }\n  }\n  return str;\n};\n\nexport default shortString;\n","import { useContext, useState } from \"react\";\nimport \"./Card.scss\";\nimport \"../kanban.scss\";\nimport \"../../Client/RecentEvents/RecentEvents.css\";\nimport \"../../GlobalInfos/GlobalInfos.scss\";\nimport { FiEdit2 } from \"react-icons/fi\";\nimport { BiTime } from \"react-icons/bi\";\nimport { MdOutlineClear } from \"react-icons/md\";\nimport { MdOutlineDeleteOutline } from \"react-icons/md\";\nimport { AiOutlineCheck } from \"react-icons/ai\";\nimport { FiMoreVertical, FiMoreHorizontal } from \"react-icons/fi\";\nimport { FaRegComments } from \"react-icons/fa\";\nimport { HiOutlineDuplicate } from \"react-icons/hi\";\nimport { ImWarning } from \"react-icons/im\";\nimport { AiOutlineCheckCircle, AiFillInfoCircle } from \"react-icons/ai\";\nimport { BsPeopleFill } from \"react-icons/bs\";\nimport Modal from \"../../../materials/Modal/Modal\";\nimport ReactTooltip from \"react-tooltip\";\nimport Avatars from \"./Avatars\";\nimport AddContributorsEvent from \"./AddContributorsEvent\";\nimport {\n  CHANGE_EVENT_DESCRIPTION,\n  CHANGE_EVENT_STATUS,\n  CHANGE_EVENT_STATE,\n  DELETE_EVENT,\n  CREATE_EVENT,\n} from \"../../../graphql/mutations\";\nimport { Draggable } from \"react-beautiful-dnd\";\nimport { GET_ALL_COMMENTS_BY_EVENT_ID } from \"../../../graphql/queries\";\nimport { Context } from \"../../Context/Context\";\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport Popup from \"../../../materials/Popup/Popup\";\nimport { toast } from \"react-toastify\";\nimport { useParams } from \"react-router\";\nimport MenuItem from \"../../../materials/Menu/MenuItem\";\nimport Menu from \"../../../materials/Menu/Menu\";\nimport AutoTextArea from \"../../../materials/AutoSizeTextArea/AutoSizeTextArea\";\nimport ReactMarkdown from \"../../../assets/ReactMarkdown\";\nimport Progress from \"../../../materials/Progress/Progress\";\nimport Comments from \"./Comments/Comments\";\nimport Button from \"../../../materials/Button/Button\";\nimport ModifAreaCard from \"./ModifAreaCard/ModifAreaCard\";\nimport shortString from \"../../../assets/functions/shortString\";\nimport getPeriod from \"../../../assets/functions/getPeriod\";\nimport Avatar from \"../../../materials/Avatar/Avatar\";\nimport formatDate from \"../../../assets/functions/formatDate\";\nconst Card = (props) => {\n  const { setEvents, events, currentProject, setCurrentProject, user } =\n    useContext(Context);\n  const [openModal, setOpenModal] = useState(false);\n  const [openDeleteModal, setOpenDeleteModal] = useState(false);\n  const [openAddContributorModal, setOpenAddContributorModal] = useState(false);\n  const [modifMode, setModifMode] = useState(false);\n  const [openPopUp, setOpenPopUp] = useState(false);\n  const [comments, setComments] = useState([]);\n  const [openEditPopUp, setOpenEditPopUp] = useState(false);\n  const [submitOnEnterMode, setSubmitOnEnterMode] = useState(false);\n  const [changeEventDescription] = useMutation(CHANGE_EVENT_DESCRIPTION);\n  const [changeEventStatus] = useMutation(CHANGE_EVENT_STATUS);\n  const [changeEventState] = useMutation(CHANGE_EVENT_STATE);\n  const [deleteEvent] = useMutation(DELETE_EVENT);\n  const [createEvent] = useMutation(CREATE_EVENT);\n  const [description, setDescription] = useState(props.task.description);\n\n  const { id } = useParams();\n  const commentsData = useQuery(GET_ALL_COMMENTS_BY_EVENT_ID, {\n    variables: { eventId: props.task.id },\n    onCompleted: (data) => {\n      setComments(data?.getAllCommentsByEventId);\n    },\n  });\n  const handleModifyDescription = async (e) => {\n    e.stopPropagation();\n    try {\n      await changeEventDescription({\n        variables: {\n          eventId: props.task.id,\n          newDescription: description,\n        },\n      });\n      props.dataEvents.refetch();\n      setModifMode(false);\n    } catch (err) {\n      toast.error(\"Impossible de modifier la description.\", {\n        position: toast.POSITION.BOTTOM_LEFT,\n        pauseOnHover: false,\n      });\n    }\n  };\n  const handleCloseModal = () => {\n    setModifMode(false);\n    setOpenModal(false);\n  };\n  const handleMoveTo = async (category) => {\n    try {\n      const sourceColIndex = events.findIndex(\n        (e) => e.title === props.task.status\n      );\n      const destinationColIndex = events.findIndex((e) => e.id === category.id);\n      const sourceCol = events[sourceColIndex];\n      const destinationCol = events[destinationColIndex];\n      const sourceTask = [...sourceCol.tasks];\n      const destinationTask = [...destinationCol.tasks];\n      const index = sourceTask.findIndex((task) => task.id === props.task.id);\n      const [removed] = sourceTask.splice(index, 1);\n      const removedCopy = { ...removed };\n      removedCopy.status = destinationCol?.title;\n      events[sourceColIndex].tasks = sourceTask;\n      events[destinationColIndex].tasks = destinationTask;\n      destinationTask.splice(0, 0, removedCopy);\n\n      events[sourceColIndex].tasks = sourceTask;\n      events[destinationColIndex].tasks = destinationTask;\n      await changeEventStatus({\n        variables: {\n          eventId: props.task.id,\n          newStatus: category?.title,\n        },\n      });\n      props.dataEvents.refetch();\n\n      toast(\n        <Msg>\n          {props.task.name} déplacée dans {category?.title}\n        </Msg>,\n        {\n          position: \"bottom-left\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: false,\n          draggable: false,\n          progress: undefined,\n        }\n      );\n      setOpenPopUp(false);\n    } catch (err) {\n      toast.error(\"Impossible de déplacer l'évènement.\", {\n        position: toast.POSITION.BOTTOM_LEFT,\n        pauseOnHover: false,\n      });\n    }\n    setEvents([...events]);\n    currentProject.events = [...events];\n    setCurrentProject(currentProject);\n  };\n  const handleChangeState = async (newState) => {\n    if (props.task.state === newState) return;\n    try {\n      await changeEventState({\n        variables: {\n          eventId: props.task.id,\n          newState: newState,\n        },\n      });\n      props.dataEvents.refetch();\n    } catch {\n      toast.error(\"Impossible de changer l'état de cette cart.\", {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n      });\n    }\n  };\n  const handledeleteEvent = async (e) => {\n    e.stopPropagation();\n    try {\n      await deleteEvent({\n        variables: {\n          eventId: props.task.id,\n        },\n      });\n      setModifMode(false);\n      props.dataEvents.refetch();\n\n      toast(`${props.type} archivé(e) avec succès.`, {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n      });\n    } catch (err) {\n      toast.error(\"Impossible de supprimer cette carte. Réessayez plus tard.\", {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n      });\n    }\n  };\n  const duplicate = async (e) => {\n    e.stopPropagation();\n    try {\n      const ArrayOfIds = props?.task?.contributors?.map((acc) => acc.id);\n\n      const newEvent = await createEvent({\n        variables: {\n          type: props.type,\n          projectId: id,\n          description: props.task.description,\n          contributors: ArrayOfIds,\n          creatorId: user.id,\n          period: getPeriod(),\n          status: props.task.status,\n        },\n      });\n      const index = events.findIndex(\n        (event) => event.title === props.task.status\n      );\n      events[index].tasks.splice(events[index] + 1, 0, {\n        ...newEvent?.data?.createEvent,\n        new: true,\n      });\n      props.dataEvents.refetch();\n\n      props.setLength && props.setLength(props.length + 1);\n      toast(\n        `${\n          newEvent?.data?.createEvent\n            ? newEvent?.data?.createEvent.type\n            : \"Évenement\"\n        } dupliqué(e) avec succès.`,\n        {\n          position: \"bottom-left\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: false,\n          draggable: false,\n          progress: undefined,\n        }\n      );\n    } catch (err) {\n      console.log(err);\n      toast.error(`Impossible de créer l'évènement.`, {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n      });\n    }\n  };\n\n  const handleMoreAction = (e) => {\n    e.stopPropagation();\n    setOpenPopUp(true);\n  };\n  const commentEnterSubmit = (e) => {\n    if (submitOnEnterMode && e.key === \"Enter\" && e.shiftKey === false) {\n      return handleModifyDescription(e);\n    }\n  };\n  if (props.add) return <div className=\"card\">{props.children}</div>;\n  const Msg = ({ children }) => <div>{children}</div>;\n  return (\n    <div\n      className={\"card\"}\n      onClick={() => {\n        if (!openPopUp) {\n          setOpenModal(true);\n        } else setOpenPopUp(false);\n      }}\n    >\n      <Draggable\n        key={props?.task?.id}\n        draggableId={props?.task?.id}\n        index={props?.index}\n      >\n        {(provided, snapshot) => (\n          <div\n            ref={provided.innerRef}\n            {...provided.draggableProps}\n            {...provided.dragHandleProps}\n            style={{\n              ...provided.draggableProps.style,\n            }}\n          >\n            <div\n              className={\n                snapshot.isDragging ? \"card__content dragging\" : \"card__content\"\n              }\n            >\n              <div\n                className={\n                  props.task.state === \"Vérifié\"\n                    ? `status__indicator__verified`\n                    : `status__indicator__to-verify`\n                }\n              />\n              <div className=\"card__content__events__container\">\n                <button\n                  data-tip\n                  data-for=\"archiveTooltip\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setOpenDeleteModal(true);\n                  }}\n                  className=\"kanban__section__content__name__container__edit__button\"\n                >\n                  <MdOutlineDeleteOutline />\n                </button>\n                <button\n                  data-tip\n                  data-for=\"duplicateTooltip\"\n                  onClick={duplicate}\n                  className=\"kanban__section__content__name__container__edit__button more__button\"\n                >\n                  <HiOutlineDuplicate />\n                </button>\n                <button\n                  data-tip\n                  data-for=\"moreTooltip\"\n                  onClick={handleMoreAction}\n                  className=\"kanban__section__content__name__container__edit__button more__button\"\n                >\n                  <FiMoreVertical />\n                </button>\n                <span className=\"kanban__section__content__name__container__comments__indicator\">\n                  <span className=\"kanban__section__content__name__container__comments__indicator__number\">\n                    {comments?.length}\n                  </span>\n                  <FaRegComments />\n                </span>\n              </div>\n              <div className={\"card__content__added__indicator\"}>\n                {modifMode ? (\n                  <div className=\"kanban__section__content__name__container__button__container\">\n                    <button\n                      data-tip\n                      data-for=\"moreTooltip\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setOpenEditPopUp(true);\n                      }}\n                      className=\"kanban__section__content__name__container__edit__button more__button\"\n                    >\n                      <FiMoreHorizontal />\n                    </button>\n                    <Popup\n                      open={openEditPopUp}\n                      setOpen={setOpenEditPopUp}\n                      bottom\n                    >\n                      <Menu>\n                        <MenuItem\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            setSubmitOnEnterMode(!submitOnEnterMode);\n                            setOpenEditPopUp(false);\n                          }}\n                        >\n                          <p>\n                            {submitOnEnterMode\n                              ? \"Désactiver la soumission rapide...\"\n                              : \"Activer la soumission rapide...\"}\n                          </p>\n                        </MenuItem>\n                      </Menu>\n                    </Popup>\n                    <button\n                      data-tip\n                      data-for=\"validateTooltip\"\n                      onClick={handleModifyDescription}\n                      className=\"kanban__section__content__name__container__edit__button validate\"\n                    >\n                      <AiOutlineCheck />\n                    </button>\n                    <button\n                      data-tip\n                      data-for=\"cancelTooltip\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setModifMode(false);\n                      }}\n                      className=\"kanban__section__content__name__container__edit__button\"\n                    >\n                      <MdOutlineClear />\n                    </button>\n                  </div>\n                ) : (\n                  <button\n                    data-tip\n                    data-for=\"editTooltip\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setModifMode(true);\n                    }}\n                    className=\"kanban__section__content__name__container__edit__button\"\n                  >\n                    <FiEdit2 />\n                  </button>\n                )}\n              </div>\n              <span\n                data-tip\n                data-for=\"periodTooltip\"\n                className={`card__icon ${\n                  props.task.period === getPeriod()\n                    ? \"current__period\"\n                    : \"previous__period\"\n                }`}\n              >\n                {props.task.period}\n              </span>\n              {props.task.state === \"Vérifié\" && !modifMode && (\n                <span\n                  data-tip\n                  data-for=\"periodTooltip\"\n                  className={`card__status__verified`}\n                >\n                  {props.task.state}\n                  <AiOutlineCheck color=\"var(--check-color)\" />\n                </span>\n              )}\n              {props.task.state === \"À vérifier\" && !modifMode && (\n                <span\n                  data-tip\n                  data-for=\"periodTooltip\"\n                  className={`card__status__to__verify`}\n                >\n                  {props.task.state} <BiTime color=\"var(--warning-color)\" />\n                </span>\n              )}\n              {modifMode ? (\n                <form\n                  className=\"modif__description__form\"\n                  onSubmit={handleModifyDescription}\n                >\n                  <AutoTextArea\n                    autoFocus\n                    onKeyPress={commentEnterSubmit}\n                    onChange={(e) => setDescription(e.target.value)}\n                    onClick={(e) => e.stopPropagation()}\n                    value={description}\n                    className=\"modif__description__textarea\"\n                  ></AutoTextArea>\n                </form>\n              ) : (\n                <div className=\"card__description\">\n                  <ReactMarkdown>\n                    {shortString(props.task.description, user.maxCaractersCard)}\n                  </ReactMarkdown>\n                </div>\n              )}\n              <Avatars users={props.task.contributors} />\n              {props.task.status === \"Réalisé\" && (\n                <span className=\"card__done__span\">\n                  <AiOutlineCheckCircle />\n                </span>\n              )}\n            </div>\n          </div>\n        )}\n      </Draggable>\n      <Modal open={openModal} setOpen={handleCloseModal}>\n        <div className=\"modal__content__container\">\n          <div className=\"period__title__modal__container\">\n            <span\n              data-tip\n              data-for=\"periodTooltip\"\n              className={`period__title__modal ${\n                props.task.period === getPeriod()\n                  ? \"current__period\"\n                  : \"previous__period\"\n              }`}\n            >\n              {props.task.period}{\" \"}\n            </span>\n            {props.task.period !== getPeriod() ? (\n              <span className=\"period__title__modal__warning__message\">\n                <ImWarning color=\"var(--warning-color)\" /> Cet évènement ne date\n                pas de cette semaine.\n              </span>\n            ) : (\n              <span className=\"period__title__modal__warning__message\">\n                <AiOutlineCheckCircle\n                  color=\"var(--check-color)\"\n                  fontSize={\"1.2rem\"}\n                />{\" \"}\n                Cet évènement a été créé cette semaine.\n              </span>\n            )}\n          </div>\n          <div\n            style={{\n              marginTop: \"38px\",\n              display: \"flex\",\n              width: \"100%\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"12px\" }}>\n              <h2 className={\"status__title__modal\"}>{props.task.status}</h2>\n              {props.task.state === \"Vérifié\" && !modifMode && (\n                <span\n                  data-tip\n                  data-for=\"periodTooltip\"\n                  className={`modal__card__status__verified`}\n                >\n                  {props.task.state}\n                  <AiOutlineCheck color=\"var(--check-color)\" />\n                </span>\n              )}\n              {props.task.state === \"À vérifier\" && !modifMode && (\n                <span\n                  data-tip\n                  data-for=\"periodTooltip\"\n                  className={`modal__card__status__to__verify`}\n                >\n                  {props.task.state} <BiTime color=\"var(--warning-color)\" />\n                </span>\n              )}\n            </div>\n          </div>\n          <span className=\"date__creator__span\">\n            <span>Le {formatDate(props.task.creation)}</span>\n            {props.task.creator && (\n              <span>\n                {\" \"}\n                par {props.task.creator.firstname} {props.task.creator.lastname}\n              </span>\n            )}\n          </span>\n          <button\n            data-tip\n            data-for=\"closeTooltip\"\n            onClick={(e) => {\n              e.stopPropagation();\n              handleCloseModal();\n              setModifMode(false);\n            }}\n            className=\"close__modal__button\"\n          >\n            <MdOutlineClear />\n          </button>\n          <ModifAreaCard\n            event={props.task}\n            value={description}\n            setValue={setDescription}\n            handleModifyDescription={handleModifyDescription}\n            placeholder={\"La carte doit avoir une description...\"}\n          />\n          {props?.task?.contributors?.length !== 0 && (\n            <div style={{ marginTop: \"20px\" }}>\n              <h3 style={{ marginBottom: \"6px\" }}>Contributeurs</h3>\n              <div className=\"kanban__section__content__name__container__avatars__container\">\n                {props?.task?.contributors?.map((acc, i) => (\n                  <Avatar name={acc.username} src={acc.avatarUrl} key={i} />\n                ))}\n              </div>\n            </div>\n          )}\n          {!comments ? (\n            <Progress />\n          ) : (\n            <Comments\n              commentsData={commentsData}\n              comments={comments}\n              dataEvents={props.dataEvents}\n              event={props.task}\n            />\n          )}\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: \"4px\",\n              marginRight: \"4px\",\n            }}\n          >\n            <Button\n              style={{ height: \"35px\", display: \"flex\", gap: \"4px\" }}\n              reversed\n              onClick={(e) => {\n                e.stopPropagation();\n                setOpenModal(false);\n                setOpenAddContributorModal(true);\n                // setOpenModal(false);\n              }}\n            >\n              Gérer les contributeurs <BsPeopleFill fontSize={\"1.2rem\"} />\n            </Button>\n            <Button\n              style={{ height: \"35px\", display: \"flex\", gap: \"4px\" }}\n              reversed\n              onClick={(e) => {\n                e.stopPropagation();\n                setOpenModal(false);\n                setOpenDeleteModal(true);\n              }}\n            >\n              Supprimer <MdOutlineDeleteOutline fontSize={\"1.2rem\"} />\n            </Button>\n          </div>\n          <h3 style={{ display: \"flex\", alignItems: \"center\", gap: \"6px\" }}>\n            <AiFillInfoCircle /> Informations\n          </h3>\n          <p style={{ fontStyle: \"italic\" }}>\n            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed\n            convallis nibh non lorem vulputate egestas. Sed leo odio, dignissim\n            ac sollicitudin eget, vehicula nec dui. Praesent in lorem ut augue\n            lobortis suscipit.\n          </p>\n        </div>\n      </Modal>\n      <Popup open={openPopUp} setOpen={setOpenPopUp} bottom>\n        <Menu>\n          <MenuItem\n            style={{ backgroundColor: \"green\" }}\n            onClick={(e) => {\n              e.stopPropagation();\n              handleChangeState(\"Vérifié\");\n              setOpenPopUp(false);\n            }}\n          >\n            <p>Vérifié</p>\n          </MenuItem>\n          <MenuItem\n            style={{ backgroundColor: \"red\" }}\n            onClick={(e) => {\n              e.stopPropagation();\n              handleChangeState(\"À vérifier\");\n              setOpenPopUp(false);\n            }}\n          >\n            <p>À vérifier</p>\n          </MenuItem>\n          <span className={\"divider\"} />\n          <MenuItem\n            onClick={(e) => {\n              setOpenModal(true);\n              setOpenPopUp(false);\n            }}\n          >\n            <p>Ouvrir la carte...</p>\n          </MenuItem>\n          <MenuItem\n            onClick={(e) => {\n              duplicate(e);\n              setOpenPopUp(false);\n            }}\n          >\n            <p>Dupliquer...</p>\n          </MenuItem>\n          <span className={\"divider\"} />\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setModifMode(true);\n              setOpenPopUp(false);\n            }}\n          >\n            <p>Édition rapide...</p>\n          </MenuItem>\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenPopUp(false);\n              setOpenModal(true);\n              setModifMode(true);\n            }}\n          >\n            <p>Édition avancée...</p>\n          </MenuItem>\n          <span className={\"divider\"} />\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenAddContributorModal(true);\n              setOpenPopUp(false);\n            }}\n          >\n            <p>Gérer les contributeurs...</p>\n          </MenuItem>\n          <span className={\"divider\"} />\n          {events.map((category) => {\n            if (category.title !== props.task.status)\n              return (\n                <MenuItem\n                  key={category.title}\n                  onClick={() => handleMoveTo(category)}\n                >\n                  <p>\n                    Déplacer vers{\" \"}\n                    <span className={\"underlined\"}>{category.title}</span>...\n                  </p>\n                </MenuItem>\n              );\n            else return null;\n          })}\n          <span className={\"divider\"} />\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenDeleteModal(true);\n              setOpenPopUp(false);\n            }}\n          >\n            <p>Archiver...</p>\n          </MenuItem>\n        </Menu>\n      </Popup>\n      {true && (\n        <>\n          <ReactTooltip delayShow={500} id=\"duplicateTooltip\" effect=\"solid\">\n            <span>Dupliquer</span>\n          </ReactTooltip>\n          <ReactTooltip delayShow={500} id=\"archiveTooltip\" effect=\"solid\">\n            <span>Archiver</span>\n          </ReactTooltip>\n          <ReactTooltip delayShow={500} id=\"moreTooltip\" effect=\"solid\">\n            <span>Plus d'actions</span>\n          </ReactTooltip>\n          <ReactTooltip delayShow={500} id=\"editTooltip\" effect=\"solid\">\n            <span>Éditer</span>\n          </ReactTooltip>\n          <ReactTooltip delayShow={500} id=\"validateTooltip\" effect=\"solid\">\n            <span>Valider</span>\n          </ReactTooltip>\n          <ReactTooltip delayShow={500} id=\"cancelTooltip\" effect=\"solid\">\n            <span>Annuler</span>\n          </ReactTooltip>\n          <ReactTooltip delayShow={500} id=\"periodTooltip\" effect=\"solid\">\n            <span>Période</span>\n          </ReactTooltip>\n        </>\n      )}\n      <AddContributorsEvent\n        event={props.task}\n        dataEvents={props.dataEvents}\n        dataProject={props.dataProject}\n        alreadyExistingContributors={props.task.contributors}\n        open={openAddContributorModal}\n        setOpen={setOpenAddContributorModal}\n      />\n      <Modal open={openDeleteModal} setOpen={setOpenDeleteModal}>\n        <div className=\"modal__content__container space__between\">\n          <button\n            data-tip\n            data-for=\"closeTooltip\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenDeleteModal(false);\n            }}\n            className=\"close__modal__button\"\n          >\n            <MdOutlineClear />\n          </button>\n          <div>\n            <h3>Êtes-vous sûr de vouloir supprimer cet évènement ?</h3>\n            <p>La suppression sera définitive. </p>\n          </div>\n          <div className={\"delete__actions__container\"}>\n            <Button\n              reversed\n              onClick={() => {\n                setOpenDeleteModal(false);\n                setOpenModal(false);\n              }}\n            >\n              Annuler\n            </Button>\n            <Button onClick={handledeleteEvent}>Supprimer</Button>\n          </div>\n        </div>\n      </Modal>\n    </div>\n  );\n};\n\nexport default Card;\n","import { useState } from \"react\";\nimport { Droppable } from \"react-beautiful-dnd\";\nimport { FiMoreHorizontal } from \"react-icons/fi\";\nimport \"./kanban.scss\";\nimport Popup from \"../../materials/Popup/Popup\";\nimport MenuItem from \"../../materials/Menu/MenuItem\";\nimport Menu from \"../../materials/Menu/Menu\";\n\nconst Column = ({\n  droppableId,\n  children,\n  setAddCard,\n  section,\n  setEventSelected,\n}) => {\n  const [openMenu, setOpenMenu] = useState(false);\n  return (\n    <div className={`kanban__section`}>\n      <button\n        onClick={() => {\n          setOpenMenu(true);\n        }}\n        className=\"kanban__section__title__more__button\"\n      >\n        <FiMoreHorizontal />\n      </button>\n      <Droppable droppableId={droppableId}>{children}</Droppable>\n      <Popup open={openMenu} setOpen={setOpenMenu}>\n        <Menu>\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenMenu(false);\n              setEventSelected(section);\n              setAddCard(true);\n            }}\n          >\n            <p>Ajouter une carte...</p>\n          </MenuItem>\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenMenu(false);\n            }}\n          >\n            <p>Copier la liste...</p>\n          </MenuItem>\n          <span className={\"divider\"} />\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenMenu(false);\n            }}\n          >\n            <p>Trier par date de création...</p>\n          </MenuItem>\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenMenu(false);\n            }}\n          >\n            <p>Trier par ordre alphabétique...</p>\n          </MenuItem>\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenMenu(false);\n            }}\n          >\n            <p>Afficher uniquement les actions vérifiées...</p>\n          </MenuItem>\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenMenu(false);\n            }}\n          >\n            <p>Afficher uniquement les actions à vérifier...</p>\n          </MenuItem>\n          <span className={\"divider\"} />\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenMenu(false);\n            }}\n          >\n            <p>Déplacer toutes les cartes...</p>\n          </MenuItem>\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenMenu(false);\n            }}\n          >\n            <p>Archiver toutes les cartes...</p>\n          </MenuItem>\n        </Menu>\n      </Popup>\n    </div>\n  );\n};\n\nexport default Column;\n","import React, { useContext, useState, useEffect } from \"react\";\nimport \"../Card/Card.scss\";\nimport \"./Row.scss\";\nimport \"../kanban.scss\";\nimport \"../../Client/RecentEvents/RecentEvents.css\";\nimport \"../../GlobalInfos/GlobalInfos.scss\";\nimport { BiTime } from \"react-icons/bi\";\nimport { MdOutlineClear } from \"react-icons/md\";\nimport { MdOutlineDeleteOutline } from \"react-icons/md\";\nimport { AiOutlineCheck, AiFillInfoCircle } from \"react-icons/ai\";\nimport { FiMoreHorizontal } from \"react-icons/fi\";\nimport { ImWarning } from \"react-icons/im\";\nimport { AiOutlineCheckCircle } from \"react-icons/ai\";\nimport { BsPeopleFill } from \"react-icons/bs\";\nimport Modal from \"../../../materials/Modal/Modal\";\nimport ReactTooltip from \"react-tooltip\";\nimport AddContributorsEvent from \"../Card/AddContributorsEvent\";\nimport {\n  CHANGE_EVENT_DESCRIPTION,\n  CHANGE_EVENT_STATUS,\n  CHANGE_EVENT_STATE,\n  DELETE_EVENT,\n  CREATE_EVENT,\n} from \"../../../graphql/mutations\";\nimport { GET_ALL_COMMENTS_BY_EVENT_ID } from \"../../../graphql/queries\";\nimport { Context } from \"../../Context/Context\";\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport Popup from \"../../../materials/Popup/Popup\";\nimport { toast } from \"react-toastify\";\nimport { useParams } from \"react-router\";\nimport MenuItem from \"../../../materials/Menu/MenuItem\";\nimport Menu from \"../../../materials/Menu/Menu\";\nimport Progress from \"../../../materials/Progress/Progress\";\nimport Comments from \"../Card/Comments/Comments\";\nimport Button from \"../../../materials/Button/Button\";\nimport ModifAreaCard from \"../Card/ModifAreaCard/ModifAreaCard\";\nimport shortString from \"../../../assets/functions/shortString\";\nimport getPeriod from \"../../../assets/functions/getPeriod\";\nimport Avatar from \"../../../materials/Avatar/Avatar\";\nimport formatDate from \"../../../assets/functions/formatDate\";\nimport CheckBox from \"../../../materials/CheckBox/CheckBox\";\nconst Row = (props) => {\n  const {\n    setEvents,\n    events,\n    currentProject,\n    setCurrentProject,\n    user,\n    selectedEvents,\n    setSelectedEvents,\n  } = useContext(Context);\n  const [openModal, setOpenModal] = useState(false);\n  const [openDeleteModal, setOpenDeleteModal] = useState(false);\n  const [openAddContributorModal, setOpenAddContributorModal] = useState(false);\n  const [modifMode, setModifMode] = useState(false);\n  const [openPopUp, setOpenPopUp] = useState(false);\n  const [comments, setComments] = useState([]);\n  const [checked, setChecked] = useState(false);\n  const [changeEventDescription] = useMutation(CHANGE_EVENT_DESCRIPTION);\n  const [changeEventStatus] = useMutation(CHANGE_EVENT_STATUS);\n  const [changeEventState] = useMutation(CHANGE_EVENT_STATE);\n  const [deleteEvent] = useMutation(DELETE_EVENT);\n  const [createEvent] = useMutation(CREATE_EVENT);\n  const [description, setDescription] = useState(props.task.description);\n\n  useEffect(() => {\n    if (selectedEvents.find((e) => e.id === props.task.id)) setChecked(true);\n    else {\n      setChecked(false);\n    }\n  }, [selectedEvents, props.task.id, setChecked]);\n  const { id } = useParams();\n  const commentsData = useQuery(GET_ALL_COMMENTS_BY_EVENT_ID, {\n    variables: { eventId: props.task.id },\n  });\n  useEffect(() => {\n    if (commentsData?.data) {\n      setComments(commentsData?.data?.getAllCommentsByEventId);\n    }\n  }, [setComments, commentsData?.data]);\n  const handleModifyDescription = async (e) => {\n    e.stopPropagation();\n    try {\n      await changeEventDescription({\n        variables: {\n          eventId: props.task.id,\n          newDescription: description,\n        },\n      });\n      props.dataEvents.refetch();\n      setModifMode(false);\n    } catch (err) {\n      toast.error(\"Impossible de modifier la description.\", {\n        position: toast.POSITION.BOTTOM_LEFT,\n        pauseOnHover: false,\n      });\n    }\n  };\n  const handleCloseModal = () => {\n    setModifMode(false);\n    setOpenModal(false);\n  };\n  const handleSelect = () => {\n    if (!checked) {\n      setSelectedEvents((prev) => [...prev, { id: props.task.id }]);\n    } else {\n      const newSelected = selectedEvents.filter(\n        (ev) => ev.id !== props.task.id\n      );\n      setSelectedEvents(newSelected);\n    }\n  };\n  const handleMoveTo = async (category) => {\n    try {\n      const sourceColIndex = events.findIndex(\n        (e) => e.title === props.task.status\n      );\n      const destinationColIndex = events.findIndex((e) => e.id === category.id);\n      const sourceCol = events[sourceColIndex];\n      const destinationCol = events[destinationColIndex];\n      const sourceTask = [...sourceCol.tasks];\n      const destinationTask = [...destinationCol.tasks];\n      const index = sourceTask.findIndex((task) => task.id === props.task.id);\n      const [removed] = sourceTask.splice(index, 1);\n      const removedCopy = { ...removed };\n      removedCopy.status = destinationCol?.title;\n      events[sourceColIndex].tasks = sourceTask;\n      events[destinationColIndex].tasks = destinationTask;\n      destinationTask.splice(0, 0, removedCopy);\n\n      events[sourceColIndex].tasks = sourceTask;\n      events[destinationColIndex].tasks = destinationTask;\n      await changeEventStatus({\n        variables: {\n          eventId: props.task.id,\n          newStatus: category?.title,\n        },\n      });\n      props.dataEvents.refetch();\n\n      toast(\n        <Msg>\n          {props.task.name} déplacée dans {category?.title}\n        </Msg>,\n        {\n          position: \"bottom-left\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: false,\n          draggable: false,\n          progress: undefined,\n        }\n      );\n      setOpenPopUp(false);\n    } catch (err) {\n      toast.error(\"Impossible de déplacer l'évènement.\", {\n        position: toast.POSITION.BOTTOM_LEFT,\n        pauseOnHover: false,\n      });\n    }\n    setEvents([...events]);\n    currentProject.events = [...events];\n    setCurrentProject(currentProject);\n  };\n  const handleChangeState = async (newState) => {\n    if (props.task.state === newState) return;\n    try {\n      await changeEventState({\n        variables: {\n          eventId: props.task.id,\n          newState: newState,\n        },\n      });\n      props.dataEvents.refetch();\n    } catch {\n      toast.error(\"Impossible de changer l'état de cette cart.\", {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n      });\n    }\n  };\n  const handledeleteEvent = async (e) => {\n    e.stopPropagation();\n    try {\n      await deleteEvent({\n        variables: {\n          eventId: props.task.id,\n        },\n      });\n      setModifMode(false);\n      props.dataEvents.refetch();\n\n      toast(`${props.type} archivé(e) avec succès.`, {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n      });\n    } catch (err) {\n      toast.error(\"Impossible de supprimer cette carte. Réessayez plus tard.\", {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n      });\n    }\n  };\n  const duplicate = async (e) => {\n    e.stopPropagation();\n    try {\n      const ArrayOfIds = props.task.contributors.map((acc) => acc.id);\n\n      const newEvent = await createEvent({\n        variables: {\n          type: props.type,\n          projectId: id,\n          description: props.task.description,\n          contributors: ArrayOfIds,\n          creatorId: user.id,\n          period: getPeriod(),\n          status: props.task.status,\n        },\n      });\n      const index = events.findIndex(\n        (event) => event.title === props.task.status\n      );\n      events[index].tasks.splice(events[index] + 1, 0, {\n        ...newEvent?.data?.createEvent,\n        new: true,\n      });\n      props.dataEvents.refetch();\n\n      props.setLength && props.setLength(props.length + 1);\n      toast(\n        `${\n          newEvent?.data?.createEvent\n            ? newEvent?.data?.createEvent.type\n            : \"Évenement\"\n        } dupliqué(e) avec succès.`,\n        {\n          position: \"bottom-left\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: false,\n          draggable: false,\n          progress: undefined,\n        }\n      );\n    } catch (err) {\n      toast.error(`Impossible de créer l'évènement.`, {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n      });\n    }\n  };\n\n  const handleMoreAction = (e) => {\n    e.stopPropagation();\n    setOpenPopUp(true);\n  };\n  if (props.add) return <div className=\"card\">{props.children}</div>;\n  const Msg = ({ children }) => <div>{children}</div>;\n  return (\n    <tr\n      className={\"event__row\"}\n      onClick={() => {\n        if (!openPopUp) {\n          setOpenModal(true);\n        } else setOpenPopUp(false);\n      }}\n    >\n      <td>\n        <CheckBox\n          onClick={handleSelect}\n          style={{ margin: \"0px\" }}\n          setChecked={setChecked}\n          checked={checked}\n        />\n      </td>\n      <td\n        style={{ fontSize: \"0.9rem\" }}\n        className={\n          props?.task?.period === getPeriod()\n            ? \"current__period__row\"\n            : \"previous__period__row\"\n        }\n      >\n        {props?.task?.period}\n      </td>\n      {props?.task?.contributors?.length === 0 ? (\n        <td style={{ fontStyle: \"italic\", fontSize: \"0.8rem\" }}>\n          Aucun contributeur.\n        </td>\n      ) : (\n        <td style={{ fontSize: \"0.9rem\" }}>\n          <strong>{props?.task?.contributors?.length}</strong> contributeur(s)\n        </td>\n      )}\n      <td style={{ fontSize: \"0.9rem\" }}>\n        {shortString(props.task.description, user.maxCaractersCard)}\n      </td>\n      <td style={{ fontSize: \"0.9rem\" }}>{props?.task?.status}</td>\n      <td>\n        {props.task.state === \"Vérifié\" && (\n          <span\n            data-tip\n            style={{ fontSize: \"0.9rem\" }}\n            data-for=\"periodTooltip\"\n            className={`modal__card__status__verified`}\n          >\n            {props.task.state}\n            <AiOutlineCheck color=\"var(--check-color)\" />\n          </span>\n        )}\n        {props.task.state === \"À vérifier\" && (\n          <span\n            style={{ fontSize: \"0.9rem\" }}\n            data-tip\n            data-for=\"periodTooltip\"\n            className={`modal__card__status__to__verify`}\n          >\n            {props.task.state} <BiTime color=\"var(--warning-color)\" />\n          </span>\n        )}\n      </td>\n      <td>\n        <button\n          data-tip\n          data-for=\"moreTooltip\"\n          onClick={handleMoreAction}\n          className=\"kanban__section__content__name__container__edit__button more__button\"\n        >\n          <FiMoreHorizontal />\n        </button>\n      </td>\n      <Modal open={openModal} setOpen={handleCloseModal}>\n        <div className=\"modal__content__container\">\n          <div className=\"period__title__modal__container\">\n            <span\n              data-tip\n              data-for=\"periodTooltip\"\n              className={`period__title__modal ${\n                props.task.period === getPeriod()\n                  ? \"current__period\"\n                  : \"previous__period\"\n              }`}\n            >\n              {props.task.period}{\" \"}\n            </span>\n            {props.task.period !== getPeriod() ? (\n              <span className=\"period__title__modal__warning__message\">\n                <ImWarning color=\"var(--warning-color)\" /> Cet évènement ne date\n                pas de cette semaine.\n              </span>\n            ) : (\n              <span className=\"period__title__modal__warning__message\">\n                <AiOutlineCheckCircle\n                  color=\"var(--check-color)\"\n                  fontSize={\"1.2rem\"}\n                />{\" \"}\n                Cet évènement a été créé cette semaine.\n              </span>\n            )}\n          </div>\n          <div\n            style={{\n              marginTop: \"38px\",\n              display: \"flex\",\n              width: \"100%\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"12px\" }}>\n              <h2 className={\"status__title__modal\"}>{props.task.status}</h2>\n              {props.task.state === \"Vérifié\" && !modifMode && (\n                <span\n                  data-tip\n                  data-for=\"periodTooltip\"\n                  className={`modal__card__status__verified`}\n                >\n                  {props.task.state}\n                  <AiOutlineCheck color=\"var(--check-color)\" />\n                </span>\n              )}\n              {props.task.state === \"À vérifier\" && !modifMode && (\n                <span\n                  data-tip\n                  data-for=\"periodTooltip\"\n                  className={`modal__card__status__to__verify`}\n                >\n                  {props.task.state} <BiTime color=\"var(--warning-color)\" />\n                </span>\n              )}\n            </div>\n            <div\n              style={{\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: \"4px\",\n                marginRight: \"4px\",\n              }}\n            >\n              <Button\n                style={{ height: \"35px\", display: \"flex\", gap: \"4px\" }}\n                reversed\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setOpenAddContributorModal(true);\n                  // setOpenModal(false);\n                }}\n              >\n                Gérer les contributeurs <BsPeopleFill fontSize={\"1.2rem\"} />\n              </Button>\n              <Button\n                style={{ height: \"35px\", display: \"flex\", gap: \"4px\" }}\n                reversed\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setOpenModal(false);\n                  setOpenDeleteModal(true);\n                }}\n              >\n                Supprimer <MdOutlineDeleteOutline fontSize={\"1.2rem\"} />\n              </Button>\n            </div>\n          </div>\n          <span className=\"date__creator__span\">\n            <span>Le {formatDate(props.task.creation)}</span>\n            {props.task.creator && (\n              <span>\n                {\" \"}\n                par {props.task.creator.firstname} {props.task.creator.lastname}\n              </span>\n            )}\n          </span>\n          <button\n            data-tip\n            data-for=\"closeTooltip\"\n            onClick={(e) => {\n              e.stopPropagation();\n              handleCloseModal();\n              setModifMode(false);\n            }}\n            className=\"close__modal__button\"\n          >\n            <MdOutlineClear />\n          </button>\n          <ModifAreaCard\n            event={props.task}\n            value={description}\n            setValue={setDescription}\n            handleModifyDescription={handleModifyDescription}\n            placeholder={\"La carte doit avoir une description...\"}\n          />\n          {props?.task?.contributors?.length !== 0 && (\n            <div style={{ marginTop: \"20px\" }}>\n              <h3 style={{ marginBottom: \"6px\" }}>Contributeurs</h3>\n              <div className=\"kanban__section__content__name__container__avatars__container\">\n                {props?.task?.contributors?.map((acc, i) => (\n                  <Avatar name={acc.username} src={acc.avatarUrl} key={i} />\n                ))}\n              </div>\n            </div>\n          )}\n          {!comments ? (\n            <Progress />\n          ) : (\n            <Comments\n              commentsData={commentsData}\n              comments={comments}\n              dataEvents={props.dataEvents}\n              event={props.task}\n            />\n          )}\n          <h3 style={{ display: \"flex\", alignItems: \"center\", gap: \"6px\" }}>\n            <AiFillInfoCircle /> Informations\n          </h3>\n          <p style={{ fontStyle: \"italic\" }}>\n            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed\n            convallis nibh non lorem vulputate egestas. Sed leo odio, dignissim\n            ac sollicitudin eget, vehicula nec dui. Praesent in lorem ut augue\n            lobortis suscipit.\n          </p>\n        </div>\n      </Modal>\n      <Popup\n        open={openPopUp}\n        setOpen={setOpenPopUp}\n        style={{ transform: \"translate(-10px,0px)\" }}\n      >\n        <Menu>\n          <MenuItem\n            style={{ backgroundColor: \"green\" }}\n            onClick={(e) => {\n              e.stopPropagation();\n              handleChangeState(\"Vérifié\");\n              setOpenPopUp(false);\n            }}\n          >\n            <p>Vérifié</p>\n          </MenuItem>\n          <MenuItem\n            style={{ backgroundColor: \"red\" }}\n            onClick={(e) => {\n              e.stopPropagation();\n              handleChangeState(\"À vérifier\");\n              setOpenPopUp(false);\n            }}\n          >\n            <p>À vérifier</p>\n          </MenuItem>\n          <span className={\"divider\"} />\n          <MenuItem\n            onClick={(e) => {\n              setOpenModal(true);\n              setOpenPopUp(false);\n            }}\n          >\n            <p>Ouvrir la carte...</p>\n          </MenuItem>\n          <MenuItem\n            onClick={(e) => {\n              duplicate(e);\n              setOpenPopUp(false);\n            }}\n          >\n            <p>Dupliquer...</p>\n          </MenuItem>\n          <span className={\"divider\"} />\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setModifMode(true);\n              setOpenPopUp(false);\n            }}\n          >\n            <p>Édition rapide...</p>\n          </MenuItem>\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenPopUp(false);\n              setOpenModal(true);\n              setModifMode(true);\n            }}\n          >\n            <p>Édition avancée...</p>\n          </MenuItem>\n          <span className={\"divider\"} />\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenAddContributorModal(true);\n              setOpenPopUp(false);\n            }}\n          >\n            <p>Gérer les contributeurs...</p>\n          </MenuItem>\n          <span className={\"divider\"} />\n          {events.map((category) => {\n            if (category.title !== props.task.status)\n              return (\n                <MenuItem\n                  key={category.title}\n                  onClick={() => handleMoveTo(category)}\n                >\n                  <p>\n                    Déplacer vers{\" \"}\n                    <span className={\"underlined\"}>{category.title}</span>...\n                  </p>\n                </MenuItem>\n              );\n            else return null;\n          })}\n          <span className={\"divider\"} />\n          <MenuItem\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenDeleteModal(true);\n              setOpenPopUp(false);\n            }}\n          >\n            <p>Archiver...</p>\n          </MenuItem>\n        </Menu>\n      </Popup>\n      {true && (\n        <>\n          <ReactTooltip delayShow={500} id=\"duplicateTooltip\" effect=\"solid\">\n            <span>Dupliquer</span>\n          </ReactTooltip>\n          <ReactTooltip delayShow={500} id=\"archiveTooltip\" effect=\"solid\">\n            <span>Archiver</span>\n          </ReactTooltip>\n          <ReactTooltip delayShow={500} id=\"moreTooltip\" effect=\"solid\">\n            <span>Plus d'actions</span>\n          </ReactTooltip>\n          <ReactTooltip delayShow={500} id=\"editTooltip\" effect=\"solid\">\n            <span>Éditer</span>\n          </ReactTooltip>\n          <ReactTooltip delayShow={500} id=\"validateTooltip\" effect=\"solid\">\n            <span>Valider</span>\n          </ReactTooltip>\n          <ReactTooltip delayShow={500} id=\"cancelTooltip\" effect=\"solid\">\n            <span>Annuler</span>\n          </ReactTooltip>\n          <ReactTooltip delayShow={500} id=\"periodTooltip\" effect=\"solid\">\n            <span>Période</span>\n          </ReactTooltip>\n        </>\n      )}\n      <AddContributorsEvent\n        event={props.task}\n        dataEvents={props.dataEvents}\n        dataProject={props.dataProject}\n        alreadyExistingContributors={props.task.contributors}\n        open={openAddContributorModal}\n        setOpen={setOpenAddContributorModal}\n      />\n      <Modal open={openDeleteModal} setOpen={setOpenDeleteModal}>\n        <div className=\"modal__content__container space__between\">\n          <button\n            data-tip\n            data-for=\"closeTooltip\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setOpenDeleteModal(false);\n            }}\n            className=\"close__modal__button\"\n          >\n            <MdOutlineClear />\n          </button>\n          <div>\n            <h3>Êtes-vous sûr(e) de vouloir supprimer cet évènement ?</h3>\n            <p>La suppression sera définitive. </p>\n          </div>\n          <div className={\"delete__actions__container\"}>\n            <Button\n              reversed\n              onClick={() => {\n                setOpenDeleteModal(false);\n                setOpenModal(false);\n              }}\n            >\n              Annuler\n            </Button>\n            <Button onClick={handledeleteEvent}>Supprimer</Button>\n          </div>\n        </div>\n      </Modal>\n    </tr>\n  );\n};\n\nexport default Row;\n","import \"./kanban.scss\";\nimport \"./Card/Card.scss\";\nimport { DragDropContext } from \"react-beautiful-dnd\";\nimport React, { useState } from \"react\";\nimport Popup from \"../../materials/Popup/Popup\";\nimport Menu from \"../../materials/Menu/Menu\";\nimport MenuItem from \"../../materials/Menu/MenuItem\";\nimport Card from \"./Card/Card\";\nimport { Context } from \"../Context/Context\";\nimport Button from \"../../materials/Button/Button\";\nimport { BiPlus } from \"react-icons/bi\";\nimport { MdOutlineClear } from \"react-icons/md\";\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport { FaChevronDown } from \"react-icons/fa\";\nimport Modal from \"../../materials/Modal/Modal\";\nimport {\n  FIND_EVENTS_BY_PROJECT_ID,\n  FIND_PROJECT_BY_PROJECT_ID,\n} from \"../../graphql/queries\";\nimport {\n  CREATE_EVENT,\n  CHANGE_EVENT_STATUS,\n  CHANGE_EVENT_STATE,\n  DELETE_MULTIPLE_EVENTS,\n} from \"../../graphql/mutations\";\nimport { toast } from \"react-toastify\";\nimport rawEvents from \"../../rawEvents\";\nimport { Navigate, useParams } from \"react-router\";\nimport { Flip } from \"react-toastify\";\nimport Column from \"./Column\";\nimport AutoTextArea from \"../../materials/AutoSizeTextArea/AutoSizeTextArea\";\nimport Progress from \"../../materials/Progress/Progress\";\nimport Backdrop from \"../../materials/Backdrop/Backdrop\";\nimport getPeriod from \"../../assets/functions/getPeriod\";\nimport Row from \"./Row/Row\";\nimport CheckBox from \"../../materials/CheckBox/CheckBox\";\nconst EventKanban = ({ type, setLength, length }) => {\n  const {\n    events,\n    setCurrentProject,\n    setEvents,\n    user,\n    currentProject,\n    listStyle,\n    addCard,\n    setAddCard,\n    setSelectedEvents,\n    selectedEvents,\n  } = React.useContext(Context);\n  const [selectAll, setSelectAll] = useState(false);\n  const [openActionPopup, setOpenActionPopup] = useState(false);\n  const [selectedAcountables, setSelectedcontributors] = useState([]);\n  const [eventSelected, setEventSelected] = useState();\n  const [eventsData, setEventsData] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [createEvent] = useMutation(CREATE_EVENT);\n  const [changeEventDescription] = useMutation(CHANGE_EVENT_STATUS);\n  const [changeEventState] = useMutation(CHANGE_EVENT_STATE);\n  const [deleteMultipleEvents] = useMutation(DELETE_MULTIPLE_EVENTS);\n  const [openDeleteModal, setOpenDeleteModal] = useState(false);\n  const { id } = useParams();\n  const dataProject = useQuery(FIND_PROJECT_BY_PROJECT_ID, {\n    variables: { id: id, userId: user?.id },\n    onCompleted: (data) => {\n      setCurrentProject(data?.findProjectByProjectId);\n    },\n  });\n  const dataEvents = useQuery(FIND_EVENTS_BY_PROJECT_ID, {\n    variables: { id: id, type: type },\n    onCompleted: (data) => {\n      setEventsData(data.findEventsByProjectId);\n    },\n  });\n\n  React.useEffect(() => {\n    rawEvents.forEach((item) => (item.tasks = []));\n    const eventsFinal = [...rawEvents];\n    const eventsDataF = [...eventsData];\n    eventsDataF?.forEach((event) => {\n      const index = eventsFinal.findIndex((ev) => ev.title === event.status);\n      if (index !== -1) eventsFinal[index].tasks.push(event);\n    });\n    setEvents(eventsFinal);\n  }, [eventsData, setEvents]);\n\n  const changeStateSelectedEvents = async (newState) => {\n    try {\n      selectedEvents.forEach(\n        async (event) =>\n          await changeEventState({\n            variables: {\n              eventId: event.id,\n              newState: newState,\n            },\n          })\n      );\n      toast.success(\n        `${selectedEvents.length} évènements passés en \"${newState}\".`,\n        {\n          position: \"bottom-left\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: false,\n          draggable: false,\n          progress: undefined,\n          transition: Flip,\n        }\n      );\n      setSelectedEvents([]);\n    } catch (err) {\n      toast.warning(`Une erreur est surevenue.`, {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n        transition: Flip,\n      });\n      console.log(err);\n    }\n    dataEvents.refetch();\n  };\n  const selectAllEvents = () => {\n    if (!selectAll) {\n      setSelectedEvents([]);\n      setSelectedEvents(\n        eventsData.map((e) => {\n          return { id: e.id };\n        })\n      );\n      setSelectAll(false);\n    } else {\n      setSelectedEvents([]);\n    }\n    console.log(selectedEvents);\n  };\n\n  const onDragEnd = async (result) => {\n    if (!result.destination) return;\n    const { source, destination } = result;\n\n    if (source.droppableId !== destination.droppableId) {\n      const sourceColIndex = events.findIndex(\n        (e) => e.id === source.droppableId\n      );\n      const destinationColIndex = events.findIndex(\n        (e) => e.id === destination.droppableId\n      );\n\n      const sourceCol = events[sourceColIndex];\n      const destinationCol = events[destinationColIndex];\n\n      const sourceTask = [...sourceCol.tasks];\n      const destinationTask = [...destinationCol.tasks];\n\n      const [removed] = sourceTask.splice(source.index, 1);\n      const removedCopy = { ...removed };\n      removedCopy.status = destinationCol?.title;\n      destinationTask.splice(destination.index, 0, removedCopy);\n      events[sourceColIndex].tasks = sourceTask;\n      events[destinationColIndex].tasks = destinationTask;\n      try {\n        await changeEventDescription({\n          variables: {\n            eventId: result?.draggableId,\n            newStatus: destinationCol?.title,\n          },\n        });\n      } catch (err) {}\n      dataEvents.refetch();\n    } else {\n      const index = events.findIndex((e) => e.id === source.droppableId);\n      const items = Array.from(events[index].tasks);\n      const [reorderedItem] = items.splice(source.index, 1);\n      items.splice(result.destination.index, 0, reorderedItem);\n      dataEvents.refetch();\n    }\n  };\n  const handleDeleteSelectedEvents = async (e) => {\n    try {\n      const ids = selectedEvents.map((e) => e.id);\n      const response = await deleteMultipleEvents({\n        variables: {\n          eventIds: ids,\n        },\n      });\n      setSelectedEvents([]);\n      toast(`${response.data.deleteMultipleEvents.message}`, {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n      });\n    } catch (err) {\n      toast.error(\n        \"Impossible de supprimer ces évènements. Réessayez plus tard.\",\n        {\n          position: \"bottom-left\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: false,\n          draggable: false,\n          progress: undefined,\n        }\n      );\n    }\n    dataEvents.refetch();\n    setOpenDeleteModal(false);\n  };\n  const add = async (e) => {\n    if (input === \"\") return;\n    e.preventDefault();\n    const ArrayOfIds = selectedAcountables.map((acc) => acc.id);\n    try {\n      await createEvent({\n        variables: {\n          type: type,\n          projectId: id,\n          creatorId: user.id,\n          description: input,\n          contributors: ArrayOfIds,\n          status: eventSelected ? eventSelected.title : \"Nouveau\",\n          period: getPeriod(),\n        },\n      });\n      setInput(\"\");\n      dataEvents.refetch();\n      setLength && setLength(length + 1);\n      setSelectedcontributors([]);\n    } catch (err) {\n      toast.warning(`Impossible de créer l'évènement.`, {\n        position: \"bottom-left\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: false,\n        draggable: false,\n        progress: undefined,\n        transition: Flip,\n      });\n      console.log(err);\n    }\n  };\n  const commentEnterSubmit = (e) => {\n    if (e.key === \"Enter\" && e.shiftKey === false && input !== \"\") {\n      return add(e);\n    }\n  };\n  if (!dataProject && !dataProject.loading) {\n    return <Navigate to={\"/404\"} />;\n  }\n  if (!currentProject)\n    return (\n      <Backdrop>\n        <Progress size=\"medium\" reversed />\n      </Backdrop>\n    );\n  if (!dataEvents?.data || dataEvents.loading || !events)\n    return (\n      <div\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          width: \"100%\",\n          height: \"100%\",\n        }}\n      >\n        <Progress size=\"medium\" reversed />\n      </div>\n    );\n  if (listStyle) {\n    return (\n      <>\n        <table className={\"events__rows__container\"}>\n          <tr className={\"events__rows__container__head\"}>\n            <th style={{ display: \"flex\", alignItems: \"center\", gap: \"10px\" }}>\n              <CheckBox\n                onClick={selectAllEvents}\n                checked={selectAll}\n                setChecked={setSelectAll}\n              />\n              <span\n                style={{\n                  fontWeight: \"normal\",\n                  fontSize: \"0.8rem\",\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  gap: \"6px\",\n                  cursor: \"pointer\",\n                }}\n                onClick={() => {\n                  selectedEvents.length > 0 && setOpenActionPopup(true);\n                }}\n              >\n                <FaChevronDown fontSize=\"0.6rem\" />\n              </span>\n              <Popup\n                style={{ transform: \"translate(80px, 50px)\" }}\n                bottom\n                open={openActionPopup}\n                setOpen={setOpenActionPopup}\n              >\n                <Menu>\n                  <MenuItem\n                    onClick={() => {\n                      changeStateSelectedEvents(\"Vérifié\");\n                    }}\n                  >\n                    <span>Passer en \"Vérifié\"</span>\n                  </MenuItem>\n                  <MenuItem\n                    onClick={() => {\n                      changeStateSelectedEvents(\"À vérifier\");\n                    }}\n                  >\n                    <span>Passer en \"À vérifier\"</span>\n                  </MenuItem>\n                  <MenuItem\n                    onClick={() => {\n                      setOpenActionPopup(false);\n                      setOpenDeleteModal(true);\n                    }}\n                  >\n                    <span>Supprimer {selectedEvents?.length} évènement(s)</span>\n                  </MenuItem>\n                </Menu>\n              </Popup>\n            </th>\n            <th>Période</th>\n            <th>Contributeurs</th>\n            <th>Description</th>\n            <th>Status</th>\n            <th>État</th>\n            <th></th>\n          </tr>\n          {eventsData.map((e, i) => (\n            <Row\n              key={i}\n              type={type}\n              task={e}\n              setLength={setLength}\n              length={length}\n              dataEvents={dataEvents}\n              dataProject={dataProject}\n            />\n          ))}\n          {addCard && (\n            <tr className={\"event__row\"}>\n              <td></td>\n              <td\n                style={{ fontSize: \"0.9rem\" }}\n                className={\"current__period__row\"}\n              >\n                {getPeriod()}\n              </td>\n\n              <td></td>\n              <td>\n                <form onSubmit={add}>\n                  <AutoTextArea\n                    onKeyPress={commentEnterSubmit}\n                    placeholder={\"Titre de l'évènement...\"}\n                    onChange={(e) => setInput(e.target.value)}\n                    onClick={(e) => e.stopPropagation()}\n                    value={input}\n                    autoFocus\n                    className=\"modif__description__textarea__row\"\n                  ></AutoTextArea>\n                </form>\n              </td>\n              <td style={{ fontSize: \"0.9rem\" }}>Nouveau</td>\n              <td>\n                <Button style={{ height: \"30px\" }} onClick={add}>\n                  Créer\n                </Button>\n              </td>\n              <td style={{ padding: \"4px\" }}>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setAddCard(false);\n                  }}\n                  className=\"clear__button\"\n                >\n                  <MdOutlineClear />\n                </button>\n              </td>\n            </tr>\n          )}\n        </table>\n        {!addCard && (\n          <Button\n            onClick={() => setAddCard(true)}\n            style={{\n              position: \"sticky\",\n              bottom: \"10px\",\n              margin: \"10px\",\n              zIndex: 1,\n            }}\n          >\n            Ajouter un évènement +\n          </Button>\n        )}\n        <Modal open={openDeleteModal} setOpen={setOpenDeleteModal}>\n          <div className=\"modal__content__container space__between\">\n            <button\n              data-tip\n              data-for=\"closeTooltip\"\n              onClick={(e) => {\n                e.stopPropagation();\n                setOpenDeleteModal(false);\n              }}\n              className=\"close__modal__button\"\n            >\n              <MdOutlineClear />\n            </button>\n            <div>\n              <h3>\n                Êtes-vous sûr(e) de vouloir supprimer {selectedEvents.length}{\" \"}\n                évènement(s) ?\n              </h3>\n              {selectedEvents.length === 1 ? (\n                <p>L'évènement suivant sera supprimé :</p>\n              ) : (\n                <p>\n                  Les {selectedEvents.length} évènement(s) suivants seront\n                  supprimés :\n                </p>\n              )}\n              <ul\n                style={{\n                  margin: \"20px\",\n                }}\n              >\n                {selectedEvents.map((eve) => (\n                  <li\n                    style={{\n                      listStyle: \"inside\",\n                    }}\n                    key={eve.id}\n                  >\n                    id : {eve.id}\n                  </li>\n                ))}\n              </ul>\n              <p>La suppression sera définitive. </p>\n            </div>\n            <div\n              className={\"delete__actions__container\"}\n              style={{ position: \"sticky\", bottom: \"12px\" }}\n            >\n              <Button\n                reversed\n                onClick={() => {\n                  setOpenDeleteModal(false);\n                }}\n              >\n                Annuler\n              </Button>\n              <Button onClick={handleDeleteSelectedEvents}>Supprimer</Button>\n            </div>\n          </div>\n        </Modal>\n      </>\n    );\n  }\n\n  return (\n    <>\n      {!events ? (\n        <div\n          style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n          }}\n        >\n          <Progress size=\"medium\" reversed />\n        </div>\n      ) : (\n        <DragDropContext onDragEnd={onDragEnd}>\n          <div className=\"kanban\">\n            {events?.map((section, i) => (\n              <Column\n                addCard={addCard}\n                setAddCard={setAddCard}\n                section={section}\n                setEventSelected={setEventSelected}\n                key={section.id}\n                droppableId={section.id}\n              >\n                {(provided) => (\n                  <div {...provided.droppableProps} ref={provided.innerRef}>\n                    <h2 className={`kanban__section__title`}>\n                      {section?.title} ({section?.tasks?.length})\n                    </h2>\n                    <div className=\"kanban__section__content\">\n                      {section?.tasks?.map((task, index) => (\n                        <Card\n                          key={task?.id}\n                          draggableId={task?.id}\n                          index={index}\n                          type={type}\n                          task={task}\n                          setLength={setLength}\n                          length={length}\n                          dataEvents={dataEvents}\n                          dataProject={dataProject}\n                          className={`card card__${i + 1}`}\n                        />\n                      ))}\n                      {addCard && eventSelected.id === section.id && (\n                        <Card add type={type} task={\"\"} className={`card`}>\n                          <form className=\"add__card__form\" onSubmit={add}>\n                            <AutoTextArea\n                              onKeyPress={commentEnterSubmit}\n                              placeholder={\"Titre de l'évènement...\"}\n                              onChange={(e) => setInput(e.target.value)}\n                              onClick={(e) => e.stopPropagation()}\n                              value={input}\n                              autoFocus\n                              className=\"modif__description__textarea\"\n                            ></AutoTextArea>\n                            <div className=\"add__card__button__container\">\n                              <Button\n                                style={{ width: \"80%\", height: \"35px\" }}\n                                type=\"submit\"\n                                disabled={\n                                  !eventSelected || input === \"\" ? true : false\n                                }\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  add(e);\n                                  setAddCard(false);\n                                }}\n                              >\n                                Ajouter\n                              </Button>\n                              <button\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  setAddCard(false);\n                                }}\n                                className=\"clear__button\"\n                              >\n                                <MdOutlineClear />\n                              </button>\n                            </div>\n                          </form>\n                        </Card>\n                      )}\n                      {provided.placeholder}\n                    </div>\n                    <button\n                      onClick={() => {\n                        setEventSelected(section);\n                        setAddCard(true);\n                      }}\n                      className={`kanban__section__title__button`}\n                    >\n                      <BiPlus /> Ajouter une carte\n                    </button>\n                  </div>\n                )}\n              </Column>\n            ))}\n          </div>\n        </DragDropContext>\n      )}\n    </>\n  );\n};\n\nexport default EventKanban;\n"],"sourceRoot":""}